<!doctype html>
<html
  lang="ko-kr"
  data-theme="claude">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1314&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<title>A Systematic Study of Cross-Layer KV Sharing for Efficient LLM Inference | Jaehun&#39;s Blog</title>

<meta name="description" content="논문 링크
Q : 이 논문을 아주 자세하게 읽고 논문의 강점과 독창적인 지점을 설명해주고 핵심 알고리즘을 예시 입력을 들어서 전체적인 과정을 설명해줘 추가적으로 논문의 한계점에 대해서도 알려줘 논문 분석: &ldquo;A Systematic Study of..." />
<meta name="keywords" content="개발, 컴파일러, 프로그래밍, 에세이" />
<meta name="author" content="" />
<meta name="language" content="ko-kr" />

<meta name="robots" content="index, follow" />
<link rel="canonical" href="http://192.168.1.11:1314/posts/A-Systematic-Study-of-Cross-Layer-KV-Sharing-for-Efficient-LLM-Inference/" />



  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />



<link rel="manifest" href="/site.webmanifest" />
<meta property="og:url" content="http://192.168.1.11:1314/posts/A-Systematic-Study-of-Cross-Layer-KV-Sharing-for-Efficient-LLM-Inference/">
  <meta property="og:site_name" content="Jaehun&#39;s Blog">
  <meta property="og:title" content="A Systematic Study of Cross-Layer KV Sharing for Efficient LLM Inference">
  <meta property="og:description" content="논문 링크
Q : 이 논문을 아주 자세하게 읽고 논문의 강점과 독창적인 지점을 설명해주고 핵심 알고리즘을 예시 입력을 들어서 전체적인 과정을 설명해줘 추가적으로 논문의 한계점에 대해서도 알려줘 논문 분석: “A Systematic Study of Cross-Layer KV Sharing for Efficient LLM Inference” 1. 논문의 강점과 독창성 강점">
  <meta property="og:locale" content="ko_kr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-11-19T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-19T00:00:00+00:00">
    <meta property="og:image" content="http://192.168.1.11:1314/images/og-default.avif">


  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://192.168.1.11:1314/images/og-default.avif">
  <meta name="twitter:title" content="A Systematic Study of Cross-Layer KV Sharing for Efficient LLM Inference">
  <meta name="twitter:description" content="논문 링크
Q : 이 논문을 아주 자세하게 읽고 논문의 강점과 독창적인 지점을 설명해주고 핵심 알고리즘을 예시 입력을 들어서 전체적인 과정을 설명해줘 추가적으로 논문의 한계점에 대해서도 알려줘 논문 분석: “A Systematic Study of Cross-Layer KV Sharing for Efficient LLM Inference” 1. 논문의 강점과 독창성 강점">


  <meta itemprop="name" content="A Systematic Study of Cross-Layer KV Sharing for Efficient LLM Inference">
  <meta itemprop="description" content="논문 링크
Q : 이 논문을 아주 자세하게 읽고 논문의 강점과 독창적인 지점을 설명해주고 핵심 알고리즘을 예시 입력을 들어서 전체적인 과정을 설명해줘 추가적으로 논문의 한계점에 대해서도 알려줘 논문 분석: “A Systematic Study of Cross-Layer KV Sharing for Efficient LLM Inference” 1. 논문의 강점과 독창성 강점">
  <meta itemprop="datePublished" content="2024-11-19T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-11-19T00:00:00+00:00">
  <meta itemprop="wordCount" content="9260">
  <meta itemprop="image" content="http://192.168.1.11:1314/images/og-default.avif">
  <meta itemprop="keywords" content="Paper-Review,With-Gpt">







<script>
  window.HUGO_SEARCH_CONFIG = {
    searchIndexURL: "\"/index.json\""
  };
</script>


































<script>

  window.HUGO_GALLERY_CONFIG = {
    justified_gallery:  false ,
    lightbox:  false ,
    justified: "{}",
    lightbox_options: "{}"
  };
</script>




  
    <link rel="stylesheet" href="/css/compiled.css" />
  





  
    <link rel="stylesheet" href="/css/chroma.css" />
  












      <script src="/js/main.js"></script>



  <script src="/js/gumshoe.polyfills.min.js"></script>



        <script src="/js/toc.js" defer></script>



      <script src="/js/search.js" defer></script>



      <script src="/js/dock.js" defer></script>











  











    <script>
      
      (function() {
        const theme = localStorage.getItem('theme') || 'system';
        const colorScheme = localStorage.getItem('colorScheme') || 'claude';

        
        document.documentElement.setAttribute('data-theme', colorScheme);

        
        function applyTheme() {
          if (theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
          } else {
            document.documentElement.classList.remove('dark');
          }
        }

        applyTheme();

        
        if (theme === 'system') {
          window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', applyTheme);
        }
      })();
    </script>
  </head>

  <body class="bg-background text-foreground min-h-screen antialiased">
    
    
  <div
    id="reading-progress-container"
    class="reading-progress-container pointer-events-none fixed top-0 right-0 left-0 z-50 transition-opacity duration-300 ease-out"
    data-height="3"
    data-smooth-scroll="true"
    data-hide-on-complete="false">
    
    <div class="reading-progress-bg w-full"></div>

    
    <div
      id="reading-progress-bar"
      class="from-primary to-primary/80 reading-progress-bar 
        transition-all duration-150 ease-out
       absolute top-0 left-0 w-0 bg-gradient-to-r"></div>
  </div>

  <script>
    (function () {
      "use strict";

      const progressContainer = document.getElementById(
        "reading-progress-container",
      );
      const progressBar = document.getElementById("reading-progress-bar");

      if (!progressContainer || !progressBar) return;

      
      const config = {
        smoothScroll: progressContainer.dataset.smoothScroll === "true",
        hideOnComplete: progressContainer.dataset.hideOnComplete === "true",
      };

      let isVisible = true;
      let gumshoeInstance = null;

      
      function calculateProgress() {
        const scrollTop =
          window.pageYOffset || document.documentElement.scrollTop;
        const documentHeight = document.documentElement.scrollHeight;
        const windowHeight = window.innerHeight;
        const scrollableHeight = documentHeight - windowHeight;

        if (scrollableHeight <= 0) return 0;

        return Math.min(Math.max((scrollTop / scrollableHeight) * 100, 0), 100);
      }

      
      function updateProgress() {
        const progress = calculateProgress();
        progressBar.style.width = progress + "%";

        
        if (config.hideOnComplete && progress >= 99.5) {
          if (isVisible) {
            progressContainer.style.opacity = "0";
            isVisible = false;
          }
        } else if (!isVisible) {
          progressContainer.style.opacity = "1";
          isVisible = true;
        }
      }

      
      let ticking = false;
      function requestTick() {
        if (!ticking) {
          requestAnimationFrame(() => {
            updateProgress();
            ticking = false;
          });
          ticking = true;
        }
      }

      
      function init() {
        
        window.addEventListener("scroll", requestTick, { passive: true });
        window.addEventListener("resize", requestTick, { passive: true });
        document.addEventListener("visibilitychange", () => {
          if (!document.hidden) requestTick();
        });

        
        requestTick();

        
        window.addEventListener("beforeunload", () => {
          window.removeEventListener("scroll", requestTick);
          window.removeEventListener("resize", requestTick);
        });
      }

      
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", init);
      } else {
        init();
      }
    })();
  </script>

    <header class="sticky top-0 z-50 mx-auto max-w-4xl px-4 py-6">
  <div
    class="border-border bg-card/80 flex items-center rounded-xl border px-6 py-4 shadow-sm backdrop-blur-sm">
    
    <div class="hidden w-full items-center md:flex">
      
      <div class="flex items-center">
        
          
          <a
            href="/"
            class="bg-primary text-primary-foreground hover:bg-primary/90 flex h-10 w-10 items-center justify-center rounded-full text-lg font-bold transition-transform duration-200 hover:scale-105"
            aria-label="Jaehun&#39;s Blog">
            J
          </a>
        
      </div>

      
      <nav class="mx-8 flex flex-1 items-center justify-center">
        <div class="flex items-center space-x-1">
          
          
            
            
            
              
                
              
            
            
            <a
              href="/posts/"
              class="nav-link 
                text-muted-foreground hover:text-primary hover:bg-primary/10
               focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none">
              
                
  <svg class="h-5 w-5"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="nav.posts">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />

</svg>
              
              <span
                >
                  게시글
                </span
              >
            </a>
          
            
            
            
              
                
              
            
            
            <a
              href="/categories/"
              class="nav-link 
                text-muted-foreground hover:text-primary hover:bg-primary/10
               focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none">
              
                
  <svg class="h-5 w-5"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="nav.categories">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />

</svg>
              
              <span
                >
                  카테고리
                </span
              >
            </a>
          
            
            
            
              
                
              
            
            
            <a
              href="/tags/"
              class="nav-link 
                text-muted-foreground hover:text-primary hover:bg-primary/10
               focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none">
              
                
  <svg class="h-5 w-5"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="nav.tags">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />

</svg>
              
              <span
                >
                  태그
                </span
              >
            </a>
          
            
            
            
              
                
              
            
            
            <a
              href="/archives/"
              class="nav-link 
                text-muted-foreground hover:text-primary hover:bg-primary/10
               focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none">
              
                
  <svg class="h-5 w-5"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="nav.archives">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" />

</svg>
              
              <span
                >
                  아카이브
                </span
              >
            </a>
          
        </div>
      </nav>

      
      <div class="flex items-center space-x-2">
        
        
<div class="relative">
  <button id="language-toggle"
    class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95"
    data-dropdown-type="language"
    aria-label="언어 변경"
    aria-expanded="false"
    aria-haspopup="true">
      
  <svg class="h-5 w-5 relative z-10"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="언어 변경">
	<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 8l6 6m-7 0l6-6l2-3M2 5h12M7 2h1m14 20l-5-10l-5 10m2-4h6" />
</svg></button>

  
  <div id="language-dropdown"
    class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out"
    data-dropdown-type="language"
    role="menu"
    aria-labelledby="language-toggle"><a href="/ko/" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none" role="menuitem" aria-current="true"><span class="font-medium">한국어</span></a><a href="/en/" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none" role="menuitem"><span class="font-medium">English</span></a></div>
</div>

        
        
<div class="relative">
  <button id="color-scheme-toggle"
    class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95"
    data-dropdown-type="color-scheme"
    aria-label="테마 변경"
    aria-expanded="false"
    aria-haspopup="true">
      
  <svg class="h-5 w-5 relative z-10"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="테마 변경">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v6a2 2 0 002 2h4a2 2 0 002-2V5z" />

</svg></button>

  
  <div id="color-scheme-dropdown"
    class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-44 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out"
    data-dropdown-type="color-scheme"><button data-color-scheme="claude" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Default</span></button><button data-color-scheme="default" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>White</span></button><button data-color-scheme="bumblebee" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Bumblebee</span></button><button data-color-scheme="emerald" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Emerald</span></button><button data-color-scheme="nord" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Nord</span></button><button data-color-scheme="sunset" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Sunset</span></button><button data-color-scheme="abyss" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Abyss</span></button><button data-color-scheme="dracula" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Dracula</span></button><button data-color-scheme="amethyst" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Amethyst</span></button><button data-color-scheme="slate" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Slate</span></button><button data-color-scheme="twitter" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Twitter</span></button></div>
</div>

        
        
<div class="relative">
  <button id="theme-toggle"
    class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95"
    data-dropdown-type="theme"
    aria-label="테마 변경"
    aria-expanded="false"
    aria-haspopup="true">
      
      
  <svg class="h-5 w-5 sun-icon hidden relative z-10"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="라이트">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />

</svg>
      
      
  <svg class="h-5 w-5 moon-icon hidden relative z-10"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="다크">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />

</svg>
      
      
  <svg class="h-5 w-5 system-icon hidden relative z-10"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="시스템">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />

</svg></button>

  
  <div id="theme-dropdown"
    class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out"
    data-dropdown-type="theme"><button data-theme="light" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
  <svg class="h-5 w-5 mr-3 h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="라이트">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />

</svg><span>라이트</span></button><button data-theme="dark" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
  <svg class="h-5 w-5 mr-3 h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="다크">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />

</svg><span>다크</span></button><button data-theme="system" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
  <svg class="h-5 w-5 mr-3 h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="시스템">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />

</svg><span>시스템</span></button></div>
</div>
      </div>
    </div>

    
    <div class="flex w-full items-center justify-between md:hidden">
      
      
<div class="relative">
  <button
    id="mobile-menu-toggle"
    class="dropdown-toggle border-border bg-background text-muted-foreground hover:bg-accent hover:text-foreground flex h-10 w-10 items-center justify-center rounded-lg border transition-colors duration-200"
    data-dropdown-type="mobile-menu"
    aria-label="메뉴"
    aria-expanded="false"
    aria-haspopup="true">
    
  <svg class="h-5 w-5"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="메뉴">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />

</svg>
  </button>

  
  <div
    id="mobile-menu"
    class="mobile-menu dropdown-menu border-border bg-popover/95 absolute top-12 left-0 z-[60] hidden w-80 max-w-[calc(100vw-2rem)] rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out md:hidden"
    data-dropdown-type="mobile-menu"
    role="menu"
    aria-labelledby="mobile-menu-toggle">
    <nav class="flex flex-col">
      
      
        
        
        
          
            
          
        
        
        <a
          href="/posts/"
          class="nav-link 
            text-muted-foreground hover:text-primary hover:bg-primary/10
           focus:ring-primary/20 relative flex items-center gap-3 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 ease-out hover:translate-x-1 focus:ring-2 focus:outline-none"
          role="menuitem"
          >
          
            
  <svg class="h-5 w-5"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="nav.posts">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />

</svg>
          
          <span
            >
              게시글
            </span
          >
        </a>
      
        
        
        
          
            
          
        
        
        <a
          href="/categories/"
          class="nav-link 
            text-muted-foreground hover:text-primary hover:bg-primary/10
           focus:ring-primary/20 relative flex items-center gap-3 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 ease-out hover:translate-x-1 focus:ring-2 focus:outline-none"
          role="menuitem"
          >
          
            
  <svg class="h-5 w-5"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="nav.categories">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />

</svg>
          
          <span
            >
              카테고리
            </span
          >
        </a>
      
        
        
        
          
            
          
        
        
        <a
          href="/tags/"
          class="nav-link 
            text-muted-foreground hover:text-primary hover:bg-primary/10
           focus:ring-primary/20 relative flex items-center gap-3 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 ease-out hover:translate-x-1 focus:ring-2 focus:outline-none"
          role="menuitem"
          >
          
            
  <svg class="h-5 w-5"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="nav.tags">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />

</svg>
          
          <span
            >
              태그
            </span
          >
        </a>
      
        
        
        
          
            
          
        
        
        <a
          href="/archives/"
          class="nav-link 
            text-muted-foreground hover:text-primary hover:bg-primary/10
           focus:ring-primary/20 relative flex items-center gap-3 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 ease-out hover:translate-x-1 focus:ring-2 focus:outline-none"
          role="menuitem"
          >
          
            
  <svg class="h-5 w-5"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="nav.archives">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" />

</svg>
          
          <span
            >
              아카이브
            </span
          >
        </a>
      
    </nav>
  </div>
</div>


      
      <div class="flex items-center space-x-2">
        
        
<div class="relative">
  <button id="language-toggle"
    class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95"
    data-dropdown-type="language"
    aria-label="언어 변경"
    aria-expanded="false"
    aria-haspopup="true">
      
  <svg class="h-5 w-5 relative z-10"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="언어 변경">
	<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 8l6 6m-7 0l6-6l2-3M2 5h12M7 2h1m14 20l-5-10l-5 10m2-4h6" />
</svg></button>

  
  <div id="language-dropdown"
    class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out"
    data-dropdown-type="language"
    role="menu"
    aria-labelledby="language-toggle"><a href="/ko/" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none" role="menuitem" aria-current="true"><span class="font-medium">한국어</span></a><a href="/en/" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none" role="menuitem"><span class="font-medium">English</span></a></div>
</div>

        
        
<div class="relative">
  <button id="color-scheme-toggle"
    class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95"
    data-dropdown-type="color-scheme"
    aria-label="테마 변경"
    aria-expanded="false"
    aria-haspopup="true">
      
  <svg class="h-5 w-5 relative z-10"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="테마 변경">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v6a2 2 0 002 2h4a2 2 0 002-2V5z" />

</svg></button>

  
  <div id="color-scheme-dropdown"
    class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-44 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out"
    data-dropdown-type="color-scheme"><button data-color-scheme="claude" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Default</span></button><button data-color-scheme="default" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>White</span></button><button data-color-scheme="bumblebee" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Bumblebee</span></button><button data-color-scheme="emerald" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Emerald</span></button><button data-color-scheme="nord" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Nord</span></button><button data-color-scheme="sunset" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Sunset</span></button><button data-color-scheme="abyss" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Abyss</span></button><button data-color-scheme="dracula" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Dracula</span></button><button data-color-scheme="amethyst" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Amethyst</span></button><button data-color-scheme="slate" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Slate</span></button><button data-color-scheme="twitter" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Twitter</span></button></div>
</div>

        
        
<div class="relative">
  <button id="theme-toggle"
    class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95"
    data-dropdown-type="theme"
    aria-label="테마 변경"
    aria-expanded="false"
    aria-haspopup="true">
      
      
  <svg class="h-5 w-5 sun-icon hidden relative z-10"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="라이트">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />

</svg>
      
      
  <svg class="h-5 w-5 moon-icon hidden relative z-10"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="다크">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />

</svg>
      
      
  <svg class="h-5 w-5 system-icon hidden relative z-10"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="시스템">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />

</svg></button>

  
  <div id="theme-dropdown"
    class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out"
    data-dropdown-type="theme"><button data-theme="light" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
  <svg class="h-5 w-5 mr-3 h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="라이트">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />

</svg><span>라이트</span></button><button data-theme="dark" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
  <svg class="h-5 w-5 mr-3 h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="다크">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />

</svg><span>다크</span></button><button data-theme="system" class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
  <svg class="h-5 w-5 mr-3 h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="시스템">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />

</svg><span>시스템</span></button></div>
</div>
      </div>
    </div>
  </div>
</header>


    <main class="mx-auto max-w-4xl px-4 py-6">
      
  
  <nav
  class="breadcrumb mb-4 md:mb-6 py-1"
  aria-label="경로">
  <ol class="text-muted-foreground flex items-center space-x-1 md:space-x-2 text-sm overflow-x-auto whitespace-nowrap scrollbar-hide py-1">
    
    <li class="flex-shrink-0">
      <a
        href="/"
        class="text-muted-foreground hover:text-primary hover:bg-primary/10 flex items-center gap-0.5 md:gap-1 rounded-lg px-1 md:px-3 py-0.5 md:py-1.5 transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-[1.02]">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="홈">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m3 12 2-2m0 0 7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />

</svg>
        <span class="max-w-[4rem] md:max-w-none truncate">홈</span>
      </a>
    </li>

    
    
      <li class="flex items-center gap-1 md:gap-2 min-w-0">
        <span class="text-muted-foreground/50 flex-shrink-0"
          >
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
</svg>
        </span>

        
          
          <div class="flex items-center gap-1 md:gap-2 min-w-0">
            
              
              <a
                href="/posts"
                class="text-muted-foreground hover:text-primary hover:bg-primary/10 flex items-center gap-0.5 md:gap-1 rounded-lg px-1 md:px-3 py-0.5 md:py-1.5 transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-[1.02] flex-shrink-0">
                
                  
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />

</svg>
                  <span class="max-w-[3rem] md:max-w-none truncate">게시글</span>
                
              </a>
              <span class="text-muted-foreground/50 flex-shrink-0"
                >
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
</svg></span
              >
            
            
            <span class="text-foreground flex items-center gap-0.5 md:gap-1 font-medium min-w-0">
              
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
</svg>
              <span class="max-w-[8rem] md:max-w-[16rem] lg:max-w-none truncate">A Systematic Study of Cross-Layer KV Sharing for Efficient LLM Inference</span>
            </span>
          </div>
        
      </li>
    

  </ol>
</nav>



  


  
  <header class="mb-8">
    


<div class="post-meta">
  
  <h1 class="text-foreground mb-6 text-3xl leading-tight font-bold md:text-4xl">
    A Systematic Study of Cross-Layer KV Sharing for Efficient LLM Inference
  </h1>

  
  


  
  <div class="bg-card border-border flex flex-col gap-4 rounded-xl border p-6">
    
    <div
      class="text-muted-foreground flex flex-wrap items-center gap-4 text-sm">
      
      <div class="flex items-center gap-2">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="작성일"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
</svg>
        <time datetime="2024-11-19">
          2024년 11월 19일
        </time>
      </div>

      
      


      
      
        <div class="flex items-center gap-2">
          
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="읽는 시간"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
</svg>
          <span
            >19 분</span
          >
        </div>
      


      
      
        <div class="flex items-center gap-2">
          
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="단어 수"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />
</svg>
          <span>9260 단어</span>
        </div>
      

    </div>

    
    
      <div class="flex flex-wrap items-center gap-4">
        
        
          <div class="flex items-center gap-2">
            
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="카테고리"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
</svg>
            <span class="text-muted-foreground mr-2 text-sm"
              >카테고리:</span
            >
            <div class="flex flex-wrap gap-2">
              
                <a
                  href="/categories/paper-review/"
                  class="bg-primary/10 text-primary hover:bg-primary/20 focus:ring-primary/20 inline-flex items-center rounded-full px-3 py-1 text-sm font-medium transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-105 hover:shadow-md focus:ring-2 focus:outline-none">
                  paper-review
                </a>
              
                <a
                  href="/categories/with-gpt/"
                  class="bg-primary/10 text-primary hover:bg-primary/20 focus:ring-primary/20 inline-flex items-center rounded-full px-3 py-1 text-sm font-medium transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-105 hover:shadow-md focus:ring-2 focus:outline-none">
                  with-gpt
                </a>
              
            </div>
          </div>
        


        
        

      </div>
    


    
    

  </div>
</div>

  </header>

  
  <article class="prose prose-neutral dark:prose-invert mb-12 max-w-none">
    <p><a href="https://arxiv.org/abs/2410.14442">논문 링크</a></p>
<h1 id="q--이-논문을-아주-자세하게-읽고-논문의-강점과-독창적인-지점을-설명해주고-핵심-알고리즘을-예시-입력을-들어서-전체적인-과정을-설명해줘-추가적으로-논문의-한계점에-대해서도-알려줘">Q : 이 논문을 아주 자세하게 읽고 논문의 강점과 독창적인 지점을 설명해주고 핵심 알고리즘을 예시 입력을 들어서 전체적인 과정을 설명해줘 추가적으로 논문의 한계점에 대해서도 알려줘</h1>
<h3 id="논문-분석-a-systematic-study-of-cross-layer-kv-sharing-for-efficient-llm-inference">논문 분석: &ldquo;A Systematic Study of Cross-Layer KV Sharing for Efficient LLM Inference&rdquo;</h3>
<h4 id="1-논문의-강점과-독창성">1. <strong>논문의 강점과 독창성</strong></h4>
<ul>
<li>
<p><strong>강점</strong></p>
<ul>
<li><strong>통합적 접근</strong>: 기존 다양한 크로스 레이어 키-값(KV) 공유 방식을 하나의 통합된 프레임워크로 설명하며, 이들의 성능과 효율성을 체계적으로 비교.</li>
<li><strong>효율성 최적화</strong>: 실험적으로 메모리 사용량을 줄이면서도 성능 저하를 최소화하는 새로운 KV 공유 설정을 제안.</li>
<li><strong>실용성</strong>: 다양한 프레임워크 설정이 실제 사용 사례에 맞게 최적화될 수 있도록 분석. (예: 긴 프롬프트, 메모리 제약)</li>
<li><strong>결과의 일반화 가능성</strong>: 실험 범위를 넓혀 다양한 모델 크기(110M, 1.1B) 및 데이터 크기(100B 토큰)에서 성능 평가.</li>
</ul>
</li>
<li>
<p><strong>독창적인 지점</strong></p>
<ul>
<li><strong>새로운 프레임워크 제안</strong>: 기존 연구(LCKV, YOCO, CLA) 외에도 새로운 구성(예: lasagna-top, middle)을 포함하여 확장된 설정 제공.</li>
<li><strong>새로운 실험적 통찰</strong>: 기존 방식이 프롬프트 길이에 따라 성능과 속도에 어떤 영향을 미치는지 상세히 분석.</li>
</ul>
</li>
</ul>
<hr>
<h4 id="2-핵심-알고리즘-및-예시">2. <strong>핵심 알고리즘 및 예시</strong></h4>
<h5 id="핵심-알고리즘-크로스-레이어-kv-공유-프레임워크"><strong>핵심 알고리즘: 크로스 레이어 KV 공유 프레임워크</strong></h5>
<ul>
<li><strong>입력</strong>:
<ul>
<li>Transformer 레이어 ( L )개.</li>
<li>KV를 계산할 레이어 인덱스 ( kv(i) ).</li>
</ul>
</li>
<li><strong>출력</strong>:
<ul>
<li>선택된 레이어에서만 KV 계산, 나머지 레이어는 KV 공유.</li>
</ul>
</li>
<li><strong>구성 방법</strong>:
<ul>
<li><strong>레이어 분할</strong>: Pizza, Sandwich, Lasagna.</li>
<li><strong>KV 타겟 설정</strong>: Bottom, Top, Middle.</li>
</ul>
</li>
</ul>
<h5 id="과정-설명-예시-입력-포함"><strong>과정 설명 (예시 입력 포함)</strong></h5>
<ul>
<li><strong>입력</strong>: Transformer 모델 (L=9 레이어), Sandwich-Middle 설정, KV 레이어 수 = 3.</li>
<li><strong>단계</strong>:
<ol>
<li><strong>KV 레이어 선택</strong>: 레이어 1, 5, 9이 KV를 계산.</li>
<li><strong>KV 공유</strong>:
<ul>
<li>레이어 2~4는 레이어 1의 KV를 사용.</li>
<li>레이어 6~8은 레이어 5의 KV를 사용.</li>
</ul>
</li>
<li><strong>추론 단계</strong>:
<ul>
<li>각 레이어에서 KV 접근 방식을 기반으로 attention 계산.</li>
</ul>
</li>
<li><strong>성능 최적화</strong>:
<ul>
<li>( kv(i) \neq i )인 레이어는 ( W_K, W_V ) 매개변수를 제외하여 모델 크기 감소.</li>
</ul>
</li>
</ol>
</li>
</ul>
<hr>
<h4 id="3-논문의-한계점">3. <strong>논문의 한계점</strong></h4>
<ul>
<li><strong>제한된 실험 범위</strong>:
<ul>
<li>대규모 모델(1.1B 이상의 매개변수)이나 더욱 큰 데이터셋에서 실험 부족.</li>
<li>실험은 특정 GPU 환경(RTX 3090, A100)에서만 수행, 하드웨어 일반화 부족.</li>
</ul>
</li>
<li><strong>추론 지연</strong>:
<ul>
<li>일부 설정(Pizza-Top, Sandwich-Middle)은 긴 프롬프트에서 추론 속도가 저하.</li>
</ul>
</li>
<li><strong>훈련 비용</strong>:
<ul>
<li>일부 설정(특히 Top, Middle)은 훈련 시 추가적인 순차적 종속성을 발생시켜 비용 상승.</li>
</ul>
</li>
<li><strong>응용 범위의 불확실성</strong>:
<ul>
<li>특정 응용(예: 초긴 문장 생성, 실시간 처리)에 대한 유용성 검증 부족.</li>
</ul>
</li>
</ul>
<hr>
<h4 id="4-결론">4. <strong>결론</strong></h4>
<p>이 논문은 LLM 추론의 효율성을 높이기 위한 새로운 통합 프레임워크를 제안하며, 크로스 레이어 KV 공유 방식의 실질적 성능과 한계를 상세히 분석합니다. 하지만, 훈련 비용 증가와 대규모 모델 실험 부족이 여전히 과제로 남아 있습니다.</p>
<h1 id="q--이-논문에서-사용하는-방법을-학습하기-위하여-어떤-데이터셋이-필요할까-그리고-어떻게-학습을-진행하면-될지-예시를-들어서-아주-자세하게-설명해줘">Q : 이 논문에서 사용하는 방법을 학습하기 위하여 어떤 데이터셋이 필요할까? 그리고 어떻게 학습을 진행하면 될지 예시를 들어서 아주 자세하게 설명해줘</h1>
<h3 id="논문에서-사용하는-방법을-학습하기-위한-데이터셋-및-학습-과정"><strong>논문에서 사용하는 방법을 학습하기 위한 데이터셋 및 학습 과정</strong></h3>
<hr>
<h4 id="1-필요한-데이터셋"><strong>1. 필요한 데이터셋</strong></h4>
<p>논문에서 수행된 실험은 두 가지 주요 데이터셋에서 이루어졌습니다:</p>
<ol>
<li>
<p><strong>MiniPile Dataset</strong>:</p>
<ul>
<li><strong>규모</strong>: 약 1.7B 토큰.</li>
<li><strong>특징</strong>: 다양한 언어적 표현이 포함된 작은 규모의 데이터셋.</li>
<li><strong>용도</strong>: 작은 모델(110M) 및 초기 검증 단계 학습.</li>
<li><strong>적합성</strong>: 빠른 실험과 다양한 설정 테스트에 유용.</li>
</ul>
</li>
<li>
<p><strong>SlimPajama Dataset</strong>:</p>
<ul>
<li><strong>규모</strong>: 약 100B 토큰.</li>
<li><strong>특징</strong>: 다양한 인터넷 텍스트, 논문, 문서 기반의 대규모 데이터셋.</li>
<li><strong>용도</strong>: 더 큰 모델(1.1B 이상) 및 최종 성능 평가를 위한 학습.</li>
<li><strong>적합성</strong>: LLM 학습에 적합하며, 학습 후 일반화 성능 평가에 유리.</li>
</ul>
</li>
</ol>
<hr>
<h4 id="2-학습-준비"><strong>2. 학습 준비</strong></h4>
<p>학습 전 필요한 구성 요소:</p>
<ol>
<li>
<p><strong>모델 아키텍처 정의</strong>:</p>
<ul>
<li><strong>예시 모델</strong>: Transformer 기반 (Llama 또는 유사한 구조).</li>
<li><strong>레이어 수</strong>: 12 (110M) 또는 22 (1.1B).</li>
<li><strong>KV 공유 설정</strong>:
<ul>
<li>Partitioning 방식(Pizza, Sandwich, Lasagna).</li>
<li>Target Layer 위치(Bottom, Top, Middle).</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>훈련 설정</strong>:</p>
<ul>
<li><strong>최대 시퀀스 길이</strong>: 1024 (110M), 2048 (1.1B).</li>
<li><strong>최적화 알고리즘</strong>: AdamW.</li>
<li><strong>학습률</strong>: 초기값 0.0004~0.000675 (Cosine 스케줄링 사용).</li>
<li><strong>Warmup 단계</strong>: 전체 스텝의 약 1.5%.</li>
<li><strong>배치 크기</strong>:
<ul>
<li>32K 토큰(작은 모델, MiniPile).</li>
<li>2M 토큰(큰 모델, SlimPajama).</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>하드웨어</strong>:</p>
<ul>
<li><strong>GPU</strong>: 최소 RTX 3090(단일 GPU) 또는 A100(다중 GPU 환경).</li>
</ul>
</li>
</ol>
<hr>
<h4 id="3-학습-과정"><strong>3. 학습 과정</strong></h4>
<h5 id="a-데이터-준비"><strong>(A) 데이터 준비</strong></h5>
<ol>
<li><strong>데이터 전처리</strong>:
<ul>
<li>텍스트를 토큰화하여 LLM에서 처리 가능한 입력 형식으로 변환.</li>
<li>토큰 길이를 최대 시퀀스 길이로 자르거나 패딩 처리.</li>
</ul>
</li>
<li><strong>데이터 배치</strong>:
<ul>
<li>배치를 구성하여 GPU 메모리를 최적 활용.</li>
</ul>
</li>
</ol>
<h5 id="b-학습-단계"><strong>(B) 학습 단계</strong></h5>
<ol>
<li>
<p><strong>초기화</strong>:</p>
<ul>
<li>모델 파라미터를 무작위로 초기화하거나, 사전 학습된 가중치로 초기화.</li>
</ul>
</li>
<li>
<p><strong>훈련 루프</strong>:</p>
<ul>
<li><strong>Forward Pass</strong>:
<ul>
<li>각 레이어에서 크로스 레이어 KV 공유 설정에 따라 attention 계산.</li>
<li>( kv(i) \neq i )인 레이어는 target layer의 KV 사용.</li>
</ul>
</li>
<li><strong>Loss 계산</strong>:
<ul>
<li>예측된 토큰 확률과 실제 정답 토큰 간의 Cross-Entropy Loss 계산.</li>
</ul>
</li>
<li><strong>Backward Pass</strong>:
<ul>
<li>Loss를 기반으로 Gradient 계산.</li>
</ul>
</li>
<li><strong>파라미터 업데이트</strong>:
<ul>
<li>AdamW를 이용하여 파라미터 최적화.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>추가적인 고려</strong>:</p>
<ul>
<li><strong>Top/Middle 설정</strong>: Sequential Dependency로 인해 Iterative Training 필요.
<ul>
<li>각 토큰의 Attention 계산에 필요한 KV가 다른 레이어에서 생성.</li>
<li>Iterative Pass를 통해 Backpropagation 수행.</li>
</ul>
</li>
<li><strong>Bottom 설정</strong>: 표준 Transformer와 동일하게 병렬 학습 가능.</li>
</ul>
</li>
</ol>
<h5 id="c-검증"><strong>(C) 검증</strong></h5>
<ul>
<li><strong>Perplexity 측정</strong>: 학습 중 Validation Set에 대한 성능 평가.</li>
<li><strong>Zero-Shot 평가</strong>: HellaSwag, BoolQ, OpenBookQA 등의 태스크에서 정확도 측정.</li>
</ul>
<hr>
<h4 id="4-예시-11b-모델을-sandwich-middle로-학습"><strong>4. 예시: 1.1B 모델을 Sandwich-Middle로 학습</strong></h4>
<ol>
<li>
<p><strong>설정</strong>:</p>
<ul>
<li>데이터: SlimPajama Dataset (100B 토큰).</li>
<li>KV 레이어 수: 7 (전체 레이어 22개 중).</li>
<li>Sandwich-Middle:
<ul>
<li>레이어 1, 8, 22에서 KV 계산.</li>
<li>나머지 레이어는 상위 레이어의 KV를 공유.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>훈련 루프</strong>:</p>
<ul>
<li><strong>1~7 레이어</strong>:
<ul>
<li>레이어 1의 KV를 사용하여 Attention 계산.</li>
</ul>
</li>
<li><strong>8~21 레이어</strong>:
<ul>
<li>레이어 8의 KV를 사용하여 Attention 계산.</li>
</ul>
</li>
<li><strong>22 레이어</strong>:
<ul>
<li>자체 KV 사용.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>출력</strong>:</p>
<ul>
<li>Perplexity: 학습 초기에 약 15~17, 이후 약 10 이하로 감소.</li>
<li>Downstream Task 성능: HellaSwag 정확도 44~45%, BoolQ 정확도 약 60%.</li>
</ul>
</li>
</ol>
<hr>
<h4 id="5-최적화-및-학습-고려-사항"><strong>5. 최적화 및 학습 고려 사항</strong></h4>
<ul>
<li><strong>효율성 극대화</strong>:
<ul>
<li>KV 레이어 수 조정: 메모리와 성능 간 트레이드오프 최적화.</li>
<li>FlashAttention 등의 커널 최적화 사용.</li>
</ul>
</li>
<li><strong>훈련 시간 단축</strong>:
<ul>
<li>Iterative Training 구간 최소화.</li>
<li>Batch 크기와 GPU 활용도 최적화.</li>
</ul>
</li>
</ul>
<p>위 과정은 논문에서 제안된 모든 설정을 유연하게 실험하면서 학습에 활용될 수 있습니다.</p>
<h1 id="q--이-논문에서-제시한-결과를-자세하게-보고-다른-방법론에-비하여-특출난-점과-논문에서-제기하는-어떠한-방법이-이러한-결과를-도출하게-되었는지-논문에서-제시하는-이유와-너의-생각을-알려줘">Q : 이 논문에서 제시한 결과를 자세하게 보고 다른 방법론에 비하여 특출난 점과 논문에서 제기하는 어떠한 방법이 이러한 결과를 도출하게 되었는지 논문에서 제시하는 이유와 너의 생각을 알려줘</h1>
<h3 id="논문-결과-분석-및-독창성"><strong>논문 결과 분석 및 독창성</strong></h3>
<hr>
<h4 id="1-논문에서-제시한-주요-결과"><strong>1. 논문에서 제시한 주요 결과</strong></h4>
<ol>
<li>
<p><strong>효율성 측면</strong>:</p>
<ul>
<li>KV 캐시 크기를 <strong>2배 줄이면서도 기존 Transformer와 유사한 성능</strong>을 유지.</li>
<li>Prompt가 짧을 때(5+2043 토큰), 대부분의 설정이 <strong>표준 Transformer보다 높은 Throughput</strong> 달성.</li>
<li>Prompt가 길어질 경우(512+1024 토큰), <strong>Bottom KV 설정</strong>이 속도 면에서 더 우수.</li>
</ul>
</li>
<li>
<p><strong>성능 측면</strong>:</p>
<ul>
<li>KV 레이어를 절반으로 줄여도 대부분의 설정에서 Perplexity가 기존 Transformer와 유사.</li>
<li>Pizza-Bottom, Lasagna-Bottom 설정은 효율성에서 두드러지며, Sandwich-Middle 설정은 긴 Prompt에서도 안정적인 성능 유지.</li>
</ul>
</li>
<li>
<p><strong>추론 속도와 메모리 소비의 균형</strong>:</p>
<ul>
<li>긴 Prompt 처리에서는 <strong>Bottom 위치에서의 KV 공유</strong>가 더 높은 Throughput 제공.</li>
<li>긴 시퀀스를 생성할 때는 Sandwich-Middle 설정이 성능 유지와 속도의 균형을 제공.</li>
</ul>
</li>
</ol>
<hr>
<h4 id="2-다른-방법론과-비교한-특출난-점"><strong>2. 다른 방법론과 비교한 특출난 점</strong></h4>
<ol>
<li>
<p><strong>LCKV</strong> (Layer-Condensed KV Cache):</p>
<ul>
<li>상위 레이어에서만 KV를 계산하여 하위 레이어의 메모리 사용량을 제거.</li>
<li>Prompt가 길어질수록 성능 저하가 두드러지는 한계.</li>
</ul>
</li>
<li>
<p><strong>YOCO</strong> (You Only Cache Once):</p>
<ul>
<li>하위 레이어에서 <strong>효율적인 Attention</strong>을 적용하여 KV 크기를 줄임.</li>
<li>Prompt 길이에 따른 Throughput 감소가 상대적으로 적음.</li>
</ul>
</li>
<li>
<p><strong>CLA</strong> (Cross-Layer Attention):</p>
<ul>
<li>그룹화된 레이어에서 하위 레이어의 KV를 공유.</li>
<li>그룹 내 모든 레이어가 동일한 KV를 사용하여 메모리 최적화.</li>
<li>특정 설정(Lasagna-Bottom)은 높은 Perplexity를 기록.</li>
</ul>
</li>
</ol>
<p><strong>특출난 점</strong>:</p>
<ul>
<li>
<p>이 논문은 위 방법론의 장점을 통합하고, 이를 확장한 <strong>9가지 설정</strong>을 제안:</p>
<ul>
<li>Pizza, Sandwich, Lasagna 등의 다양한 레이어 분할 방식.</li>
<li>Bottom, Top, Middle 타겟 레이어 위치 조합.</li>
</ul>
</li>
<li>
<p>특정 응용에 따라 <strong>Throughput과 성능 간 최적 트레이드오프를 선택</strong>할 수 있는 유연성을 제공.</p>
</li>
</ul>
<hr>
<h4 id="3-논문에서-제시하는-이유와-기여"><strong>3. 논문에서 제시하는 이유와 기여</strong></h4>
<ul>
<li>
<p><strong>성능 저하를 최소화하는 이유</strong>:</p>
<ul>
<li>하위 레이어에서 상위 레이어의 KV를 사용할 때, Transformer 구조의 Attention 기초가 보존됨.</li>
<li>Iterative Training을 통해 KV 간 종속성을 학습하도록 개선.</li>
</ul>
</li>
<li>
<p><strong>Throughput 향상 이유</strong>:</p>
<ul>
<li>일부 레이어에서만 KV를 계산해 <strong>메모리 소비량</strong> 감소.</li>
<li>병렬 처리 가능성 증가.</li>
</ul>
</li>
<li>
<p><strong>긴 Prompt에서 Bottom 설정이 유리한 이유</strong>:</p>
<ul>
<li>Prompt가 길어질수록 Iterative Training이 더 큰 오버헤드를 초래.</li>
<li>Bottom 설정에서는 병렬 추론이 가능해 높은 속도 유지.</li>
</ul>
</li>
</ul>
<hr>
<h4 id="4-나의-생각과-추가적인-통찰"><strong>4. 나의 생각과 추가적인 통찰</strong></h4>
<ol>
<li>
<p><strong>왜 이 방법이 효과적인가?</strong></p>
<ul>
<li>Transformer의 기본 Attention 메커니즘은 상위 레이어의 출력이 하위 레이어의 입력을 점진적으로 강화.</li>
<li>특정 레이어의 KV를 공유하면서도 각 레이어의 Query 특성을 보존하기 때문에 성능 저하를 최소화.</li>
</ul>
</li>
<li>
<p><strong>추론 속도와 메모리 최적화의 트레이드오프</strong>:</p>
<ul>
<li>LLM에서 가장 중요한 요소는 <strong>메모리 사용량 최적화</strong>와 <strong>실시간 성능</strong> 간 균형.</li>
<li>Bottom, Lasagna-Bottom 설정이 메모리 소비를 줄이는 동시에 속도 향상을 제공, 실제 응용에서 유리.</li>
</ul>
</li>
<li>
<p><strong>한계와 보완 방향</strong>:</p>
<ul>
<li>긴 Prompt에서 Top/Middle 설정의 추론 속도 저하를 해결하기 위해 <strong>Dynamic KV Allocation</strong> 같은 방법론 추가 고려.</li>
<li>다양한 모델 크기(10B 이상)에서 실험하여 더 큰 모델의 추론 성능 평가 필요.</li>
</ul>
</li>
</ol>
<hr>
<h4 id="5-결론"><strong>5. 결론</strong></h4>
<p>이 논문은 다양한 크로스 레이어 KV 공유 방식을 통합적으로 비교하면서, 효율성과 성능 면에서 균형을 이루는 설정을 제시합니다. 특히, Lasagna-Bottom과 Sandwich-Middle 설정은 추론 속도와 성능의 트레이드오프를 성공적으로 조율했으며, 이는 대규모 LLM 응용에 실질적인 기여를 할 수 있습니다.</p>
<h1 id="q--이-논문에서-제시된-방법을-실제로-사용하려면-기존-방법에서-어떠한-구현이-추가적으로-필요하고-이러한-구현에-소모되는-공수-및-연산에-필요한-컴퓨팅-자원의-크기에-대해서-계산해줄-수-있겠니">Q : 이 논문에서 제시된 방법을 실제로 사용하려면 기존 방법에서 어떠한 구현이 추가적으로 필요하고 이러한 구현에 소모되는 공수 및 연산에 필요한 컴퓨팅 자원의 크기에 대해서 계산해줄 수 있겠니?</h1>
<h3 id="논문의-방법-구현을-위한-추가적인-요구사항-및-자원-계산"><strong>논문의 방법 구현을 위한 추가적인 요구사항 및 자원 계산</strong></h3>
<hr>
<h4 id="1-기존-transformer에서의-추가-구현-요구사항"><strong>1. 기존 Transformer에서의 추가 구현 요구사항</strong></h4>
<p>논문에서 제안된 크로스 레이어 KV 공유 방법을 구현하려면 다음과 같은 작업이 필요합니다:</p>
<hr>
<h5 id="a-구조-변경"><strong>(A) 구조 변경</strong></h5>
<ol>
<li>
<p><strong>레이어 분할 및 타겟 KV 설정</strong>:</p>
<ul>
<li>각 레이어의 KV를 계산할지, 다른 레이어의 KV를 사용할지 결정해야 함.</li>
<li>새로운 매핑 ( kv(i) ) 정의:
<ul>
<li>예: ( kv(i) = i ) (기존 Transformer) vs ( kv(i) \neq i ) (공유 설정).</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>KV 메모리 관리</strong>:</p>
<ul>
<li>KV가 계산된 레이어에서 다른 레이어로 공유될 수 있도록 메모리 캐싱 구현.</li>
<li>GPU 메모리에서 각 레이어별 KV를 효율적으로 저장 및 호출.</li>
</ul>
</li>
</ol>
<hr>
<h5 id="b-학습-과정-변경"><strong>(B) 학습 과정 변경</strong></h5>
<ol>
<li>
<p><strong>Iterative Training</strong>:</p>
<ul>
<li><strong>Top/Middle 설정</strong>: Sequential Dependency를 해결하기 위해 Iterative Training 필요.
<ul>
<li>( kv(i) )의 KV가 사용되기 전에 하위 레이어의 Attention 계산이 필요.</li>
</ul>
</li>
<li>학습 과정:
<ol>
<li>이전 Iteration에서 계산된 KV를 참조.</li>
<li>Iteration마다 Backpropagation 수행.</li>
</ol>
</li>
</ul>
</li>
<li>
<p><strong>Loss Backpropagation 제한</strong>:</p>
<ul>
<li>Iterative Training에서 메모리와 연산 오버헤드를 줄이기 위해 마지막 몇 Iteration만 Loss 계산.</li>
</ul>
</li>
</ol>
<hr>
<h5 id="c-추론-과정-변경"><strong>(C) 추론 과정 변경</strong></h5>
<ol>
<li>
<p><strong>Prefilling 단계 최적화</strong>:</p>
<ul>
<li>Prompt를 빠르게 인코딩하기 위해 Iterative Training과 유사한 방식으로 KV 계산.</li>
<li>Bottom 설정에서는 기존 Transformer와 동일한 병렬 추론 가능.</li>
</ul>
</li>
<li>
<p><strong>KV 조회 로직 추가</strong>:</p>
<ul>
<li>각 레이어가 다른 레이어의 KV를 사용하는 경우 이를 효율적으로 읽어들이는 메커니즘 필요.</li>
</ul>
</li>
</ol>
<hr>
<h4 id="2-추가-구현에-필요한-컴퓨팅-리소스"><strong>2. 추가 구현에 필요한 컴퓨팅 리소스</strong></h4>
<hr>
<h5 id="a-연산량-분석"><strong>(A) 연산량 분석</strong></h5>
<ol>
<li>
<p><strong>KV 계산 감소</strong>:</p>
<ul>
<li>기존 Transformer에서는 모든 레이어 ( L )에 대해 KV 계산.</li>
<li>논문 방식에서는 ( l )개의 KV 레이어만 계산 (( l &lt; L )).</li>
<li><strong>계산량 감소</strong>:
<ul>
<li>기존: ( O(L \cdot d^2) ) (여기서 ( d )는 히든 레이어 크기).</li>
<li>변경: ( O(l \cdot d^2 + (L-l) \cdot c \cdot d) ) (공유된 KV 접근 비용 ( c )).</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Iterative Training 추가 비용</strong>:</p>
<ul>
<li>Top/Middle 설정:
<ul>
<li>( m ) Iteration (( m )은 시퀀스 길이).</li>
<li>추가 연산: ( O(m \cdot d^2) ).</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Bottom 설정</strong>:</p>
<ul>
<li>Iterative Training 불필요 → 기존 Transformer와 동일한 연산량.</li>
</ul>
</li>
</ol>
<hr>
<h5 id="b-메모리-요구-사항"><strong>(B) 메모리 요구 사항</strong></h5>
<ol>
<li>
<p><strong>KV 메모리 감소</strong>:</p>
<ul>
<li>기존: 모든 레이어에서 ( O(L \cdot n \cdot d) ) (여기서 ( n )은 시퀀스 길이).</li>
<li>변경:
<ul>
<li>KV 레이어만 저장 → ( O(l \cdot n \cdot d) ).</li>
<li>( l )이 ( L )의 절반일 때, 메모리 사용량 약 <strong>50% 감소</strong>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>추가 메모리 요구</strong>:</p>
<ul>
<li>Iterative Training에서 각 Iteration의 Intermediate KV 저장 필요.</li>
<li>( m \cdot n \cdot d ) (Iteration 수에 비례).</li>
</ul>
</li>
</ol>
<hr>
<h5 id="c-gpu-사용량"><strong>(C) GPU 사용량</strong></h5>
<ol>
<li>
<p><strong>단일 GPU 환경</strong>:</p>
<ul>
<li>Bottom 설정에서는 기존 Transformer와 동일.</li>
<li>Top/Middle 설정에서는 Iterative Training으로 인해 추가 메모리 및 연산 요구 증가.
<ul>
<li>약 20~30% 추가 메모리 사용 예상.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>다중 GPU 환경</strong>:</p>
<ul>
<li>Iterative Training에서 KV 공유를 위해 GPU 간 통신 필요.</li>
<li>데이터 병렬 처리로 완화 가능.</li>
</ul>
</li>
</ol>
<hr>
<h4 id="3-구현에-소모되는-공수"><strong>3. 구현에 소모되는 공수</strong></h4>
<ol>
<li>
<p><strong>추가 로직 구현</strong>:</p>
<ul>
<li>레이어 분할 및 KV 공유 논리: <strong>2~3일</strong>.</li>
<li>Iterative Training 로직: <strong>1주</strong>.</li>
</ul>
</li>
<li>
<p><strong>모델 최적화</strong>:</p>
<ul>
<li>메모리 캐싱 및 효율적 GPU 사용: <strong>1~2주</strong>.</li>
</ul>
</li>
<li>
<p><strong>디버깅 및 검증</strong>:</p>
<ul>
<li>Iterative Training의 안정성 확인: <strong>1주</strong>.</li>
<li>학습 효율 및 성능 검증: <strong>2주</strong>.</li>
</ul>
</li>
</ol>
<hr>
<h4 id="4-추가-연산량-및-리소스-정리"><strong>4. 추가 연산량 및 리소스 정리</strong></h4>
<table>
  <thead>
      <tr>
          <th>항목</th>
          <th>기존 Transformer</th>
          <th>논문 방식 (Bottom 설정)</th>
          <th>논문 방식 (Top/Middle 설정)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>KV 계산 비용</td>
          <td>( O(L \cdot d^2) )</td>
          <td>( O(l \cdot d^2) )</td>
          <td>( O(l \cdot d^2 + m \cdot d^2) )</td>
      </tr>
      <tr>
          <td>메모리 사용량</td>
          <td>( O(L \cdot n \cdot d) )</td>
          <td>( O(l \cdot n \cdot d) )</td>
          <td>( O(l \cdot n \cdot d + m \cdot n \cdot d) )</td>
      </tr>
      <tr>
          <td>Iterative Training 필요</td>
          <td>없음</td>
          <td>없음</td>
          <td>있음</td>
      </tr>
      <tr>
          <td>GPU 메모리 증가율</td>
          <td>0%</td>
          <td>-50%</td>
          <td>+20~30%</td>
      </tr>
      <tr>
          <td>구현 공수</td>
          <td>기본 구현</td>
          <td>2~3주</td>
          <td>3~4주</td>
      </tr>
  </tbody>
</table>
<hr>
<h4 id="5-결론-1"><strong>5. 결론</strong></h4>
<ul>
<li><strong>Bottom 설정</strong>은 추가적인 구현과 연산량 증가가 거의 없어 실용적이며, 메모리 절감 효과가 큼.</li>
<li><strong>Top/Middle 설정</strong>은 Iterative Training 비용이 추가로 발생하지만, 긴 시퀀스에서의 성능 유지에 유리.</li>
<li>컴퓨팅 리소스의 증가폭은 제한적이며, GPU 메모리 효율화 및 KV 공유 최적화로 상쇄 가능.</li>
</ul>
<h1 id="q--이-논문의-입력데이터와-추론-과정에-대해서-예시를-들어-아주-자세하게-설명해-주겠니-추가적으로-모델아키텍처의-구성-및-모델을-구성하는-연산과-메모리-요구량-컴퓨팅-요구량-대해서도-설명해줘">Q : 이 논문의 입력데이터와 추론 과정에 대해서 예시를 들어 아주 자세하게 설명해 주겠니? 추가적으로 모델아키텍처의 구성 및 모델을 구성하는 연산과 메모리 요구량 컴퓨팅 요구량 대해서도 설명해줘</h1>
<h3 id="논문의-입력-데이터와-추론-과정-설명"><strong>논문의 입력 데이터와 추론 과정 설명</strong></h3>
<hr>
<h4 id="1-입력-데이터"><strong>1. 입력 데이터</strong></h4>
<ol>
<li>
<p><strong>입력 데이터 구성</strong></p>
<ul>
<li><strong>문장 또는 문서</strong>: 자연어 텍스트, 예를 들어, 아래와 같은 문장이 입력될 수 있음.
<div
  class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md">
  
  <div
    class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3">
    
    <div class="flex items-center gap-2">
      <div class="text-muted-foreground flex-shrink-0">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
</svg>
      </div>
      <span class="text-muted-foreground text-sm font-medium">
        PLAINTEXT
      </span>
    </div>

    
    <div class="flex items-center gap-2">
      <button
          class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
          data-code-id="code-0"
          data-default-state="expanded"
          data-collapsed="false"
          data-auto-collapse-lines="30"
          data-auto-collapse-height="400"
          data-collapsed-height="120"
          title="접기"
          aria-label="접기">
          <span class="collapse-icon">
            
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>
          </span>
          <span class="collapse-text hidden sm:inline"
            >접기</span
          >
        </button>
      <button
        class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
        data-code-id="code-0"
        title="복사"
        aria-label="복사">
        <span class="copy-icon">
          
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>
        </span>
        <span class="copy-text hidden sm:inline"
          >복사</span
        >
      </button>
    </div>
  </div>

  
  <div class="code-block-content relative" id="code-0">
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="ln">1</span><span class="cl">&#34;Large language models are revolutionizing natural language processing tasks.&#34;</span></span></code></pre></div>
    
    <div
      class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300">
      <div
        class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">
        클릭하여 더 보기
      </div>
    </div>
  </div>
</div>


<script>
(function() {
  const codeId = 'code-0';
  const copyBtn = document.querySelector('.copy-code-btn[data-code-id="' + codeId + '"]');
  const collapseBtn = document.querySelector('.collapse-code-btn[data-code-id="' + codeId + '"]');
  const codeContainer = document.getElementById(codeId);

  if (!codeContainer) return;

  
  if (copyBtn) {
    const copyIcon = copyBtn.querySelector('.copy-icon');
    const copyText = copyBtn.querySelector('.copy-text');

    copyBtn.addEventListener('click', async function() {
      try {
        
        let codeText = '';

        
        const codeTableCell = codeContainer.querySelector('.lntd:last-child code');
        if (codeTableCell) {
          codeText = codeTableCell.textContent || codeTableCell.innerText;
        } else {
          
          const codeElement = codeContainer.querySelector('code');
          if (codeElement) {
            
            const hasInlineLineNumbers = codeElement.querySelector('.ln');
            if (hasInlineLineNumbers) {
              
              const codeLines = codeElement.querySelectorAll('.cl');
              if (codeLines.length > 0) {
                codeText = Array.from(codeLines)
                  .map(line => {
                    const text = line.textContent || line.innerText;
                    
                    return text.replace(/\n+$/, '');
                  })
                  .join('\n')
                  .replace(/\n+$/, ''); 
              } else {
                
                const allText = codeElement.textContent || codeElement.innerText;
                codeText = allText.replace(/^\d+/gm, '').replace(/^\s+/gm, '');
              }
            } else {
              
              codeText = codeElement.textContent || codeElement.innerText;
            }
          } else {
            
            codeText = codeContainer.textContent || codeContainer.innerText;
          }
        }

        
        codeText = codeText.trim();

        
        await navigator.clipboard.writeText(codeText);

        
        copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M5 13l4 4L19 7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (copyText) {
          copyText.textContent = '복사됨';
        }
        copyBtn.classList.add('text-green-600');

        
        setTimeout(() => {
          copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\u0022 \/\u003e\n\u003c\/svg\u003e`;
          if (copyText) {
            copyText.textContent = '복사';
          }
          copyBtn.classList.remove('text-green-600');
        }, 2000);

      } catch (err) {
        console.error('复制失败:', err);

        
        const range = document.createRange();
        const codeElement = codeContainer.querySelector('code') || codeContainer;
        range.selectNodeContents(codeElement);
        const selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);

        
        if (copyText) {
          copyText.textContent = '선택됨';
        }

        setTimeout(() => {
          if (copyText) {
            copyText.textContent = '복사';
          }
          selection.removeAllRanges();
        }, 2000);
      }
    });
  }

  
  if (collapseBtn) {
    const collapseIcon = collapseBtn.querySelector('.collapse-icon');
    const collapseText = collapseBtn.querySelector('.collapse-text');
    const collapseOverlay = codeContainer.querySelector('.collapse-overlay');

    
    let codeElement = codeContainer.querySelector('pre.chroma');
    if (!codeElement) {
      codeElement = codeContainer.querySelector('pre');
    }

    const defaultState = collapseBtn.dataset.defaultState || 'expanded';
    const isCollapsedAttr = collapseBtn.dataset.collapsed === 'true';
    const autoCollapseLines = parseInt(collapseBtn.dataset.autoCollapseLines) || 30;
    const autoCollapseHeight = parseInt(collapseBtn.dataset.autoCollapseHeight) || 400;
    const collapsedHeight = parseInt(collapseBtn.dataset.collapsedHeight) || 120;

    let isCollapsed = false;

    
    function initCollapse() {
      
      const shouldCollapse = isCollapsedAttr ||
                           defaultState === 'collapsed' ||
                           shouldAutoCollapse();

      if (shouldCollapse) {
        setCollapsed(true, false); 
      }
    }

    function shouldAutoCollapse() {
      
      if (codeElement) {
        const lines = codeElement.querySelectorAll('.line, .cl');
        const height = codeElement.offsetHeight;
        return lines.length > autoCollapseLines || height > autoCollapseHeight;
      }

      
      const containerHeight = codeContainer.offsetHeight;
      if (containerHeight > autoCollapseHeight) {
        return true;
      }

      
      const textContent = codeContainer.textContent || codeContainer.innerText || '';
      const estimatedLines = textContent.split('\n').length;
      return estimatedLines > autoCollapseLines;
    }

    function setCollapsed(collapsed, animate = true) {
      if (!collapseOverlay) return;

      isCollapsed = collapsed;

      if (collapsed) {
        
        codeContainer.style.maxHeight = collapsedHeight + 'px';
        codeContainer.style.overflow = 'hidden';
        collapseOverlay.style.opacity = '1';
        collapseOverlay.style.pointerEvents = 'auto';

        
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M19 9l-7 7-7-7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (collapseText) {
          collapseText.textContent = '펼치기';
        }
        collapseBtn.title = '펼치기';

      } else {
        
        codeContainer.style.maxHeight = '';
        codeContainer.style.overflow = '';
        collapseOverlay.style.opacity = '0';
        collapseOverlay.style.pointerEvents = 'none';

        
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath fill=\u0022currentColor\u0022 d=\u0022M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z\u0022\/\u003e\u003c\/svg\u003e`;
        if (collapseText) {
          collapseText.textContent = '접기';
        }
        collapseBtn.title = '접기';
      }

      
      if (animate) {
        codeContainer.style.transition = 'max-height 0.3s ease-out';
        setTimeout(() => {
          codeContainer.style.transition = '';
        }, 300);
      }
    }

    function toggleCollapse() {
      setCollapsed(!isCollapsed, true);
    }

    
    collapseBtn.addEventListener('click', toggleCollapse);

    
    if (collapseOverlay) {
      collapseOverlay.addEventListener('click', () => {
        if (isCollapsed) {
          setCollapsed(false, true);
        }
      });
    }

    
    initCollapse();
  }
})();
</script>
</li>
<li><strong>토큰화</strong>:
<ul>
<li>입력 텍스트를 토큰화하여 시퀀스 ( X = [x_1, x_2, &hellip;, x_n] ) 생성.</li>
<li>각 토큰은 고유한 정수 인덱스로 매핑.</li>
</ul>
</li>
<li><strong>시퀀스 길이</strong>:
<ul>
<li>최대 시퀀스 길이는 논문에서 1024 (110M 모델) 또는 2048 (1.1B 모델)로 설정.</li>
</ul>
</li>
<li><strong>배치 처리</strong>:
<ul>
<li>병렬 처리를 위해 여러 샘플을 묶어 배치로 구성.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>특징</strong></p>
<ul>
<li><strong>Prompt 데이터</strong>: 모델의 초기 상태를 설정하는 입력.</li>
<li><strong>응답 데이터</strong>: 모델이 생성할 예상 시퀀스, 예를 들어, 질문-응답 태스크에서 답변 생성.</li>
</ul>
</li>
</ol>
<hr>
<h4 id="2-추론-과정-예시-포함"><strong>2. 추론 과정 (예시 포함)</strong></h4>
<ol>
<li>
<p><strong>입력 데이터 처리</strong>:</p>
<ul>
<li>예시 입력: &ldquo;The capital of France is Paris.&rdquo;</li>
<li>입력 토큰 시퀀스:
<div
  class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md">
  
  <div
    class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3">
    
    <div class="flex items-center gap-2">
      <div class="text-muted-foreground flex-shrink-0">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
</svg>
      </div>
      <span class="text-muted-foreground text-sm font-medium">
        PLAINTEXT
      </span>
    </div>

    
    <div class="flex items-center gap-2">
      <button
          class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
          data-code-id="code-1"
          data-default-state="expanded"
          data-collapsed="false"
          data-auto-collapse-lines="30"
          data-auto-collapse-height="400"
          data-collapsed-height="120"
          title="접기"
          aria-label="접기">
          <span class="collapse-icon">
            
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>
          </span>
          <span class="collapse-text hidden sm:inline"
            >접기</span
          >
        </button>
      <button
        class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none"
        data-code-id="code-1"
        title="복사"
        aria-label="복사">
        <span class="copy-icon">
          
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>
        </span>
        <span class="copy-text hidden sm:inline"
          >복사</span
        >
      </button>
    </div>
  </div>

  
  <div class="code-block-content relative" id="code-1">
    <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="ln">1</span><span class="cl">[101, 2054, 1037, 3007, 1997, 2605, 2003, 3000, 102]</span></span></code></pre></div>
    
    <div
      class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300">
      <div
        class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">
        클릭하여 더 보기
      </div>
    </div>
  </div>
</div>


<script>
(function() {
  const codeId = 'code-1';
  const copyBtn = document.querySelector('.copy-code-btn[data-code-id="' + codeId + '"]');
  const collapseBtn = document.querySelector('.collapse-code-btn[data-code-id="' + codeId + '"]');
  const codeContainer = document.getElementById(codeId);

  if (!codeContainer) return;

  
  if (copyBtn) {
    const copyIcon = copyBtn.querySelector('.copy-icon');
    const copyText = copyBtn.querySelector('.copy-text');

    copyBtn.addEventListener('click', async function() {
      try {
        
        let codeText = '';

        
        const codeTableCell = codeContainer.querySelector('.lntd:last-child code');
        if (codeTableCell) {
          codeText = codeTableCell.textContent || codeTableCell.innerText;
        } else {
          
          const codeElement = codeContainer.querySelector('code');
          if (codeElement) {
            
            const hasInlineLineNumbers = codeElement.querySelector('.ln');
            if (hasInlineLineNumbers) {
              
              const codeLines = codeElement.querySelectorAll('.cl');
              if (codeLines.length > 0) {
                codeText = Array.from(codeLines)
                  .map(line => {
                    const text = line.textContent || line.innerText;
                    
                    return text.replace(/\n+$/, '');
                  })
                  .join('\n')
                  .replace(/\n+$/, ''); 
              } else {
                
                const allText = codeElement.textContent || codeElement.innerText;
                codeText = allText.replace(/^\d+/gm, '').replace(/^\s+/gm, '');
              }
            } else {
              
              codeText = codeElement.textContent || codeElement.innerText;
            }
          } else {
            
            codeText = codeContainer.textContent || codeContainer.innerText;
          }
        }

        
        codeText = codeText.trim();

        
        await navigator.clipboard.writeText(codeText);

        
        copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M5 13l4 4L19 7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (copyText) {
          copyText.textContent = '복사됨';
        }
        copyBtn.classList.add('text-green-600');

        
        setTimeout(() => {
          copyIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\u0022 \/\u003e\n\u003c\/svg\u003e`;
          if (copyText) {
            copyText.textContent = '복사';
          }
          copyBtn.classList.remove('text-green-600');
        }, 2000);

      } catch (err) {
        console.error('复制失败:', err);

        
        const range = document.createRange();
        const codeElement = codeContainer.querySelector('code') || codeContainer;
        range.selectNodeContents(codeElement);
        const selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);

        
        if (copyText) {
          copyText.textContent = '선택됨';
        }

        setTimeout(() => {
          if (copyText) {
            copyText.textContent = '복사';
          }
          selection.removeAllRanges();
        }, 2000);
      }
    });
  }

  
  if (collapseBtn) {
    const collapseIcon = collapseBtn.querySelector('.collapse-icon');
    const collapseText = collapseBtn.querySelector('.collapse-text');
    const collapseOverlay = codeContainer.querySelector('.collapse-overlay');

    
    let codeElement = codeContainer.querySelector('pre.chroma');
    if (!codeElement) {
      codeElement = codeContainer.querySelector('pre');
    }

    const defaultState = collapseBtn.dataset.defaultState || 'expanded';
    const isCollapsedAttr = collapseBtn.dataset.collapsed === 'true';
    const autoCollapseLines = parseInt(collapseBtn.dataset.autoCollapseLines) || 30;
    const autoCollapseHeight = parseInt(collapseBtn.dataset.autoCollapseHeight) || 400;
    const collapsedHeight = parseInt(collapseBtn.dataset.collapsedHeight) || 120;

    let isCollapsed = false;

    
    function initCollapse() {
      
      const shouldCollapse = isCollapsedAttr ||
                           defaultState === 'collapsed' ||
                           shouldAutoCollapse();

      if (shouldCollapse) {
        setCollapsed(true, false); 
      }
    }

    function shouldAutoCollapse() {
      
      if (codeElement) {
        const lines = codeElement.querySelectorAll('.line, .cl');
        const height = codeElement.offsetHeight;
        return lines.length > autoCollapseLines || height > autoCollapseHeight;
      }

      
      const containerHeight = codeContainer.offsetHeight;
      if (containerHeight > autoCollapseHeight) {
        return true;
      }

      
      const textContent = codeContainer.textContent || codeContainer.innerText || '';
      const estimatedLines = textContent.split('\n').length;
      return estimatedLines > autoCollapseLines;
    }

    function setCollapsed(collapsed, animate = true) {
      if (!collapseOverlay) return;

      isCollapsed = collapsed;

      if (collapsed) {
        
        codeContainer.style.maxHeight = collapsedHeight + 'px';
        codeContainer.style.overflow = 'hidden';
        collapseOverlay.style.opacity = '1';
        collapseOverlay.style.pointerEvents = 'auto';

        
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath stroke-linecap=\u0022round\u0022 stroke-linejoin=\u0022round\u0022 stroke-width=\u00222\u0022 d=\u0022M19 9l-7 7-7-7\u0022 \/\u003e\n\u003c\/svg\u003e`;
        if (collapseText) {
          collapseText.textContent = '펼치기';
        }
        collapseBtn.title = '펼치기';

      } else {
        
        codeContainer.style.maxHeight = '';
        codeContainer.style.overflow = '';
        collapseOverlay.style.opacity = '0';
        collapseOverlay.style.pointerEvents = 'none';

        
        collapseIcon.innerHTML = `\n  \u003csvg class=\u0022h-3 w-3\u0022\n    fill=\u0022none\u0022\n    stroke=\u0022currentColor\u0022\n    viewBox=\u00220 0 24 24\u0022\u003e\u003cpath fill=\u0022currentColor\u0022 d=\u0022M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z\u0022\/\u003e\u003c\/svg\u003e`;
        if (collapseText) {
          collapseText.textContent = '접기';
        }
        collapseBtn.title = '접기';
      }

      
      if (animate) {
        codeContainer.style.transition = 'max-height 0.3s ease-out';
        setTimeout(() => {
          codeContainer.style.transition = '';
        }, 300);
      }
    }

    function toggleCollapse() {
      setCollapsed(!isCollapsed, true);
    }

    
    collapseBtn.addEventListener('click', toggleCollapse);

    
    if (collapseOverlay) {
      collapseOverlay.addEventListener('click', () => {
        if (isCollapsed) {
          setCollapsed(false, true);
        }
      });
    }

    
    initCollapse();
  }
})();
</script>
여기서 숫자는 단어의 임베딩을 나타냄.</li>
</ul>
</li>
<li>
<p><strong>레이어별 연산</strong>:</p>
<ul>
<li><strong>KV 공유 구성</strong>:
<ul>
<li>( kv(i) = i )일 때는 해당 레이어에서 자체 KV 계산.</li>
<li>( kv(i) \neq i )일 때는 다른 레이어의 KV를 참조.</li>
</ul>
</li>
<li>각 레이어에서의 연산:
<ul>
<li>Query (( Q )), Key (( K )), Value (( V )) 계산.</li>
<li>Attention 연산: ( \text{Attention}(Q, K, V) = \text{softmax}\left(\frac{QK^T}{\sqrt{d_k}}\right)V ).</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>추론 시 동작</strong>:</p>
<ul>
<li><strong>Prompt 인코딩</strong>:
<ul>
<li>Prompt 토큰 (( X_{\text{prompt}} ))의 KV 캐시를 계산.</li>
</ul>
</li>
<li><strong>생성 단계</strong>:
<ul>
<li>새로운 토큰을 생성할 때 이전 KV를 사용하여 연산 최적화.</li>
<li>예를 들어, &ldquo;Paris&quot;라는 단어를 생성한 후 다음 단어 예측 시, 이전 KV를 재활용하여 속도와 메모리 최적화.</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="3-모델-아키텍처-구성"><strong>3. 모델 아키텍처 구성</strong></h3>
<ol>
<li>
<p><strong>Transformer 구성 요소</strong>:</p>
<ul>
<li><strong>입력 임베딩</strong>:
<ul>
<li>토큰 인덱스를 고차원 벡터로 매핑 (( d )-차원).</li>
</ul>
</li>
<li><strong>레이어 개수</strong>:
<ul>
<li>작은 모델: 12 레이어 (110M 파라미터).</li>
<li>큰 모델: 22 레이어 (1.1B 파라미터).</li>
</ul>
</li>
<li><strong>Attention 헤드</strong>:
<ul>
<li>작은 모델: 12개.</li>
<li>큰 모델: 32개.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>KV 공유 설정</strong>:</p>
<ul>
<li>Pizza, Sandwich, Lasagna로 레이어를 분할.</li>
<li>타겟 레이어 위치를 Bottom, Top, Middle로 선택.</li>
</ul>
</li>
<li>
<p><strong>연산 구조</strong>:</p>
<ul>
<li>Query, Key, Value 계산:
( Q = XW_Q, , K = XW_K, , V = XW_V ),
( W_Q, W_K, W_V )는 각 레이어의 학습 가능한 가중치.</li>
<li>Attention:
( Z = \text{softmax}\left(\frac{QK^T}{\sqrt{d}}\right)V ).</li>
<li>KV 공유:
<ul>
<li>( kv(i) \neq i )인 경우, ( K )와 ( V )를 이전 레이어에서 참조.</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="4-연산-요구량-분석"><strong>4. 연산 요구량 분석</strong></h3>
<h4 id="a-연산량"><strong>(A) 연산량</strong></h4>
<ol>
<li>
<p><strong>기본 Attention 연산량</strong>:</p>
<ul>
<li>각 레이어에서:
( O(n \cdot d^2) ) (Query-Key-Value 연산).
( O(n^2 \cdot d) ) (Attention 연산).</li>
<li>( L )개의 레이어: ( O(L \cdot (n^2 \cdot d + n \cdot d^2)) ).</li>
</ul>
</li>
<li>
<p><strong>논문 방식의 연산량</strong>:</p>
<ul>
<li>( l )개의 KV 레이어만 계산:
( O(l \cdot (n^2 \cdot d + n \cdot d^2)) ).</li>
<li>( kv(i) \neq i )인 경우 추가적으로 KV 접근 비용:
( O((L-l) \cdot n \cdot d) ).</li>
</ul>
</li>
</ol>
<h4 id="b-메모리-요구량"><strong>(B) 메모리 요구량</strong></h4>
<ol>
<li>
<p><strong>기본 Transformer 메모리</strong>:</p>
<ul>
<li>KV 저장: ( O(L \cdot n \cdot d) ).</li>
<li>모델 파라미터: ( O(L \cdot d^2) ).</li>
</ul>
</li>
<li>
<p><strong>논문 방식의 메모리</strong>:</p>
<ul>
<li>KV 저장: ( O(l \cdot n \cdot d) )로 감소.</li>
<li>Iterative Training 추가 메모리: ( O(m \cdot n \cdot d) ).</li>
</ul>
</li>
</ol>
<h4 id="c-gpu-요구량"><strong>(C) GPU 요구량</strong></h4>
<ol>
<li>
<p><strong>단일 GPU</strong>:</p>
<ul>
<li>KV 공유가 Bottom 설정이면 기존 Transformer와 유사한 GPU 메모리 사용.</li>
<li>Top/Middle 설정의 Iterative Training으로 인해 GPU 메모리 20~30% 증가 예상.</li>
</ul>
</li>
<li>
<p><strong>다중 GPU</strong>:</p>
<ul>
<li>KV를 공유하는 레이어 간 통신 필요.</li>
<li>병렬 처리가 어려운 Iterative Training 단계에서 추가 비용 발생.</li>
</ul>
</li>
</ol>
<hr>
<h3 id="5-컴퓨팅-자원-요구량"><strong>5. 컴퓨팅 자원 요구량</strong></h3>
<h4 id="작은-모델-110m"><strong>작은 모델 (110M)</strong>:</h4>
<ul>
<li>GPU 메모리: 약 12GB (RTX 3090)로 충분.</li>
<li>학습 시간:
<ul>
<li>단일 GPU 기준 약 2~3일 (MiniPile, 1.7B 토큰).</li>
</ul>
</li>
</ul>
<h4 id="큰-모델-11b"><strong>큰 모델 (1.1B)</strong>:</h4>
<ul>
<li>GPU 메모리: 최소 24GB (RTX 3090), 추천 사양은 A100.</li>
<li>학습 시간:
<ul>
<li>8개 A100 사용 시 약 1주 (SlimPajama, 100B 토큰).</li>
</ul>
</li>
</ul>
<hr>
<h3 id="6-결론"><strong>6. 결론</strong></h3>
<ul>
<li><strong>입력 데이터</strong>는 표준 Transformer에서 사용하는 텍스트 데이터와 동일하며, Prompt 인코딩과 KV 캐시 공유 방식이 추가됨.</li>
<li><strong>모델 아키텍처</strong>는 기존 Transformer를 확장하여 KV 캐시 공유를 가능하게 함.</li>
<li><strong>연산량과 메모리 요구량</strong>은 설정에 따라 크게 줄어들 수 있으나, Top/Middle 설정에서는 Iterative Training 비용이 추가됨.</li>
<li><strong>실제 구현</strong> 시 작은 모델은 단일 GPU로도 학습 가능하며, 큰 모델은 다중 GPU 설정이 필요.</li>
</ul>
<h1 id="q--이-논문의-한계를-극복하기-위한-방법으로-어떤-연구흐름이-있는지-정리해서-자세하게-설명해-줘">Q : 이 논문의 한계를 극복하기 위한 방법으로 어떤 연구흐름이 있는지 정리해서 자세하게 설명해 줘</h1>
<h3 id="논문의-한계를-극복하기-위한-연구-흐름"><strong>논문의 한계를 극복하기 위한 연구 흐름</strong></h3>
<hr>
<h4 id="1-논문의-한계-요약"><strong>1. 논문의 한계 요약</strong></h4>
<ol>
<li>
<p><strong>Prompt 길이에 따른 성능 저하</strong>:</p>
<ul>
<li>Top/Middle KV 설정에서는 긴 Prompt에서 Iterative Training과 Prefilling 단계로 인해 성능과 속도가 저하.</li>
</ul>
</li>
<li>
<p><strong>추가 연산 오버헤드</strong>:</p>
<ul>
<li>Top/Middle KV 설정의 경우 Sequential Dependency로 인해 Iterative Training 필요.</li>
<li>이로 인해 훈련 시간과 메모리 사용량 증가.</li>
</ul>
</li>
<li>
<p><strong>모델 크기 제한</strong>:</p>
<ul>
<li>실험은 110M 및 1.1B 모델에 한정되어 있음.</li>
<li>더 큰 모델(10B 이상)에서는 효과성 확인 부족.</li>
</ul>
</li>
<li>
<p><strong>실시간 애플리케이션에서의 한계</strong>:</p>
<ul>
<li>Prefilling 단계의 추가 계산 비용으로 인해 실시간 추론에서 응답 속도가 느려질 가능성.</li>
</ul>
</li>
<li>
<p><strong>다양한 태스크에서의 일반화 부족</strong>:</p>
<ul>
<li>실험은 언어 모델링 및 일부 다운스트림 태스크(HellaSwag, BoolQ 등)에 국한.</li>
<li>다른 태스크(예: 추론, 문서 생성)에서 성능 검증 필요.</li>
</ul>
</li>
</ol>
<hr>
<h4 id="2-극복하기-위한-연구-흐름"><strong>2. 극복하기 위한 연구 흐름</strong></h4>
<p>아래는 논문의 한계를 해결하거나 개선할 수 있는 주요 연구 흐름입니다.</p>
<hr>
<h3 id="21-prompt-길이에-따른-성능-저하-극복"><strong>2.1 Prompt 길이에 따른 성능 저하 극복</strong></h3>
<h5 id="a-dynamic-kv-allocation"><strong>(A) Dynamic KV Allocation</strong></h5>
<ol>
<li><strong>아이디어</strong>:
<ul>
<li>Prompt 길이에 따라 KV 레이어를 동적으로 선택.</li>
<li>짧은 Prompt에서는 Bottom 설정을 사용해 빠른 추론, 긴 Prompt에서는 Top/Middle로 조정.</li>
</ul>
</li>
<li><strong>관련 연구</strong>:
<ul>
<li><strong>KV Compression</strong>: 긴 시퀀스에서 메모리 사용량을 줄이기 위한 KV 압축 기법(예: MLKV, MiniCache).</li>
<li><strong>Sliding Window Attention</strong>:
<ul>
<li>긴 문장에서도 Local Attention 기반의 효율적인 KV 공유를 가능하게 함.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h5 id="b-hybrid-attention-mechanisms"><strong>(B) Hybrid Attention Mechanisms</strong></h5>
<ol>
<li><strong>아이디어</strong>:
<ul>
<li>Bottom KV 설정에서 Local Attention과 Global Attention을 결합.</li>
<li>하위 레이어에서는 Local Attention으로 속도를 높이고, 상위 레이어에서 Global KV 참조.</li>
</ul>
</li>
<li><strong>관련 연구</strong>:
<ul>
<li><strong>Sparse Attention</strong>: Reformer, Longformer 등에서 Sparse Attention 메커니즘을 적용해 긴 시퀀스 최적화.</li>
<li><strong>Efficient Attention Mechanisms</strong>: FlashAttention 같은 GPU 최적화 연산 활용.</li>
</ul>
</li>
</ol>
<hr>
<h3 id="22-추가-연산-오버헤드-극복"><strong>2.2 추가 연산 오버헤드 극복</strong></h3>
<h5 id="a-iterative-free-training"><strong>(A) Iterative-Free Training</strong></h5>
<ol>
<li><strong>아이디어</strong>:
<ul>
<li>Iterative Training 대신 Approximated KV로 Sequential Dependency 제거.</li>
<li>각 레이어의 ( Q, K, V )를 병렬로 계산하도록 학습 과정 수정.</li>
</ul>
</li>
<li><strong>관련 연구</strong>:
<ul>
<li><strong>Distillation Approaches</strong>:
<ul>
<li>Iterative Training 단계를 Distillation으로 단순화하여 계산 효율성 개선.</li>
</ul>
</li>
<li><strong>Memory-Efficient Backpropagation</strong>:
<ul>
<li>Gradient 저장을 줄이는 방식으로 학습 비용 최소화.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h5 id="b-efficient-prefilling-techniques"><strong>(B) Efficient Prefilling Techniques</strong></h5>
<ol>
<li><strong>아이디어</strong>:
<ul>
<li>Prefilling 단계에서 필요한 KV만 계산하고, 추가 KV는 Lazy Evaluation 방식으로 계산.</li>
</ul>
</li>
<li><strong>관련 연구</strong>:
<ul>
<li><strong>Lazy Cache Mechanism</strong>: 필요할 때만 메모리에 KV 로드 및 계산.</li>
<li><strong>Token-Based Prefetching</strong>:
<ul>
<li>자주 사용되는 KV 패턴을 미리 계산하여 Prefilling 속도 최적화.</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="23-모델-크기-확장-및-메모리-최적화"><strong>2.3 모델 크기 확장 및 메모리 최적화</strong></h3>
<h5 id="a-layer-wise-training"><strong>(A) Layer-wise Training</strong></h5>
<ol>
<li><strong>아이디어</strong>:
<ul>
<li>전체 모델을 한 번에 학습하지 않고, 레이어별로 순차적으로 학습.</li>
<li>각 레이어의 학습 후 다음 레이어로 KV 공유 방식 적용.</li>
</ul>
</li>
<li><strong>관련 연구</strong>:
<ul>
<li><strong>Pipeline Parallelism</strong>:
<ul>
<li>대규모 모델의 병렬 처리를 위한 연속적 학습 구조.</li>
</ul>
</li>
<li><strong>Layer-wise Distillation</strong>:
<ul>
<li>각 레이어를 독립적으로 최적화하여 학습 안정성을 높임.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h5 id="b-gradient-accumulation-with-kv-sharing"><strong>(B) Gradient Accumulation with KV Sharing</strong></h5>
<ol>
<li><strong>아이디어</strong>:
<ul>
<li>KV 공유 시 Gradient를 누적하여 메모리 사용량 최소화.</li>
<li>더 큰 모델에서도 기존 메모리 자원으로 학습 가능.</li>
</ul>
</li>
<li><strong>관련 연구</strong>:
<ul>
<li><strong>Gradient Checkpointing</strong>:
<ul>
<li>중간 Gradient를 저장하지 않고 필요 시 재계산하여 메모리 절약.</li>
</ul>
</li>
<li><strong>Mixed Precision Training</strong>:
<ul>
<li>KV 공유 과정에서 FP16 또는 BFLOAT16 활용.</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="24-실시간-추론-개선"><strong>2.4 실시간 추론 개선</strong></h3>
<h5 id="a-real-time-optimized-architectures"><strong>(A) Real-Time Optimized Architectures</strong></h5>
<ol>
<li><strong>아이디어</strong>:
<ul>
<li>추론에서 Iterative Dependency를 제거하고, 실시간 요구에 맞게 Attention 계산 구조 수정.</li>
<li>추론 시 KV Cache를 재활용하여 실시간 응답 시간 단축.</li>
</ul>
</li>
<li><strong>관련 연구</strong>:
<ul>
<li><strong>Inference Pipelines</strong>:
<ul>
<li>실시간 애플리케이션에 적합한 KV 캐싱 전략(예: YOCO의 Efficient Attention).</li>
</ul>
</li>
<li><strong>Streaming Models</strong>:
<ul>
<li>스트리밍 환경에 적합한 Transformer 구조.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h5 id="b-prefetching-for-long-prompts"><strong>(B) Prefetching for Long Prompts</strong></h5>
<ol>
<li><strong>아이디어</strong>:
<ul>
<li>긴 Prompt에 대해 주요 KV를 미리 계산하는 Prefetching 메커니즘 도입.</li>
<li>실시간 사용 사례(예: 대화형 AI)에서 지연 시간 최소화.</li>
</ul>
</li>
<li><strong>관련 연구</strong>:
<ul>
<li><strong>Sequence-to-Sequence Prefetching</strong>:
<ul>
<li>긴 입력과 출력을 병렬화하여 Prefilling 시간을 줄이는 전략.</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="25-다운스트림-태스크-일반화"><strong>2.5 다운스트림 태스크 일반화</strong></h3>
<h5 id="a-multi-task-learning"><strong>(A) Multi-Task Learning</strong></h5>
<ol>
<li><strong>아이디어</strong>:
<ul>
<li>언어 모델링과 다양한 태스크(HellaSwag, Summarization, QA 등)를 동시에 학습.</li>
<li>KV 공유 메커니즘이 다중 태스크에 적합하도록 확장.</li>
</ul>
</li>
<li><strong>관련 연구</strong>:
<ul>
<li><strong>Unified Transformers</strong>:
<ul>
<li>TaPas, T5와 같이 다양한 태스크에 적합한 통합 구조.</li>
</ul>
</li>
<li><strong>Task-Specific KV Sharing</strong>:
<ul>
<li>태스크에 따라 KV 공유 전략을 동적으로 변경.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h5 id="b-robustness-optimization"><strong>(B) Robustness Optimization</strong></h5>
<ol>
<li><strong>아이디어</strong>:
<ul>
<li>더 많은 데이터와 다양한 태스크에서 KV 공유 메커니즘의 안정성을 검증.</li>
<li>데이터 소음 및 일반화 문제를 해결하기 위한 추가 학습.</li>
</ul>
</li>
<li><strong>관련 연구</strong>:
<ul>
<li><strong>Adversarial Training</strong>:
<ul>
<li>다양한 입력 변형에 대해 KV 공유의 내구성을 향상.</li>
</ul>
</li>
<li><strong>Regularization Techniques</strong>:
<ul>
<li>Dropout, Label Smoothing 등을 통해 모델 일반화 성능 개선.</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="3-결론"><strong>3. 결론</strong></h3>
<p>이 논문에서 제안된 크로스 레이어 KV 공유 방식의 한계를 극복하기 위해 다양한 연구 흐름이 존재합니다. 특히 Prompt 길이에 따른 성능 저하와 연산 오버헤드를 줄이기 위한 <strong>Dynamic KV Allocation</strong> 및 <strong>Iterative-Free Training</strong>이 핵심적인 개선 방향으로 보입니다. 또한, 모델 확장성과 실시간 추론을 지원하기 위해 메모리 최적화와 효율적인 Prefilling 기술이 연구될 가능성이 큽니다.</p>
<h1 id="q--pizza-bottom-lasagna-bottom-에-대해서-예시를-들어-아주-자세하게-설명해줘">Q : Pizza-Bottom, Lasagna-Bottom 에 대해서 예시를 들어 아주 자세하게 설명해줘</h1>
<h3 id="pizza-bottom과-lasagna-bottom-구성에-대한-자세한-설명"><strong>Pizza-Bottom과 Lasagna-Bottom 구성에 대한 자세한 설명</strong></h3>
<hr>
<h4 id="1-pizza-bottom-구성"><strong>1. Pizza-Bottom 구성</strong></h4>
<hr>
<h5 id="개요"><strong>개요</strong></h5>
<ul>
<li><strong>레이어 분할</strong>: Transformer의 하위 ( l )개의 레이어가 KV를 계산하며, 나머지 레이어들은 하위 레이어의 KV를 참조.</li>
<li><strong>특징</strong>:
<ul>
<li>KV를 하위 레이어에서만 계산 → 메모리 사용량 감소.</li>
<li>추론 속도가 빠르며, 긴 Prompt에서도 효율적.</li>
</ul>
</li>
</ul>
<hr>
<h5 id="예시"><strong>예시</strong></h5>
<ul>
<li><strong>모델</strong>: 9개 레이어 Transformer.</li>
<li><strong>KV 레이어 수</strong>: 3개 (( l = 3 )).</li>
<li><strong>분할 방식</strong>:
<ul>
<li>레이어 1, 2, 3 → KV 계산.</li>
<li>레이어 4~9 → 레이어 3의 KV 사용.</li>
</ul>
</li>
</ul>
<hr>
<h5 id="동작-과정"><strong>동작 과정</strong></h5>
<ol>
<li><strong>입력</strong>: 시퀀스 ( X = [x_1, x_2, &hellip;, x_n] ).</li>
<li><strong>레이어별 처리</strong>:
<ul>
<li><strong>레이어 1~3</strong>:
<ul>
<li>각 레이어에서 Query (( Q )), Key (( K )), Value (( V ))를 계산.</li>
<li>Attention 연산 수행:
[
\text{Attention}(Q, K, V) = \text{softmax}\left(\frac{Q K^T}{\sqrt{d_k}}\right)V
]</li>
</ul>
</li>
<li><strong>레이어 4~9</strong>:
<ul>
<li>KV 계산 없이 레이어 3의 ( K )와 ( V )를 참조.</li>
<li>Attention 연산 수행:
[
Z = \text{softmax}\left(\frac{Q K_{\text{layer 3}}^T}{\sqrt{d_k}}\right)V_{\text{layer 3}}
]</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h5 id="특징-및-장점"><strong>특징 및 장점</strong></h5>
<ol>
<li><strong>효율성</strong>:
<ul>
<li>6개 레이어에서 KV 계산이 제거되므로 연산량과 메모리 사용량 감소.</li>
</ul>
</li>
<li><strong>추론 속도</strong>:
<ul>
<li>병렬 추론이 가능하며, Prompt 길이가 길어도 성능이 유지.</li>
</ul>
</li>
</ol>
<h5 id="한계"><strong>한계</strong></h5>
<ul>
<li>상위 레이어가 하위 레이어의 단일 KV를 참조하므로, 모델의 표현력이 제한될 가능성.</li>
</ul>
<hr>
<h4 id="2-lasagna-bottom-구성"><strong>2. Lasagna-Bottom 구성</strong></h4>
<hr>
<h5 id="개요-1"><strong>개요</strong></h5>
<ul>
<li><strong>레이어 분할</strong>: Transformer를 ( g )개의 그룹으로 나누고, 각 그룹의 하위 레이어가 KV를 계산.</li>
<li><strong>특징</strong>:
<ul>
<li>Pizza-Bottom과 유사하나, 그룹화 방식을 사용해 보다 정교한 KV 분할 제공.</li>
<li>그룹 내 레이어가 동일한 KV를 참조.</li>
</ul>
</li>
</ul>
<hr>
<h5 id="예시-1"><strong>예시</strong></h5>
<ul>
<li><strong>모델</strong>: 9개 레이어 Transformer.</li>
<li><strong>그룹 수</strong>: 3 (( g = 3 )).</li>
<li><strong>분할 방식</strong>:
<ul>
<li>그룹 1 (레이어 1, 2, 3) → 레이어 1에서 KV 계산.</li>
<li>그룹 2 (레이어 4, 5, 6) → 레이어 4에서 KV 계산.</li>
<li>그룹 3 (레이어 7, 8, 9) → 레이어 7에서 KV 계산.</li>
</ul>
</li>
</ul>
<hr>
<h5 id="동작-과정-1"><strong>동작 과정</strong></h5>
<ol>
<li><strong>입력</strong>: 시퀀스 ( X = [x_1, x_2, &hellip;, x_n] ).</li>
<li><strong>그룹별 처리</strong>:
<ul>
<li><strong>그룹 1</strong>:
<ul>
<li>레이어 1이 ( Q, K, V )를 계산.</li>
<li>레이어 2, 3은 레이어 1의 ( K, V )를 참조.</li>
</ul>
</li>
<li><strong>그룹 2</strong>:
<ul>
<li>레이어 4가 ( Q, K, V )를 계산.</li>
<li>레이어 5, 6은 레이어 4의 ( K, V )를 참조.</li>
</ul>
</li>
<li><strong>그룹 3</strong>:
<ul>
<li>레이어 7이 ( Q, K, V )를 계산.</li>
<li>레이어 8, 9는 레이어 7의 ( K, V )를 참조.</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h5 id="특징-및-장점-1"><strong>특징 및 장점</strong></h5>
<ol>
<li><strong>유연성</strong>:
<ul>
<li>Pizza-Bottom보다 더 세분화된 KV 참조 방식으로 상위 레이어 표현력 개선.</li>
</ul>
</li>
<li><strong>효율성</strong>:
<ul>
<li>전체 레이어에서 KV를 계산하지 않아 메모리 사용량 감소.</li>
</ul>
</li>
</ol>
<h5 id="한계-1"><strong>한계</strong></h5>
<ul>
<li>그룹 간 종속성으로 인해 일부 병렬성이 제한될 수 있음.</li>
</ul>
<hr>
<h4 id="3-pizza-bottom과-lasagna-bottom-비교"><strong>3. Pizza-Bottom과 Lasagna-Bottom 비교</strong></h4>
<table>
  <thead>
      <tr>
          <th>항목</th>
          <th>Pizza-Bottom</th>
          <th>Lasagna-Bottom</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>분할 방식</strong></td>
          <td>하위 ( l )개의 레이어 전체</td>
          <td>레이어를 그룹으로 분할</td>
      </tr>
      <tr>
          <td><strong>KV 참조 방식</strong></td>
          <td>마지막 KV 레이어 참조</td>
          <td>각 그룹의 첫 번째 레이어 참조</td>
      </tr>
      <tr>
          <td><strong>추론 속도</strong></td>
          <td>매우 빠름</td>
          <td>다소 느릴 수 있음</td>
      </tr>
      <tr>
          <td><strong>모델 표현력</strong></td>
          <td>상대적으로 낮음</td>
          <td>상대적으로 높음</td>
      </tr>
      <tr>
          <td><strong>메모리 효율성</strong></td>
          <td>높음</td>
          <td>높음</td>
      </tr>
      <tr>
          <td><strong>적용 사례</strong></td>
          <td>간단한 태스크, 긴 Prompt</td>
          <td>복잡한 태스크, 더 큰 모델</td>
      </tr>
  </tbody>
</table>
<hr>
<h4 id="4-연산-및-메모리-요구량-비교"><strong>4. 연산 및 메모리 요구량 비교</strong></h4>
<table>
  <thead>
      <tr>
          <th>항목</th>
          <th>Pizza-Bottom</th>
          <th>Lasagna-Bottom</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>KV 계산량 감소</strong></td>
          <td>( O((L-l) \cdot d^2) )</td>
          <td>( O((L-g) \cdot d^2) )</td>
      </tr>
      <tr>
          <td><strong>메모리 사용량</strong></td>
          <td>( O(l \cdot n \cdot d) )</td>
          <td>( O(g \cdot n \cdot d) )</td>
      </tr>
      <tr>
          <td><strong>추론 단계 연산량</strong></td>
          <td>낮음</td>
          <td>중간</td>
      </tr>
      <tr>
          <td><strong>Iterative Training 필요성</strong></td>
          <td>없음</td>
          <td>없음</td>
      </tr>
  </tbody>
</table>
<hr>
<h4 id="5-결론-2"><strong>5. 결론</strong></h4>
<ul>
<li><strong>Pizza-Bottom</strong>은 단순한 KV 참조 방식을 통해 매우 효율적인 추론을 제공하며, 긴 Prompt에 적합합니다.</li>
<li><strong>Lasagna-Bottom</strong>은 KV를 그룹별로 계산하여 표현력을 향상시키며, 복잡한 태스크나 더 큰 모델에 적합합니다.</li>
<li>둘 다 메모리와 연산 효율성을 극대화하므로, 특정 애플리케이션의 요구사항에 따라 적절히 선택할 수 있습니다.</li>
</ul>

  </article>

  
  
  <div class="post-license bg-muted/30 border-border mb-8 rounded-xl border p-6">
    <div class="flex items-start gap-4">
      <div
        class="bg-primary/10 flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg">
        
  <svg class="h-6 w-6"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="라이선스"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
</svg>
      </div>

      <div class="flex-1">
        <h3 class="text-foreground mb-2 text-lg font-semibold">
          라이선스
        </h3>

        <div class="text-muted-foreground space-y-2 text-sm">
          
          <p>
            <strong>저작자:</strong>
            류재훈
          </p>
          

          <p>
            <strong>링크:</strong>
            <a
              href="http://192.168.1.11:1314/posts/A-Systematic-Study-of-Cross-Layer-KV-Sharing-for-Efficient-LLM-Inference/"
              class="text-primary hover:text-primary/80 transition-colors duration-200">
              http://192.168.1.11:1314/posts/A-Systematic-Study-of-Cross-Layer-KV-Sharing-for-Efficient-LLM-Inference/
            </a>
          </p>

          <p>
            <strong>라이선스:</strong>
            <a
              href="https://creativecommons.org/licenses/by-nc-sa/4.0/"
              target="_blank"
              rel="noopener noreferrer"
              class="text-primary hover:text-primary/80 transition-colors duration-200">
              CC BY-NC-SA 4.0
            </a>
          </p>

          <p class="text-xs">
            이 저작물은 크리에이티브 커먼즈 저작자표시-비영리-동일조건변경허락 4.0 국제 라이선스에 따라 이용할 수 있습니다. 출처를 표시하고, 비영리 목적으로만 사용하며, 동일한 라이선스를 유지해야 합니다.
          </p>
        </div>
      </div>
    </div>
  </div>


  
  





  <nav
    class="post-navigation mb-12"
    aria-label="게시글 네비게이션">
    <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
      
      <div class="nav-item">
        
          <a
            href="/posts/In-context-KV-Cache-Eviction-for-LLMs-via-Attention-Gate/"
            class="group bg-card border-border hover:bg-primary/5 hover:border-primary/20 focus:ring-primary/20 flex min-h-[140px] flex-col justify-between rounded-xl border p-6 transition-all duration-300 ease-out hover:-translate-y-1 hover:scale-[1.02] hover:shadow-lg focus:ring-2 focus:outline-none">
            <div>
              <div class="mb-3 flex items-center gap-3">
                
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
</svg>
                <span class="text-muted-foreground text-sm font-medium">
                  이전
                </span>
              </div>

              <h3
                class="text-foreground group-hover:text-primary mb-3 line-clamp-2 text-lg leading-tight font-semibold transition-colors duration-200">
                In-context KV-Cache Eviction for LLMs via Attention-Gate
              </h3>
            </div>

            <div
              class="text-muted-foreground mt-auto flex items-center gap-2 text-xs">
              
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
</svg>
              <time datetime="2024-11-19">
                11月19日
              </time>
            </div>
          </a>
        
      </div>

      
      <div class="nav-item">
        
          <a
            href="/posts/TorchTitan-One-stop-PyTorch-native-solution-for-production-ready-LLM-pre-training/"
            class="group bg-card border-border hover:bg-primary/5 hover:border-primary/20 focus:ring-primary/20 flex min-h-[140px] flex-col justify-between rounded-xl border p-6 transition-all duration-300 ease-out hover:-translate-y-1 hover:scale-[1.02] hover:shadow-lg focus:ring-2 focus:outline-none">
            <div>
              <div class="mb-3 flex items-center justify-end gap-3">
                <span class="text-muted-foreground text-sm font-medium">
                  다음
                </span>
                
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
</svg>
              </div>

              <h3
                class="text-foreground group-hover:text-primary mb-3 line-clamp-2 text-right text-lg leading-tight font-semibold transition-colors duration-200">
                TorchTitan: One-stop PyTorch native solution for production ready LLM pre-training
              </h3>
            </div>

            <div
              class="text-muted-foreground mt-auto flex items-center justify-end gap-2 text-xs">
              <time datetime="2024-11-20">
                11月20日
              </time>
              
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
</svg>
            </div>
          </a>
        
      </div>
    </div>
  </nav>




  
  










  
  


    </main>

    <footer class="mx-auto max-w-4xl px-4 py-8">
  <div class="px-6 py-6">
    
    
      <nav class="mb-6">
        <div class="flex flex-wrap items-center justify-center gap-1">
          
            
            
            
            <a
              href="/index.xml"
              
              class="nav-link hover:text-primary hover:bg-primary/10 text-muted-foreground flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105">
              
                
  <svg class="h-5 w-5"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="RSS Feed">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z" />

</svg>
              
              <span
                >
                  RSS Feed
                </span
              >
            </a>
          
        </div>
      </nav>
    


    
    
      <div class="border-border mb-6 border-t"></div>
    


    
    <div class="flex flex-col items-center justify-between gap-4 md:flex-row">
      
      <div class="text-muted-foreground text-sm">
        <p>
          &copy; 2025 Jaehun&#39;s Blog.
          모든 권리 보유.
        </p>
      </div>

      
      
        <div class="flex items-center gap-3">
          
            <a
              href="https://github.com/ryujaehun"
              
                target="_blank" rel="noopener noreferrer"
              
              class="text-muted-foreground hover:text-primary focus:ring-primary/20 rounded-lg p-1 transition-all duration-300 ease-out hover:scale-110 focus:ring-2 focus:outline-none"
              title="GitHub"
              aria-label="GitHub">
              
                
  <svg class="h-6 w-6"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="GitHub"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5c.08-1.25-.27-2.48-1-3.5c.28-1.15.28-2.35 0-3.5c0 0-1 0-3 1.5c-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.4 5.4 0 0 0 4 9c0 3.5 3 5.5 6 5.5c-.39.49-.68 1.05-.85 1.65S8.93 17.38 9 18v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></g></svg>
              
            </a>
          
            <a
              href="https://www.linkedin.com/in/jaehunryu/"
              
                target="_blank" rel="noopener noreferrer"
              
              class="text-muted-foreground hover:text-primary focus:ring-primary/20 rounded-lg p-1 transition-all duration-300 ease-out hover:scale-110 focus:ring-2 focus:outline-none"
              title="Linkedin"
              aria-label="Linkedin">
              
                
  <svg class="h-6 w-6"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="Linkedin"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2a2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6M2 9h4v12H2z"/><circle cx="4" cy="4" r="2"/></g></svg>
              
            </a>
          
            <a
              href="mailto:jaehunryu@icloud.com"
              
              class="text-muted-foreground hover:text-primary focus:ring-primary/20 rounded-lg p-1 transition-all duration-300 ease-out hover:scale-110 focus:ring-2 focus:outline-none"
              title="Email"
              aria-label="Email">
              
                
  <svg class="h-6 w-6"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24" aria-label="Email">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />

</svg>
              
            </a>
          
        </div>
      

    </div>
  </div>
</footer>


    
    



<div
  id="dock"
  class="pointer-events-none fixed bottom-4 left-1/2 z-[9999] w-fit -translate-x-1/2 translate-y-24 opacity-0 transition-all duration-300 ease-out sm:right-0 sm:left-0 sm:mx-auto sm:translate-x-0"
  role="toolbar"
  aria-label="바로가기 도구 모음">
  <nav
    class="border-border bg-card/80 scrollbar-hide xs:px-3 xs:py-2 mx-auto flex max-w-[calc(100vw-2rem)] min-w-fit items-center justify-center overflow-x-auto rounded-2xl border px-4 py-3 shadow-lg backdrop-blur-sm sm:px-4 sm:py-3">
    
    
      <button
        id="dock-back"
        class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 xs:px-2 xs:py-1.5 flex flex-shrink-0 items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none sm:px-3 sm:py-2"
        title="뒤로"
        aria-label="뒤로">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <path d="m12 19-7-7 7-7"/>
  <path d="M19 12H5"/>

</svg>
        <span class="hidden sm:inline"
          >뒤로</span
        >
      </button>

      
      <div class="bg-border xs:mx-1 mx-2 h-6 w-px sm:mx-2"></div>
    


    
    
      <button
        id="dock-toc"
        class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 xs:px-2 xs:py-1.5 flex flex-shrink-0 items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none sm:px-3 sm:py-2"
        title="목차"
        aria-label="목차">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <line x1="8" x2="21" y1="6" y2="6"/>
  <line x1="8" x2="21" y1="12" y2="12"/>
  <line x1="8" x2="21" y1="18" y2="18"/>
  <line x1="3" x2="3.01" y1="6" y2="6"/>
  <line x1="3" x2="3.01" y1="12" y2="12"/>
  <line x1="3" x2="3.01" y1="18" y2="18"/>

</svg>
        <span class="hidden sm:inline"
          >목차</span
        >
      </button>

      
      <div class="bg-border xs:mx-1 mx-2 h-6 w-px sm:mx-2"></div>
    


    
    <button
      id="dock-search"
      class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 xs:px-3 xs:py-1.5 flex flex-shrink-0 items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none sm:px-4 sm:py-2"
      title="검색"
      aria-label="검색">
      
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />

</svg>
      <span class="hidden md:inline"
        >검색</span
      >
    </button>

    
    <div class="bg-border xs:mx-1 mx-2 h-6 w-px sm:mx-2"></div>

    
    
    


    
    <button
      id="dock-top"
      class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 xs:px-2 xs:py-1.5 flex flex-shrink-0 items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none sm:px-3 sm:py-2"
      title="맨 위로"
      aria-label="맨 위로">
      
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <path d="m18 15-6-6-6 6"/>

</svg>
      <span class="hidden sm:inline"
        >맨 위로</span
      >
    </button>
  </nav>
</div>


    
      



<div
  id="toc-overlay"
  class="pointer-events-none fixed inset-0 z-40 bg-black/50 opacity-0 backdrop-blur-sm transition-all duration-300"
  role="dialog"
  aria-modal="true"
  aria-labelledby="toc-title"></div>


<div
  id="toc-card"
  class="pointer-events-none fixed inset-4 z-50 flex w-auto scale-95 items-center justify-center opacity-0 transition-all duration-300 sm:inset-auto sm:top-1/2 sm:left-1/2 sm:block sm:w-full sm:max-w-md sm:-translate-x-1/2 sm:-translate-y-1/2"
  role="dialog"
  aria-modal="true"
  aria-labelledby="toc-title">
  <div
    class="bg-card border-border w-full max-w-sm overflow-hidden rounded-xl border shadow-xl sm:max-w-md">
    
    <div
      class="border-border bg-muted/30 flex items-center justify-between border-b p-4">
      <div class="flex items-center gap-3">
        
  <svg class="h-5 w-5"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <line x1="8" x2="21" y1="6" y2="6"/>
  <line x1="8" x2="21" y1="12" y2="12"/>
  <line x1="8" x2="21" y1="18" y2="18"/>
  <line x1="3" x2="3.01" y1="6" y2="6"/>
  <line x1="3" x2="3.01" y1="12" y2="12"/>
  <line x1="3" x2="3.01" y1="18" y2="18"/>

</svg>
        <h2 id="toc-title" class="text-foreground text-lg font-semibold">
          목차
        </h2>
      </div>

      
      <button
        id="toc-close"
        class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 rounded-lg p-2 transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none"
        title="닫기"
        aria-label="닫기">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />

</svg>
      </button>
    </div>

    
    <div class="max-h-96 overflow-y-auto p-4">
      <nav
        id="toc-nav"
        class="toc-scrollbar"
        aria-label="글 목차">
          
          <div id="toc-content">
            <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#논문-분석-a-systematic-study-of-cross-layer-kv-sharing-for-efficient-llm-inference">논문 분석: &ldquo;A Systematic Study of Cross-Layer KV Sharing for Efficient LLM Inference&rdquo;</a>
          <ul>
            <li><a href="#1-논문의-강점과-독창성">1. <strong>논문의 강점과 독창성</strong></a></li>
            <li><a href="#2-핵심-알고리즘-및-예시">2. <strong>핵심 알고리즘 및 예시</strong></a></li>
            <li><a href="#3-논문의-한계점">3. <strong>논문의 한계점</strong></a></li>
            <li><a href="#4-결론">4. <strong>결론</strong></a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#논문에서-사용하는-방법을-학습하기-위한-데이터셋-및-학습-과정"><strong>논문에서 사용하는 방법을 학습하기 위한 데이터셋 및 학습 과정</strong></a>
          <ul>
            <li><a href="#1-필요한-데이터셋"><strong>1. 필요한 데이터셋</strong></a></li>
            <li><a href="#2-학습-준비"><strong>2. 학습 준비</strong></a></li>
            <li><a href="#3-학습-과정"><strong>3. 학습 과정</strong></a></li>
            <li><a href="#4-예시-11b-모델을-sandwich-middle로-학습"><strong>4. 예시: 1.1B 모델을 Sandwich-Middle로 학습</strong></a></li>
            <li><a href="#5-최적화-및-학습-고려-사항"><strong>5. 최적화 및 학습 고려 사항</strong></a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#논문-결과-분석-및-독창성"><strong>논문 결과 분석 및 독창성</strong></a>
          <ul>
            <li><a href="#1-논문에서-제시한-주요-결과"><strong>1. 논문에서 제시한 주요 결과</strong></a></li>
            <li><a href="#2-다른-방법론과-비교한-특출난-점"><strong>2. 다른 방법론과 비교한 특출난 점</strong></a></li>
            <li><a href="#3-논문에서-제시하는-이유와-기여"><strong>3. 논문에서 제시하는 이유와 기여</strong></a></li>
            <li><a href="#4-나의-생각과-추가적인-통찰"><strong>4. 나의 생각과 추가적인 통찰</strong></a></li>
            <li><a href="#5-결론"><strong>5. 결론</strong></a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#논문의-방법-구현을-위한-추가적인-요구사항-및-자원-계산"><strong>논문의 방법 구현을 위한 추가적인 요구사항 및 자원 계산</strong></a>
          <ul>
            <li><a href="#1-기존-transformer에서의-추가-구현-요구사항"><strong>1. 기존 Transformer에서의 추가 구현 요구사항</strong></a></li>
            <li><a href="#2-추가-구현에-필요한-컴퓨팅-리소스"><strong>2. 추가 구현에 필요한 컴퓨팅 리소스</strong></a></li>
            <li><a href="#3-구현에-소모되는-공수"><strong>3. 구현에 소모되는 공수</strong></a></li>
            <li><a href="#4-추가-연산량-및-리소스-정리"><strong>4. 추가 연산량 및 리소스 정리</strong></a></li>
            <li><a href="#5-결론-1"><strong>5. 결론</strong></a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#논문의-입력-데이터와-추론-과정-설명"><strong>논문의 입력 데이터와 추론 과정 설명</strong></a>
          <ul>
            <li><a href="#1-입력-데이터"><strong>1. 입력 데이터</strong></a></li>
            <li><a href="#2-추론-과정-예시-포함"><strong>2. 추론 과정 (예시 포함)</strong></a></li>
          </ul>
        </li>
        <li><a href="#3-모델-아키텍처-구성"><strong>3. 모델 아키텍처 구성</strong></a></li>
        <li><a href="#4-연산-요구량-분석"><strong>4. 연산 요구량 분석</strong></a>
          <ul>
            <li><a href="#a-연산량"><strong>(A) 연산량</strong></a></li>
            <li><a href="#b-메모리-요구량"><strong>(B) 메모리 요구량</strong></a></li>
            <li><a href="#c-gpu-요구량"><strong>(C) GPU 요구량</strong></a></li>
          </ul>
        </li>
        <li><a href="#5-컴퓨팅-자원-요구량"><strong>5. 컴퓨팅 자원 요구량</strong></a>
          <ul>
            <li><a href="#작은-모델-110m"><strong>작은 모델 (110M)</strong>:</a></li>
            <li><a href="#큰-모델-11b"><strong>큰 모델 (1.1B)</strong>:</a></li>
          </ul>
        </li>
        <li><a href="#6-결론"><strong>6. 결론</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#논문의-한계를-극복하기-위한-연구-흐름"><strong>논문의 한계를 극복하기 위한 연구 흐름</strong></a>
          <ul>
            <li><a href="#1-논문의-한계-요약"><strong>1. 논문의 한계 요약</strong></a></li>
            <li><a href="#2-극복하기-위한-연구-흐름"><strong>2. 극복하기 위한 연구 흐름</strong></a></li>
          </ul>
        </li>
        <li><a href="#21-prompt-길이에-따른-성능-저하-극복"><strong>2.1 Prompt 길이에 따른 성능 저하 극복</strong></a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#22-추가-연산-오버헤드-극복"><strong>2.2 추가 연산 오버헤드 극복</strong></a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#23-모델-크기-확장-및-메모리-최적화"><strong>2.3 모델 크기 확장 및 메모리 최적화</strong></a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#24-실시간-추론-개선"><strong>2.4 실시간 추론 개선</strong></a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#25-다운스트림-태스크-일반화"><strong>2.5 다운스트림 태스크 일반화</strong></a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#3-결론"><strong>3. 결론</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#pizza-bottom과-lasagna-bottom-구성에-대한-자세한-설명"><strong>Pizza-Bottom과 Lasagna-Bottom 구성에 대한 자세한 설명</strong></a>
          <ul>
            <li><a href="#1-pizza-bottom-구성"><strong>1. Pizza-Bottom 구성</strong></a></li>
            <li><a href="#2-lasagna-bottom-구성"><strong>2. Lasagna-Bottom 구성</strong></a></li>
            <li><a href="#3-pizza-bottom과-lasagna-bottom-비교"><strong>3. Pizza-Bottom과 Lasagna-Bottom 비교</strong></a></li>
            <li><a href="#4-연산-및-메모리-요구량-비교"><strong>4. 연산 및 메모리 요구량 비교</strong></a></li>
            <li><a href="#5-결론-2"><strong>5. 결론</strong></a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
          </div>
      </nav>
    </div>

    
    <div class="border-border bg-muted/20 border-t px-4 py-3">
      <div class="text-muted-foreground text-center text-xs">
        <span>제목을 클릭하면 해당 위치로 이동합니다</span>
      </div>
    </div>
  </div>
</div>

    


  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"
    integrity="sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP"
    crossorigin="anonymous" />
  <script
    defer
    src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"
    integrity="sha384-cMkvdD8LoxVzGF/RPUKAcvmm49FQ0oxwDF3BGKtDXcEc+T1b2N+teh/OJfpU0jr6"
    crossorigin="anonymous"></script>
  <script
    defer
    src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"
    integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh"
    crossorigin="anonymous"></script>

<script>
    
    function initKaTeX() {
        if (typeof renderMathInElement === 'undefined') {
            setTimeout(initKaTeX, 100);
            return;
        }

        var delimiters = [{"display":true,"left":"$$","right":"$$"},{"display":false,"left":"$","right":"$"}];

        renderMathInElement(document.body, {
            delimiters: delimiters,
            throwOnError: false,
            errorColor: '#cc0000',
            fleqn: false,
            leqno: false,
            trust: false
        });
    }

    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initKaTeX);
    } else {
        initKaTeX();
    }
</script>
    



    
    
<div
  id="search-overlay"
  class="pointer-events-none fixed inset-0 z-40 bg-black/50 opacity-0 transition-opacity duration-300"></div>


<div
  id="search-modal"
  class="bg-card border-border pointer-events-none fixed top-1/2 left-1/2 z-50 max-h-[80vh] w-full max-w-2xl -translate-x-1/2 -translate-y-1/2 scale-95 transform overflow-hidden rounded-xl border opacity-0 shadow-xl transition-all duration-300">
  
  <div class="border-border flex items-center gap-3 border-b p-4">
    
    <div class="text-muted-foreground h-5 w-5 flex-shrink-0">
      
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />

</svg>
    </div>

    
    <div class="relative flex-1">
      
      <button
        id="search-clear"
        class="text-muted-foreground hover:text-foreground hover:bg-muted/50 pointer-events-none absolute top-1/2 left-0 z-10 h-5 w-5 -translate-y-1/2 rounded opacity-0 transition-all duration-200"
        title="지우기"
        aria-label="지우기">
        
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />

</svg>
      </button>

      
      <input
        id="search-input"
        type="text"
        placeholder="게시글 검색..."
        class="text-foreground placeholder:text-muted-foreground w-full border-none bg-transparent pl-8 text-lg outline-none"
        autocomplete="off"
        spellcheck="false" />
    </div>

    
    <button
      id="search-close"
      class="text-muted-foreground hover:text-foreground hover:bg-muted/50 flex h-6 w-6 items-center justify-center rounded-md p-0.5 transition-all duration-200"
      title="닫기"
      aria-label="닫기">
      
  <svg class="h-4 w-4"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />

</svg>
    </button>
  </div>

  
  <div id="search-results" class="max-h-96 overflow-y-auto">
    
    <div
      id="search-empty"
      class="flex flex-col items-center justify-center py-12 text-center">
      <div
        class="bg-muted/50 mb-4 flex h-16 w-16 items-center justify-center rounded-full">
        
  <svg class="h-6 w-6"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />

</svg>
      </div>
      <h3 class="text-foreground mb-2 text-lg font-semibold">
        검색 시작
      </h3>
      <p class="text-muted-foreground text-sm">
        검색어를 입력하세요
      </p>
    </div>

    
    <div
      id="search-loading"
      class="flex hidden items-center justify-center py-8">
      <div
        class="mr-3 h-6 w-6 animate-spin rounded-full border-2 border-current border-t-transparent"></div>
      <span class="text-muted-foreground"
        >검색 중...</span
      >
    </div>

    
    <div
      id="search-no-results"
      class="flex hidden flex-col items-center justify-center py-12 text-center">
      <div
        class="bg-muted/50 mb-4 flex h-16 w-16 items-center justify-center rounded-full">
        
  <svg class="h-6 w-6"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />
</svg>
      </div>
      <h3 class="text-foreground mb-2 text-lg font-semibold">
        검색 결과 없음
      </h3>
      <p class="text-muted-foreground text-sm">
        다른 검색어로 시도해보세요
      </p>
    </div>

    
    <div id="search-results-list" class="hidden">
      
      <div
        id="search-stats"
        class="text-muted-foreground border-border border-b px-4 py-3 text-sm"
        data-template="%d개의 결과 찾음">
      </div>

      
      <div id="search-items" class="divide-border divide-y">
        
      </div>
    </div>
  </div>

  
  <div class="border-border bg-muted/20 border-t px-4 py-3">
    <div
      class="text-muted-foreground flex items-center justify-between text-xs">
      <div class="flex items-center gap-2 md:gap-4">
        <div class="flex items-center gap-1">
          <kbd
            class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs"
            >↑↓</kbd
          >
          <span class="hidden sm:inline"
            >이동</span
          >
        </div>
        <div class="flex items-center gap-1">
          <kbd
            class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs"
            >↵</kbd
          >
          <span class="hidden sm:inline"
            >선택</span
          >
        </div>
        <div class="flex items-center gap-1">
          <kbd
            class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs"
            >ESC</kbd
          >
          <span class="hidden sm:inline"
            >닫기</span
          >
        </div>
      </div>
      <div class="search-hint-desktop flex items-center gap-1">
        <kbd class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs"
          >⌘K</kbd
        >
        <span>단축키</span>
      </div>
    </div>
  </div>
</div>

  </body>
</html>
