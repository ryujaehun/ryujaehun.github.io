<!doctype html><html lang=ko-kr data-theme=claude><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>DeepSeekMoE: Towards Ultimate Expert Specialization in Mixture-of-Experts Language Models | Jaehun's Blog</title><meta name=description content="논문 링크
DeepSeekMoE 정리 – Dense 성능을 40 % FLOPs로 끌어낸 ‘세분화-전문가’ 트릭 한 줄 요약 (TL;DR) Fine-Grained Expert Segmentation (FGES) + Shared Experts (SEI) 로 FFN-MoE..."><meta name=keywords content="2401.06066v1,"><meta name=author content><meta name=language content="ko"><meta name=robots content="index, follow"><link rel=canonical href=https://jaehun.me/ko/ko/posts/2025-06-29-paper-2401.06066v1/><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://jaehun.me/ko/ko/posts/2025-06-29-paper-2401.06066v1/"><meta property="og:site_name" content="Jaehun's Blog"><meta property="og:title" content="DeepSeekMoE: Towards Ultimate Expert Specialization in Mixture-of-Experts Language Models"><meta property="og:description" content="논문 링크
DeepSeekMoE 정리 – Dense 성능을 40 % FLOPs로 끌어낸 ‘세분화-전문가’ 트릭 한 줄 요약 (TL;DR) Fine-Grained Expert Segmentation (FGES) + Shared Experts (SEI) 로 FFN-MoE를 재설계한 DeepSeekMoE는 동일 FLOPs에서 Dense 상한선의 95 %↑ 성능을 달성하고, 16 B 모델 기준 LLaMA-2 7 B와 동급 품질을 연산량 0.4× 로 구현한다."><meta property="og:locale" content="ko_kr"><meta property="og:type" content="article"><meta property="article:section" content="ko"><meta property="article:published_time" content="2025-06-29T00:00:00+00:00"><meta property="article:modified_time" content="2025-06-29T00:00:00+00:00"><meta property="article:tag" content="2401.06066v1"><meta property="og:image" content="https://jaehun.me/images/og-default.avif"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jaehun.me/images/og-default.avif"><meta name=twitter:title content="DeepSeekMoE: Towards Ultimate Expert Specialization in Mixture-of-Experts Language Models"><meta name=twitter:description content="논문 링크
DeepSeekMoE 정리 – Dense 성능을 40 % FLOPs로 끌어낸 ‘세분화-전문가’ 트릭 한 줄 요약 (TL;DR) Fine-Grained Expert Segmentation (FGES) + Shared Experts (SEI) 로 FFN-MoE를 재설계한 DeepSeekMoE는 동일 FLOPs에서 Dense 상한선의 95 %↑ 성능을 달성하고, 16 B 모델 기준 LLaMA-2 7 B와 동급 품질을 연산량 0.4× 로 구현한다."><meta itemprop=name content="DeepSeekMoE: Towards Ultimate Expert Specialization in Mixture-of-Experts Language Models"><meta itemprop=description content="논문 링크
DeepSeekMoE 정리 – Dense 성능을 40 % FLOPs로 끌어낸 ‘세분화-전문가’ 트릭 한 줄 요약 (TL;DR) Fine-Grained Expert Segmentation (FGES) + Shared Experts (SEI) 로 FFN-MoE를 재설계한 DeepSeekMoE는 동일 FLOPs에서 Dense 상한선의 95 %↑ 성능을 달성하고, 16 B 모델 기준 LLaMA-2 7 B와 동급 품질을 연산량 0.4× 로 구현한다."><meta itemprop=datePublished content="2025-06-29T00:00:00+00:00"><meta itemprop=dateModified content="2025-06-29T00:00:00+00:00"><meta itemprop=wordCount content="17659"><meta itemprop=image content="https://jaehun.me/images/og-default.avif"><meta itemprop=keywords content="2401.06066v1"><script>window.HUGO_SEARCH_CONFIG={searchIndexURL:'"/ko/index.json"'}</script><script>window.HUGO_GALLERY_CONFIG={justified_gallery:!1,lightbox:!1,justified:"{}",lightbox_options:"{}"}</script><link rel=stylesheet href=/css/compiled.min.9165cace5b80a5be5daad6ea96eb2abc20a18a3f41d7fed7f0335b689fdf7883.css integrity="sha256-kWXKzluApb5dqtbqlusqvCChij9B1/7X8DNbaJ/feIM=" crossorigin=anonymous><link rel=stylesheet href=/css/chroma.min.491df36221f739b5948a747a0351f100ee7ccaaf466d9f46288bf06de1d59123.css integrity="sha256-SR3zYiH3ObWUinR6A1HxAO58yq9GbZ9GKIvwbeHVkSM=" crossorigin=anonymous><script src=/js/main.ba969e49a7a874e6938fe689a7dcaa00cb64cb4d429c2cf98d09bde512a16c6d.js integrity="sha256-upaeSaeodOaTj+aJp9yqAMtky01CnCz5jQm95RKhbG0=" crossorigin=anonymous></script><script src=/js/gumshoe.polyfills.min.js></script><script src=/js/toc.70654aebf0b738a78ae2df95297cc10ebc6e590f3c942dd1325fa852f50038b2.js integrity="sha256-cGVK6/C3OKeK4t+VKXzBDrxuWQ88lC3RMl+oUvUAOLI=" crossorigin=anonymous defer></script><script src=/js/search.de3eba3540834efb8328121784bff4774e06362412ee41eee665f5b4f987f393.js integrity="sha256-3j66NUCDTvuDKBIXhL/0d04GNiQS7kHu5mX1tPmH85M=" crossorigin=anonymous defer></script><script src=/js/dock.e02f422517e001d9fb6bea1e9e8b0e89e9d2e486ad4641f275bb3e36ce2ae79f.js integrity="sha256-4C9CJRfgAdn7a+oenosOienS5IatRkHydbs+Ns4q558=" crossorigin=anonymous defer></script><script>(function(){const e=localStorage.getItem("theme")||"system",n=localStorage.getItem("colorScheme")||"claude";document.documentElement.setAttribute("data-theme",n);function t(){e==="dark"||e==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}t(),e==="system"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t)})()</script></head><body class="bg-background text-foreground min-h-screen antialiased"><div id=reading-progress-container class="reading-progress-container pointer-events-none fixed top-0 right-0 left-0 z-50 transition-opacity duration-300 ease-out" data-height=3 data-smooth-scroll=true data-hide-on-complete=false><div class="reading-progress-bg w-full"></div><div id=reading-progress-bar class="from-primary to-primary/80 reading-progress-bar
transition-all duration-150 ease-out
absolute top-0 left-0 w-0 bg-gradient-to-r"></div></div><script>(function(){"use strict";const t=document.getElementById("reading-progress-container"),o=document.getElementById("reading-progress-bar");if(!t||!o)return;const a={smoothScroll:t.dataset.smoothScroll==="true",hideOnComplete:t.dataset.hideOnComplete==="true"};let n=!0,l=null;function r(){const t=window.pageYOffset||document.documentElement.scrollTop,n=document.documentElement.scrollHeight,s=window.innerHeight,e=n-s;return e<=0?0:Math.min(Math.max(t/e*100,0),100)}function c(){const e=r();o.style.width=e+"%",a.hideOnComplete&&e>=99.5?n&&(t.style.opacity="0",n=!1):n||(t.style.opacity="1",n=!0)}let s=!1;function e(){s||(requestAnimationFrame(()=>{c(),s=!1}),s=!0)}function i(){window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e,{passive:!0}),document.addEventListener("visibilitychange",()=>{document.hidden||e()}),e(),window.addEventListener("beforeunload",()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i):i()})()</script><header class="sticky top-0 z-50 mx-auto max-w-4xl px-4 py-6"><div class="border-border bg-card/80 flex items-center rounded-xl border px-6 py-4 shadow-sm backdrop-blur-sm"><div class="hidden w-full items-center md:flex"><div class="flex items-center"><a href=/ko/ class="flex h-10 w-10 items-center justify-center overflow-hidden rounded-full transition-transform duration-200 hover:scale-105" aria-label="Jaehun's Blog"><img src=/images/logo.svg alt="Jaehun's Blog" class="h-full w-full object-cover"></a></div><nav class="mx-8 flex flex-1 items-center justify-center"><div class="flex items-center space-x-1"><a href=/ko/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="nav.posts"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/></svg>
<span>게시글
</span></a><a href=/ko/categories/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="nav.categories"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/></svg>
<span>카테고리
</span></a><a href=/ko/tags/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="nav.tags"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512.0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828.0l-7-7A1.994 1.994.0 013 12V7a4 4 0 014-4z"/></svg>
<span>태그
</span></a><a href=/ko/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="nav.archives"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/></svg>
<span>아카이브</span></a></div></nav><div class="flex items-center space-x-2"><div class=relative><button id=language-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95" data-dropdown-type=language aria-label="언어 변경" aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5 relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="언어 변경"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 8 6 6m-7 0 6-6 2-3M2 5h12M7 2h1m14 20-5-10-5 10m2-4h6"/></svg></button><div id=language-dropdown class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out" data-dropdown-type=language role=menu aria-labelledby=language-toggle><a href=/ko/ class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none" role=menuitem aria-current=true><span class=font-medium>한국어</span></a><a href=/en/ class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none" role=menuitem><span class=font-medium>English</span></a></div></div><div class=relative><button id=color-scheme-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95" data-dropdown-type=color-scheme aria-label="테마 변경" aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5 relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="테마 변경"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v6a2 2 0 002 2h4a2 2 0 002-2V5z"/></svg></button><div id=color-scheme-dropdown class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-44 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out" data-dropdown-type=color-scheme><button data-color-scheme=claude class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Default</span></button><button data-color-scheme=default class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>White</span></button><button data-color-scheme=bumblebee class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Bumblebee</span></button><button data-color-scheme=emerald class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Emerald</span></button><button data-color-scheme=nord class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Nord</span></button><button data-color-scheme=sunset class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Sunset</span></button><button data-color-scheme=abyss class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Abyss</span></button><button data-color-scheme=dracula class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Dracula</span></button><button data-color-scheme=amethyst class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Amethyst</span></button><button data-color-scheme=slate class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Slate</span></button><button data-color-scheme=twitter class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Twitter</span></button></div></div><div class=relative><button id=theme-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95" data-dropdown-type=theme aria-label="테마 변경" aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5 sun-icon hidden relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="라이트"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
<svg class="h-5 w-5 moon-icon hidden relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="다크"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg>
<svg class="h-5 w-5 system-icon hidden relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="시스템"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17 9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5A2 2 0 003 5v10a2 2 0 002 2z"/></svg></button><div id=theme-dropdown class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out" data-dropdown-type=theme><button data-theme=light class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
<svg class="h-5 w-5 mr-3 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="라이트"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg><span>라이트</span></button><button data-theme=dark class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
<svg class="h-5 w-5 mr-3 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="다크"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg><span>다크</span></button><button data-theme=system class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
<svg class="h-5 w-5 mr-3 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="시스템"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17 9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5A2 2 0 003 5v10a2 2 0 002 2z"/></svg><span>시스템</span></button></div></div></div></div><div class="flex w-full items-center justify-between md:hidden"><div class=relative><button id=mobile-menu-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:bg-accent hover:text-foreground flex h-10 w-10 items-center justify-center rounded-lg border transition-colors duration-200" data-dropdown-type=mobile-menu aria-label=메뉴 aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="메뉴"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button><div id=mobile-menu class="mobile-menu dropdown-menu border-border bg-popover/95 absolute top-12 left-0 z-[60] hidden w-80 max-w-[calc(100vw-2rem)] rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out md:hidden" data-dropdown-type=mobile-menu role=menu aria-labelledby=mobile-menu-toggle><nav class="flex flex-col"><a href=/ko/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-3 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 ease-out hover:translate-x-1 focus:ring-2 focus:outline-none" role=menuitem><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="nav.posts"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/></svg>
<span>게시글
</span></a><a href=/ko/categories/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-3 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 ease-out hover:translate-x-1 focus:ring-2 focus:outline-none" role=menuitem><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="nav.categories"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/></svg>
<span>카테고리
</span></a><a href=/ko/tags/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-3 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 ease-out hover:translate-x-1 focus:ring-2 focus:outline-none" role=menuitem><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="nav.tags"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512.0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828.0l-7-7A1.994 1.994.0 013 12V7a4 4 0 014-4z"/></svg>
<span>태그
</span></a><a href=/ko/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-3 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 ease-out hover:translate-x-1 focus:ring-2 focus:outline-none" role=menuitem><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="nav.archives"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/></svg>
<span>아카이브</span></a></nav></div></div><div class="flex items-center space-x-2"><div class=relative><button id=language-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95" data-dropdown-type=language aria-label="언어 변경" aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5 relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="언어 변경"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 8 6 6m-7 0 6-6 2-3M2 5h12M7 2h1m14 20-5-10-5 10m2-4h6"/></svg></button><div id=language-dropdown class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out" data-dropdown-type=language role=menu aria-labelledby=language-toggle><a href=/ko/ class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none" role=menuitem aria-current=true><span class=font-medium>한국어</span></a><a href=/en/ class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none" role=menuitem><span class=font-medium>English</span></a></div></div><div class=relative><button id=color-scheme-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95" data-dropdown-type=color-scheme aria-label="테마 변경" aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5 relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="테마 변경"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v6a2 2 0 002 2h4a2 2 0 002-2V5z"/></svg></button><div id=color-scheme-dropdown class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-44 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out" data-dropdown-type=color-scheme><button data-color-scheme=claude class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Default</span></button><button data-color-scheme=default class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>White</span></button><button data-color-scheme=bumblebee class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Bumblebee</span></button><button data-color-scheme=emerald class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Emerald</span></button><button data-color-scheme=nord class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Nord</span></button><button data-color-scheme=sunset class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Sunset</span></button><button data-color-scheme=abyss class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Abyss</span></button><button data-color-scheme=dracula class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Dracula</span></button><button data-color-scheme=amethyst class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Amethyst</span></button><button data-color-scheme=slate class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Slate</span></button><button data-color-scheme=twitter class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Twitter</span></button></div></div><div class=relative><button id=theme-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95" data-dropdown-type=theme aria-label="테마 변경" aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5 sun-icon hidden relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="라이트"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
<svg class="h-5 w-5 moon-icon hidden relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="다크"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg>
<svg class="h-5 w-5 system-icon hidden relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="시스템"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17 9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5A2 2 0 003 5v10a2 2 0 002 2z"/></svg></button><div id=theme-dropdown class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out" data-dropdown-type=theme><button data-theme=light class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
<svg class="h-5 w-5 mr-3 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="라이트"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg><span>라이트</span></button><button data-theme=dark class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
<svg class="h-5 w-5 mr-3 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="다크"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg><span>다크</span></button><button data-theme=system class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
<svg class="h-5 w-5 mr-3 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="시스템"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17 9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5A2 2 0 003 5v10a2 2 0 002 2z"/></svg><span>시스템</span></button></div></div></div></div></div></header><main class="mx-auto max-w-4xl px-4 py-6"><nav class="breadcrumb mb-4 md:mb-6 py-1" aria-label=경로><ol class="text-muted-foreground flex items-center space-x-1 md:space-x-2 text-sm overflow-x-auto whitespace-nowrap scrollbar-hide py-1"><li class=flex-shrink-0><a href=/ko/ class="text-muted-foreground hover:text-primary hover:bg-primary/10 flex items-center gap-0.5 md:gap-1 rounded-lg px-1 md:px-3 py-0.5 md:py-1.5 transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-[1.02]"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="홈"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m3 12 2-2m0 0 7-7 7 7M5 10v10a1 1 0 001 1h3m10-11 2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
<span class="max-w-[4rem] md:max-w-none truncate">홈</span></a></li><li class="flex items-center gap-1 md:gap-2 min-w-0"><span class="text-muted-foreground/50 flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg></span><div class="flex items-center gap-1 md:gap-2 min-w-0"><a href=/ko class="text-muted-foreground hover:text-primary hover:bg-primary/10 flex items-center gap-0.5 md:gap-1 rounded-lg px-1 md:px-3 py-0.5 md:py-1.5 transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-[1.02] flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5A2 2 0 003 7z"/></svg>
<span class="max-w-[4rem] md:max-w-none truncate">Ko</span>
</a><span class="text-muted-foreground/50 flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg></span>
<span class="text-foreground flex items-center gap-0.5 md:gap-1 font-medium min-w-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
<span class="max-w-[8rem] md:max-w-[16rem] lg:max-w-none truncate">DeepSeekMoE: Towards Ultimate Expert Specialization in Mixture-of-Experts Language Models</span></span></div></li></ol></nav><header class=mb-8><h1 class="text-foreground mb-4 text-3xl font-bold md:text-4xl">DeepSeekMoE: Towards Ultimate Expert Specialization in Mixture-of-Experts Language Models</h1></header><article class="prose prose-neutral dark:prose-invert max-w-none"><p><a href=https://arxiv.org/abs/2401.06066v1>논문 링크</a></p><h1 id=deepseekmoe-정리--dense-성능을-40--flops로-끌어낸-세분화-전문가-트릭>DeepSeekMoE 정리 – Dense 성능을 <strong>40 % FLOPs</strong>로 끌어낸 ‘세분화-전문가’ 트릭</h1><h2 id=한-줄-요약-tldr>한 줄 요약 (TL;DR)</h2><p><strong>Fine-Grained Expert Segmentation (FGES) + Shared Experts (SEI)</strong> 로 FFN-MoE를 재설계한 <strong>DeepSeekMoE</strong>는
동일 FLOPs에서 <strong>Dense 상한선의 95 %↑</strong> 성능을 달성하고, 16 B 모델 기준 <strong>LLaMA-2 7 B와 동급 품질을 연산량 0.4×</strong> 로 구현한다.</p><hr><h2 id=핵심-아이디어>핵심 아이디어</h2><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>전문가를 더 잘게 쪼개고(세분화), 공통 지식을 따로 모으며(공유 전문가), 부하를 이중으로 균형 잡으면</strong>
<strong>MoE도 Dense 모델처럼 잘</strong> — 아니, <strong>더 효율적으로</strong> — 동작한다.</p></div></blockquote><hr><h2 id=배경-그들이-해결한-문제>배경: 그들이 해결한 문제</h2><ol><li><p><strong>기존 MoE 병목</strong>
<em>Top-1/2</em> 라우팅 + <em>8 ~ 16</em> 전문가 →</p><ul><li><strong>지식 혼합</strong>: 한 전문가가 여러 주제를 학습</li><li><strong>지식 중복</strong>: 여러 전문가가 같은 공통 패턴을 반복</li></ul></li><li><p><strong>Dense ≥ MoE 딜레마</strong>
전문가 수를 늘리면 파라미터는 풍부해지지만 <strong>활성 파라미터·FLOPs</strong> 가 그대로라 <strong>성능 상한이 낮다.</strong></p></li></ol><hr><h2 id=새로운-접근법-deepseekmoe>새로운 접근법: <strong>DeepSeekMoE</strong></h2><table><thead><tr><th>구성 요소</th><th>무엇을 하나?</th><th>왜 중요한가?</th></tr></thead><tbody><tr><td><strong>Fine-Grained Expert Segmentation (FGES)</strong></td><td>FFN 하나를 <em>m</em> 개 소(小)-전문가로 쪼개고, 토큰당 활성 전문가 수도 <em>mK</em> 로 확대</td><td>전문가 조합 수 120 → <strong>4.4 G</strong> (≈37 M×) ↑</td></tr><tr><td><strong>Shared Expert Isolation (SEI)</strong></td><td><em>Kₛ</em> 개 공유 전문가를 항상 ON → 공통 지식 전담</td><td>파라미터 중복 ↓, 토큰별 전문화 ↑</td></tr><tr><td><strong>Dual-Level Load-Balancing Loss</strong></td><td>전문가-수준 + 디바이스-수준 부하 균형</td><td>145 B까지 <strong>라우팅 붕괴 0 %</strong>, GPU FLOPs 편차 &lt; 5 %</td></tr></tbody></table><hr><h2 id=작동-원리-구체적인-예시로-살펴보기>작동 원리: 구체적인 예시로 살펴보기</h2><details><summary>🎲 3 × 3 픽셀 toy 예시 (N = 2, m = 2, K = 1, Kₛ = 1)</summary><table><thead><tr><th>단계</th><th>진행</th><th>결과</th></tr></thead><tbody><tr><td><strong>1. Affinity</strong></td><td>각 토큰 × 4 전문가 유사도 <code>sᵢ,ₜ</code> 계산</td><td>2 × 치수 dot-product</td></tr><tr><td><strong>2. 선택</strong></td><td>공유 e₁ + 추가 Top-1 선택</td><td>토큰 u₁ → {e₁,e₂}, u₂ → {e₁,e₃} …</td></tr><tr><td><strong>3. 계산</strong></td><td><code>hₜ = Σ gᵢ,ₜ FFNᵢ(uₜ) + uₜ</code></td><td>게이트 gᵢ,ₜ 로 가중합</td></tr><tr><td><strong>4. 균형 로스</strong></td><td>전문가·GPU FLOPs 편차 최소화</td><td>라우팅 붕괴 방지</td></tr></tbody></table></details><p><strong>요점</strong> – 세분화 덕분에 <strong>하나의 토큰이 동시에 더 많은 전문 지식</strong> 을 결합하고, 공유 전문가가 공통 패턴을 흡수해 <strong>중복을 없앤다.</strong></p><hr><h2 id=성능-검증-주요-결과>성능 검증: 주요 결과</h2><table><thead><tr><th>모델</th><th>FLOPs/4k tok</th><th>Activated Params</th><th>HellaSwag Acc.↑</th><th>HumanEval Pass@1↑</th></tr></thead><tbody><tr><td><strong>Dense 7 B</strong></td><td>188 T</td><td>6.7 B</td><td>75.6</td><td>14.6</td></tr><tr><td><strong>DeepSeekMoE 16 B</strong></td><td><strong>74 T (0.40×)</strong></td><td><strong>2.8 B</strong></td><td><strong>77.1 (+1.5)</strong></td><td><strong>26.8 (+84 %)</strong></td></tr><tr><td><strong>Dense Upper-Bound (2 B ×16 FFN)</strong></td><td>24.6 T</td><td>1.9 B</td><td>54.8</td><td>4.9</td></tr><tr><td><strong>DeepSeekMoE 2 B</strong></td><td><strong>4.3 T (0.17×)</strong></td><td>0.24 B</td><td><strong>54.8 (=)</strong></td><td><strong>4.9 (=)</strong></td></tr></tbody></table><ul><li>16 B 모델, <strong>단일 A100-40 GB</strong> 추론 가능 → <strong>2.5× 토큰/초</strong></li><li>145 B 예비 모델, <strong>Dense 67 B</strong> 동급 품질을 <strong>FLOPs 0.285×</strong> 로 재현</li></ul><hr><h2 id=우리의-관점-강점-한계-그리고-이-연구가-중요한-이유>우리의 관점: 강점, 한계, 그리고 이 연구가 중요한 이유</h2><h3 id=-강점>👍 강점</h3><ol><li><strong>연산-효율 Pareto 재정의</strong> – Dense 대비 <strong>60 %↓ FLOPs</strong> 로 동급·우위 성능.</li><li><strong>하드웨어 친화성</strong> – 활성 파라미터 소수 → 중급 GPU에서도 대모델 추론 가능.</li><li><strong>스케일 확장성</strong> – Dual-loss 덕분에 145 B·128 expert까지 <strong>선형에 가까운</strong> 스루풋.</li></ol><h3 id=-한계>⚠️ 한계</h3><ul><li><strong>Attention 용량 부족</strong> – MMLU·CEval 등 MCQ 과제는 Dense 7 B보다 -3 ~ -5 pp.</li><li><strong>라우팅 오버헤드</strong> – 게이트 계산·All-to-All 통신이 추론 FLOPs ≈ 8 % 추가.</li><li><strong>핫-전문가 bottleneck</strong> – 공유 expert가 길이↑ 시 지연을 유발할 수 있음.</li></ul><h3 id=-왜-중요한가>🌟 왜 중요한가?</h3><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>“MoE=성능↓, 효율↑” 공식을 깨고, “MoE가 Dense 상한 성능까지 도달”</strong> 할 수 있음을 실험으로 입증했다. 이것은 <strong>대-모델 비용 장벽을 실용적으로 낮추는</strong> 길을 연다.</p></div></blockquote><hr><h2 id=다음-단계는-앞으로의-길>다음 단계는?: 앞으로의 길</h2><ol><li><strong>Attention 증강</strong> – GQA·Flash-Sparse Attention 결합해 MCQ 성능 보완.</li><li><strong>Dynamic Shared-Expert Pool</strong> – 핫-전문가 병목을 완화하고 장문 디코딩 가속.</li><li><strong>Topology-Aware Routing</strong> – 통신량 30 %↓ 가능한 계층적 라우팅 연구.</li><li><strong>Privacy & Safety</strong> – Expert-level DP 재학습, 편향·저작권 데이터 카드 공개.</li><li><strong>145 B 완전 학습 & 오픈</strong> – 커뮤니티 SOTA 기준점으로 자리매김 기대.</li></ol><hr><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><em>DeepSeekMoE는 “같은 돈으로 더 빠르고, 같은 속도로 더 똑똑한” 모델의 가능성을 보여준다. 앞으로 <strong>attention-heavy 작업과 시스템 최적화</strong>를 어떻게 풀어내느냐가 관건이다.</em></p></div></blockquote><hr><h3 id=토글을-클릭하면-논문에-대한-자세한-llm-질의응답-내용을-확인할-수-있습니다>토글을 클릭하면 논문에 대한 자세한 LLM 질의응답 내용을 확인할 수 있습니다.</h3><details markdown=block><summary>▶️<strong>클릭하여 펼치기</strong></summary><h1 id=프롬프트-111-연구의-공백>프롬프트 1.1.1 (연구의 공백)</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-0 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-0 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-0><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;논문의 &#39;Introduction&#39;과 &#39;Related Work&#39; 섹션을 분석하여, 이 연구가 명시적으로 해결하고자 하는 핵심적인 연구 공백(research gap), 기존 연구의 결정적 한계, 또는 미해결 질문이 무엇인지 설명해 줘. 저자들이 설명하는, 이 논문 출판 시점의 &#39;최신 기술(state of the art)&#39;은 어떤 상태였는지 요약해 줘.&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-0",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=-한눈에-보는-결론-tldr--research-gap>🗝️ 한눈에 보는 결론 (TL;DR – Research Gap)</h2><p>기존 <strong>MoE-Transformer</strong>들은 <em>토큰당 활성화되는 전문가 수(Top-1/Top-2)</em> 가 적어 <strong>전문가 간 지식 중첩·혼합</strong>이 심각했고, 따라서 <strong>밀집(dense) 모델 상한선(Upper-bound)</strong> 에 근접하지 못했다.
DeepSeekMoE는</p><ol><li><strong>전문가 세분화(Fine-grained Segmentation, 1 → <em>m</em> 배)</strong></li><li><strong>공유 전문가 고정(Shared Experts, Kₛ)</strong>
이라는 두 가지 설계로 <strong>“궁극적 전문가 전문화(Ultimate Expert Specialization)”</strong> 문제를 정조준한다. 결과적으로 <em>동등 FLOPs 대비</em> <strong>GShard보다 최대 +2.4 ~ +4.9 pp</strong>(ARC-easy/HellaSwag) 성능을 내며, <strong>활성 파라미터는 60 % 이상 줄여</strong> LLaMA-2 7B와 비슷한 성능을 달성한다.</li></ol><hr><h3 id=1-연구-공백research-gap--무엇이-비어-있었나>1. 연구 공백(Research Gap) — 무엇이 비어 있었나?</h3><table><thead><tr><th>관점</th><th>기존 방법</th><th>한계/미해결 질문</th><th>DeepSeekMoE의 해결책</th></tr></thead><tbody><tr><td><strong>전문가 수</strong></td><td>8 ~ 16개 FFN 전문가, Top-1/2 라우팅(GShard, Switch)</td><td>▹ 한 전문가가 <em>다양한</em> 토큰을 학습 → <strong>지식 혼합(Hybridity)</strong><br>▹ 여러 전문가가 <em>같은</em> 기초 지식 반복 학습 → <strong>지식 중복(Redundancy)</strong></td><td><strong>m-way 세분화</strong> → 전문가 수 × m, 활성 전문가 수도 × m → 토큰별 조합 $<em>64C8 ≈ 4.4 × 10⁹</em>$ 으로 폭증</td></tr><tr><td><strong>공통 지식 처리</strong></td><td>모든 전문가가 공통·전문 정보를 혼합 학습</td><td>공통 지식이 여러 전문가에 중복 저장 → <strong>파라미터 비효율</strong></td><td><strong>Kₛ개 공유 전문가</strong>를 항상 활성화 → 공통 지식 집중·중복 제거</td></tr><tr><td><strong>로드 밸런스</strong></td><td>라우팅 불안정 → <em>routing collapse</em> 위험</td><td>전문가/디바이스 간 부하 편중</td><td><strong>이중 균형 로스</strong>(Expert-level α₁, Device-level α₂) 도입</td></tr></tbody></table><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p>📌 핵심 질문: <em>“적은 FLOPs로 dense upper-bound에 얼마나 근접할 수 있는가?”</em></p></div></blockquote><hr><h3 id=2-당시-최신-기술state-of-the-art-요약>2. 당시 최신 기술(State of the Art) 요약</h3><table><thead><tr><th>계열</th><th>대표 모델 & 규모</th><th>라우팅 방식</th><th>FLOPs 대비 Activ. Params</th><th>한계</th></tr></thead><tbody><tr><td><strong>GShard</strong></td><td>600 B~1 T(Top-2)</td><td>Learnable Top-2</td><td>FLOPs ↑(2× FFN)<br>Activ. ≈ 0.3 B @2 B total</td><td>지식 혼합·중복, load collapse</td></tr><tr><td><strong>Switch Transformer</strong></td><td>1.6 T(Top-1)</td><td>Learnable Top-1</td><td>Activ. = 1× FFN</td><td>토큰-전문가 매칭 단순 → 표현력↓</td></tr><tr><td><strong>Hash Layer</strong></td><td>10 B(Top-1 Hash)</td><td>Fixed Hash</td><td>Activ. = 1× FFN</td><td>라우팅 고정 → 적응력↓</td></tr><tr><td><strong>ST-MoE / GLAM</strong></td><td>64 B~1 T(Top-k, Aux. Loss)</td><td>안정화 기법 추가</td><td>Activ. 1~2× FFN</td><td>전문가 전문화 부족</td></tr></tbody></table><p>이처럼 <strong>“전문가 전문화 부족 + 파라미터 중복”</strong> 문제가 공통 병목으로 남아 있었다. DeepSeekMoE는 <strong>전문가 세분화(최대 4 ×) + 공유 전문가 격리</strong> 로 이 갭을 해소하며,</p><ul><li><strong>2 B 실험</strong>에서 <em>GShard 동일 FLOPs</em> 대비 <strong>평균 +3.2 pp</strong>,</li><li><strong>16 B 모델</strong>에서 <strong>LLaMA-2 7B와 동급 성능</strong>을 <strong>FLOPs 0.40×</strong> 로 달성한다.</li></ul><h1 id=프롬프트-112-핵심-가설>프롬프트 1.1.2 (핵심 가설)</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-1 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-1 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-1><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;이 논문의 중심 가설(central hypothesis) 또는 핵심 주장은 무엇인가? &#39;저자들은 [제안 기법]을 사용함으로써 [기존 한계점]을 극복하는 [구체적 결과]를 달성할 수 있다고 가정한다&#39;와 같은 형식으로, 명확하고 간결한 한 문장으로 서술해 줘.&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-1",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h3 id=-central-hypothesis>🚀 Central Hypothesis</h3><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p>**저자들은 _fine-grained expert segmentation_과 _shared expert isolation_으로 구성된 <strong>DeepSeekMoE</strong> 아키텍처를 도입함으로써, 기존 MoE 모델의 전문가 지식 혼합·중복 및 파라미터 비효율 한계를 극복하고, 동일 FLOPs에서 밀집(dense) 모델 성능 상한선에 근접—예컨대 2 B 모델이 GShard 2 B보다 ≈ +3 pp, 16 B 모델이 LLaMA-2 7B와 동급 성능을 연산량 0.4×로 달성—할 수 있다고 가정한다.</p></div></blockquote><h1 id=프롬프트-121-독창성-식별>프롬프트 1.2.1 (독창성 식별)</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-2 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-2 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-2><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl> &#34;논문 전체를 바탕으로, 가장 중요하고 독창적인 기여(contribution) 1~3가지를 구별되는 항목으로 나열해 줘. 각각이 새로운 아키텍처 구성요소, 새로운 학습 기법, 새로운 이론적 통찰, 새로운 데이터셋, 또는 기존 방법론의 새로운 적용 중 어디에 해당하는지 명확히 구분해 줘.&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-2",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h3 id=-tldr--deepseekmoe의-독창적-공헌-3가지>🚩 TL;DR — DeepSeekMoE의 독창적 공헌 3가지</h3><p><em>두 가지 아키텍처 혁신 + 한 가지 학습 안정화 기법으로 “궁극적 전문가 전문화(ultimate expert-specialization)”를 실현한다.</em></p><table><thead><tr><th>#</th><th>핵심 기여</th><th>분류</th><th>왜 중요한가? (수치·지표)</th></tr></thead><tbody><tr><td><strong>1</strong></td><td><strong>Fine-Grained Expert Segmentation (FGES)</strong><br>– 기존 FFN 전문가를 <em>m</em> 배로 세분화하고 Top-k 활성 전문가 수도 <em>m</em> 배로 확장</td><td><strong>새로운 아키텍처 구성요소</strong></td><td>조합 가능 전문가 집합이 Top-2(16C2 = 120) → FGES(64C8 ≈ 4.4 × 10⁹)로 <strong>3.7 × 10⁷배</strong> 증가하여 토큰-전문가 매핑 표현력을 극대화</td></tr><tr><td><strong>2</strong></td><td><strong>Shared Expert Isolation (SEI)</strong><br>– Kₛ개 공유 전문가를 항상 활성화해 공통 지식을 전담, 나머지 전문가들은 순수 전문 지식만 학습</td><td><strong>새로운 아키텍처 구성요소</strong></td><td>파라미터 중복을 억제해 같은 2 B 모델에서도 <strong>GShard 대비 +3 pp</strong>(ARC-easy 등 12 벤치 평균) 성능 향상, 활성 파라미터 60 % 절감</td></tr><tr><td><strong>3</strong></td><td><strong>Dual-Level Load-Balancing Loss</strong><br>– Expert-level(α₁) + Device-level(α₂) 균형 로스로 토큰 분배 불균형·라우팅 붕괴 방지</td><td><strong>새로운 학습 기법</strong></td><td>전문가당 선택 편차를 <strong>N·T⁻¹ 수준으로 균등화</strong>하면서도 디바이스 간 FLOPs 오차 &lt; 5 % 유지 → 대규모(145 B) 실험에서도 안정 수렴</td></tr></tbody></table><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p>📌 결과적으로 DeepSeekMoE <strong>16 B</strong>는 <strong>LLaMA-2 7 B</strong>와 맞먹는 성능을 **연산량 0.4×**로 달성하고, <strong>145 B</strong> 모델은 Dense 67 B 수준을 **FLOPs 28.5 %**로 재현한다 .</p></div></blockquote><h1 id=프롬프트-122-저자-관점에서의-강점>프롬프트 1.2.2 (저자 관점에서의 강점)</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-3 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-3 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;저자들의 관점에서, 자신들의 접근법이 이전 방법들보다 우월한 이유는 무엇인가? 그들이 자신들의 연구가 지닌 독창성과 강점을 뒷받침하기 위해 사용하는 핵심 논거를 인용하거나 알기 쉽게 설명해 줘.&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-3",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=-핵심-요약>✨ 핵심 요약</h2><p>DeepSeekMoE가 <strong>기존 MoE-Transformer의 성능·효율 한계를 근본적으로 넘어선다</strong>고 저자들이 주장하는 이유는 <strong>(1) 전문가 전문화 수준의 급진적 향상, (2) 파라미터‧연산량 대비 압도적 성능, (3) 대규모 분산 학습의 안정성</strong>—이 세 축에서 모두 우월함을 <strong>정량적으로 입증</strong>했기 때문이다.</p><hr><h3 id=1-왜-우리-방식이-더-낫나--저자들의-핵심-논거-3가지>1. “왜 우리 방식이 더 낫나?” — 저자들의 핵심 논거 3가지</h3><table><thead><tr><th>#</th><th>저자 주장</th><th>뒷받침 증거(수치·표)</th><th>근거 구절</th></tr></thead><tbody><tr><td><strong>① 전문가 전문화 ↗</strong><br>FGES + SEI로 <em>지식 혼합·중복</em> 제거</td><td><em>조합 가능한 전문가 집합</em> 120→4.4 G(+37 M×) <strong>표현력 폭증</strong> → 같은 2 B 모델에서 GShard 대비 <strong>평균 +3 pp</strong> (ARC-easy 등 12벤치) 성능</td><td>“Fine-grained segmentation yields 4,426,165,368 potential expert combinations … DeepSeekMoE 2 B surpasses GShard 2 B by a substantial margin”</td><td></td></tr><tr><td><strong>② 연산·파라미터 효율 ↗</strong></td><td><strong>16 B 모델</strong>이 LLaMA-2 7 B와 <strong>동급 성능</strong>을 **FLOPs 0.40×**로 달성; <strong>145 B 모델</strong>이 Dense 67 B와 맞먹는 성능을 **FLOPs 0.285×**로 달성</td><td>“With only 40 % computations, DeepSeekMoE 16 B achieves comparable performance … DeepSeekMoE 145 B matches DeepSeek 67 B with just 28.5 % computations”</td><td></td></tr><tr><td><strong>③ 대규모 학습 안정성 ↗</strong><br>Dual-Level Load-Balance Loss</td><td>전문가·디바이스 간 FLOPs 편차 <strong>&lt; 5 %</strong>, 라우팅 붕괴 없이 145 B까지 안정 수렴</td><td>“We set small α₁ and larger α₂ … balanced computation across devices and prevent routing collapse”</td><td></td></tr></tbody></table><hr><h3 id=2-저자들이-강조하는-독창성--성능-논리-흐름>2. 저자들이 강조하는 ‘독창성 → 성능’ 논리 흐름</h3><ol><li><p><strong>근본 원인 진단</strong></p><ul><li>기존 Top-1/2 MoE는 전문가 수가 적어 <strong>토큰별 지식이 한 덩어리로 섞여</strong> 전문화가 불가능했다.</li></ul></li><li><p><strong>아키텍처 혁신 → 표현력 확대</strong></p><ul><li><strong>Fine-Grained Expert Segmentation</strong>: FFN을 m배 쪼갠 뒤 활성 전문가 수도 m배 늘려 <strong>정밀 조합</strong>을 가능케 함</li><li><strong>Shared Expert Isolation</strong>: 공통 지식을 전담할 <strong>Kₛ개 공유 전문가</strong>를 항상 활성화해 <strong>파라미터 중복 제거</strong></li></ul></li><li><p><strong>학습 안정화 → 대규모 확장</strong></p><ul><li><strong>Dual-Level Balance Loss</strong>로 전문가·디바이스 양쪽 부하 균형을 동시에 맞춰 <strong>145 B도 무사히 학습</strong></li></ul></li><li><p><strong>정량적 검증</strong></p><ul><li>동일 FLOPs 조건에서 <strong>Dense Upper-Bound 근접</strong>: 2 B 모델이 Dense×16 상한선에 거의 근접</li><li><strong>파라미터 효율성</strong>: 16 B 모델 활성 파라미터 22 B → 성능은 6.7 B dense 모델과 유사, 연산량 60 % 절감</li></ul></li></ol><hr><h3 id=3-한-눈-요약-포인트-숫자로-말하는-deepseekmoe>3. 한-눈-요약 포인트 (숫자로 말하는 DeepSeekMoE)</h3><table><thead><tr><th>지표</th><th>기존 GShard 2 B</th><th><strong>DeepSeekMoE 2 B</strong></th><th>기존 Dense 7 B</th><th><strong>DeepSeekMoE 16 B</strong></th></tr></thead><tbody><tr><td>Activated Params</td><td>0.2 B</td><td><strong>0.24 B</strong></td><td>6.7 B</td><td><strong>22 B</strong></td></tr><tr><td>FLOPs/2K tok</td><td>2.9 T</td><td><strong>2.9 T (동일)</strong></td><td>5.2 T</td><td><strong>2.1 T (-60 %)</strong></td></tr><tr><td>Avg. 12-bench Acc.</td><td>49.1</td><td><strong>54.8 (+5.7)</strong></td><td>—</td><td><strong>≥7 B dense 동급</strong></td></tr></tbody></table><p>데이터 출처: Table 1·4·5</p><hr><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p>💡 <strong>정리</strong> 저자들은 “<strong>전문가를 더 잘게 나누고, 공통 지식을 한데 모으며, 균형 있게 학습</strong>하면 <strong>MoE도 Dense 수준까지 올라갈 수 있다</strong>”는 점을 수치로 입증하며, 이를 DeepSeekMoE만의 결정적 강점으로 제시한다.</p></div></blockquote><h1 id=프롬프트-131-알고리즘-단계별-설명>프롬프트 1.3.1 (알고리즘 단계별 설명)</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-4 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-4 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;핵심 알고리즘, 모델 아키텍처, 또는 주요 방법론을 단계별(step-by-step)로 설명해 줘. 독자는 AI 분야의 대학원생 수준이라고 가정해. 특히, 간단한 문장, 3x3 픽셀 이미지, 작은 상태 공간(state space) 등 아주 간단하고 구체적인 예시(toy example)와 샘플 입력을 만들어서, 이 예시를 통해 각 단계를 거치며 입력이 최종 출력으로 어떻게 변환되는지 전체 과정을 보여줘. 등장하는 모든 핵심 용어와 변수는 그 즉시 정의해 줘.&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-4",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=-핵심-알고리즘-한눈에-요약>🏁 핵심 알고리즘 한눈에 요약</h2><p><strong>DeepSeekMoE 레이어</strong>는</p><ol><li><strong>Fine-Grained Expert Segmentation</strong>으로 기존 FFN 1개를 <em>m</em>개 소(小)-전문가로 쪼개고,</li><li><strong>Shared Expert Isolation</strong>으로 <em>Kₛ</em>개 “공통 전문가”를 항상 활성화하며,</li><li><strong>Dual-Level Load-Balancing Loss</strong>로 전문가·디바이스 부하를 동시에 평준화한다.
이를 통해 토큰당 선택 가능한 전문가 조합이 Top-2(16C2 = 120) → FGES(64C8 ≈ 4.4 × 10⁹)로 <strong>3.7 × 10⁷배</strong> 증가하고, 라우팅 붕괴 없이 145 B 모델까지 안정 학습된다 .</li></ol><hr><h2 id=1-용어--변수-정의>1️⃣ 용어 & 변수 정의</h2><table><thead><tr><th>기호</th><th>의미</th></tr></thead><tbody><tr><td><em>N</em></td><td>원본 FFN 전문가 수</td></tr><tr><td><em>m</em></td><td>한 FFN을 분할하는 세분화 계수</td></tr><tr><td><em>mN</em></td><td>총 세분화 전문가 수</td></tr><tr><td><em>K</em></td><td>토큰당 활성화할 기존 전문가 수(Top-<em>K</em>)</td></tr><tr><td><em>mK</em></td><td>세분화 후 토큰당 활성화할 전문가 수</td></tr><tr><td><em>Kₛ</em></td><td>항상 활성화되는 <strong>공유(shared) 전문가</strong> 수</td></tr><tr><td><strong>u</strong>ᶩₜ</td><td>레이어 <em>l</em>에서 토큰 <em>t</em>의 입력 벡터</td></tr><tr><td><strong>e</strong>ᶩᵢ</td><td>레이어 <em>l</em>에서 <em>i</em>번째 전문가의 라우팅 centroid</td></tr><tr><td><em>s</em>ᵢ,ₜ</td><td>토큰-전문가 affinity (softmax 점수)</td></tr><tr><td><em>g</em>ᵢ,ₜ</td><td>실제 게이트 값 (<em>s</em>ᵢ,ₜ 또는 0)</td></tr></tbody></table><hr><h2 id=2-단계별-파이프라인-toy-example->2️⃣ 단계별 파이프라인 (Toy Example 🎲)</h2><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>세팅</strong></p><ul><li><strong>세분화:</strong> <em>N</em> = 2, <em>m</em> = 2 ⟹ 총 전문가 <em>mN</em> = 4</li><li><strong>활성화:</strong> Top-<em>mK</em> = 2, 이중 1개는 항상 활성화(<em>Kₛ</em> = 1)</li><li><strong>입력:</strong> 3 × 3 그레이스케일 이미지의 첫 행 → 토큰 3개
<code>u₁=[0.2, 0.6]</code>, <code>u₂=[0.9, 0.1]</code>, <code>u₃=[-0.2, 0.8]</code> (벡터 차원 <em>d</em> = 2)</li><li><strong>전문가 centroids</strong>
<code>e₁=[0.5, 0.5]</code>(공유) <code>e₂=[0.1, 0.9]</code> <code>e₃=[0.9, 0.1]</code> <code>e₄=[-0.3, 0.7]</code></li></ul></div></blockquote><h3 id=step-0토큰-임베딩>Step 0 토큰 임베딩</h3><p>입력 픽셀 값을 저차원 벡터 <strong>u</strong>ᶩₜ로 매핑. (예시는 이미 2-차원으로 가정)</p><h3 id=step-1affinity-계산>Step 1 Affinity 계산</h3><p>각 토큰·전문가 쌍에 대해
<code>sᵢ,ₜ = softmax_i(uₜᵀ eᵢ)</code></p><table><thead><tr><th>토큰</th><th>s₁</th><th>s₂</th><th>s₃</th><th>s₄</th></tr></thead><tbody><tr><td><strong>u₁</strong></td><td>0.25</td><td><strong>0.29</strong></td><td>0.21</td><td>0.24</td></tr><tr><td><strong>u₂</strong></td><td>0.28</td><td>0.20</td><td><strong>0.38</strong></td><td>0.14</td></tr><tr><td><strong>u₃</strong></td><td>0.22</td><td><strong>0.33</strong></td><td>0.15</td><td>0.30</td></tr></tbody></table><h3 id=step-2전문가-선택>Step 2 전문가 선택</h3><ul><li><strong>항상 포함:</strong> 공유 e₁</li><li><strong>추가 선택:</strong> affinity 상위 1개 (Top-(mK-Kₛ)=1)</li></ul><table><thead><tr><th>토큰</th><th>최종 활성 전문가 집합</th></tr></thead><tbody><tr><td>u₁</td><td>{e₁, e₂}</td></tr><tr><td>u₂</td><td>{e₁, e₃}</td></tr><tr><td>u₃</td><td>{e₁, e₂}</td></tr></tbody></table><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>게이트 값</strong> gᵢ,ₜ = sᵢ,ₜ for 선택된 전문가, else 0.</p></div></blockquote><h3 id=step-3전문가-ffn-처리>Step 3 전문가 FFN 처리</h3><p>각 선택된 전문가 FFNᵢ(<strong>·</strong>)에 입력 후 결과를 게이트로 가중합:</p><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-5 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-5 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-5><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln> 1</span><span class=cl>hₜ = Σᵢ gᵢ,ₜ · FFNᵢ(uₜ) + uₜ     (Residual)
</span></span><span class=line><span class=ln> 2</span><span class=cl>``` :contentReference[oaicite:2]{index=2}  
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl>(숫자 예시는 생략하지만, 실제로는 각 FFN이 2→4→2 계층의 작은 MLP.)
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl>### Step 4 다음 Transformer 블록으로 전달  
</span></span><span class=line><span class=ln> 7</span><span class=cl>산출 **h**ₜ는 Self-Attention → LayerNorm 등 표준 경로로 이어진다.
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl>### Step 5 학습 시 부하 균형  
</span></span><span class=line><span class=ln>10</span><span class=cl>- **전문가 수준**:  
</span></span><span class=line><span class=ln>11</span><span class=cl>  `L_ExpBal = α₁ Σᵢ fᵢ·Pᵢ`  
</span></span><span class=line><span class=ln>12</span><span class=cl>  where `fᵢ`=선택 빈도, `Pᵢ`=평균 게이트 :contentReference[oaicite:3]{index=3}  
</span></span><span class=line><span class=ln>13</span><span class=cl>- **디바이스 수준**:  
</span></span><span class=line><span class=ln>14</span><span class=cl>  `L_DevBal = α₂ Σ_d f′_d·P′_d` (전문가 그룹을 GPU에 매핑)  
</span></span><span class=line><span class=ln>15</span><span class=cl>&gt; α₁ ≪ α₂ 로 설정하여 **라우팅 붕괴**를 방지하면서도 GPU 간 FLOPs 편차 &lt; 5 % 유지.
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl>---
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl>## 3️⃣ 왜 세분화 &amp; 공유가 중요한가?
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>| 구성 | 조합 수 (K=2 기준) | 토큰별 지식 표현력 | 파라미터 중복 |
</span></span><span class=line><span class=ln>22</span><span class=cl>|------|-------------------|--------------------|---------------|
</span></span><span class=line><span class=ln>23</span><span class=cl>| 기존 Top-2 (N=16) | 120 | 제한적 | 높음 |
</span></span><span class=line><span class=ln>24</span><span class=cl>| **FGES (m=4)** | **4.4 × 10⁹** | **↑ 37 M×** | 동일 |
</span></span><span class=line><span class=ln>25</span><span class=cl>| **FGES + SEI** | 동일 | **↑ &amp; 공통 지식 집중** | **↓** |
</span></span><span class=line><span class=ln>26</span><span class=cl>
</span></span><span class=line><span class=ln>27</span><span class=cl>&gt; 실험적으로 **2 B 모델**이 동일 FLOPs에서 GShard 2 B 대비 **+3 pp** 평균 성능을, **16 B**는 LLaMA-2 7 B와 동급 성능을 **연산량 0.4×**로 달성 .  
</span></span><span class=line><span class=ln>28</span><span class=cl>
</span></span><span class=line><span class=ln>29</span><span class=cl>---
</span></span><span class=line><span class=ln>30</span><span class=cl>
</span></span><span class=line><span class=ln>31</span><span class=cl>## 4️⃣ 흐름도 요약</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-5",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><pre><code>  ┌───────── Router (affinity sᵢ,ₜ) ─────────┐
</code></pre><p>uₜ ──▶ Emb ──▶ Select {shared Kₛ} ∪ Top-(mK−Kₛ) ──▶ Σ gᵢ,ₜ·FFNᵢ(uₜ) ──▶ hₜ
│ ▲ │
└─ Dual-Level Balance Loss (α₁, α₂) ◀─────┘</p><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-6 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-6 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-6><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>
</span></span><span class=line><span class=ln>2</span><span class=cl>---
</span></span><span class=line><span class=ln>3</span><span class=cl>
</span></span><span class=line><span class=ln>4</span><span class=cl>### 📌 기억할 점
</span></span><span class=line><span class=ln>5</span><span class=cl>- **세분화로 표현력 극대화**, **공유 전문가로 중복 제거**, **이중 균형 로스로 안정 학습**.  
</span></span><span class=line><span class=ln>6</span><span class=cl>- 숫자 toy example은 개념 증명용 ↔ 실제 모델은 수천 ~ 수만 전문가·수백 차원 hidden으로 확장된다.  
</span></span><span class=line><span class=ln>7</span><span class=cl>
</span></span><span class=line><span class=ln>8</span><span class=cl>---</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-6",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h1 id=프롬프트-132-비밀-병기-식별>프롬프트 1.3.2 (&lsquo;비밀 병기&rsquo; 식별)</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-7 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-7 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-7><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;이 논문의 핵심 기여를 가능하게 하는 가장 결정적인 단일 수학 공식, 알고리즘 단계, 또는 아키텍처 구성요소를 식별해 줘. 그것의 기능과, 그것이 이 방법론의 성공에 왜 필수적인지 설명해 줘.&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-7",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=-비밀-병기--fine-grained-expert-segmentation-fges--확장-top->🧩 ‘비밀 병기’ — <strong>Fine-Grained Expert Segmentation (FGES) + 확장 Top-<em>mK</em> 게이팅</strong></h2><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><ins>핵심 수식</ins> (논문 식 6–8)</p><p>$$
h^{(l)}<em>t ;=; \sum</em>{i=1}^{mN} g_{i,t},\text{FFN}<em>i!\bigl(u^{(l)}<em>t\bigr) + u^{(l)}<em>t,\qquad<br>g</em>{i,t}=\begin{cases}
s</em>{i,t}, & s</em>{i,t}\in\text{Top}<em>k!\bigl({s</em>{j,t}}<em>{j=1}^{mN},,mK\bigr)\[2pt]
0, & \text{otherwise}
\end{cases},\qquad<br>s</em>{i,t}=\text{softmax}_i!\bigl((u^{(l)}_t)^\top e^{(l)}_i\bigr)
$$</p></div></blockquote><h3 id=1-무엇을-하나>1️⃣ 무엇을 하나?</h3><ul><li><p><strong>세분화</strong> 원래 FFN 전문가 <em>N</em> 개를 각자 <em>m</em> 개의 “소(小)-전문가”로 나누어 총 <em>mN</em> 개로 확장.</p></li><li><p><strong>게이팅</strong> 토큰당 활성 전문가 수도 Top-<em>K</em> → Top-<em>mK</em> 로 늘려, <strong>한 토큰이 동시에 보고 학습할 수 있는 전문 지식의 조합</strong>을 폭발적으로 확대.</p><ul><li>예: <em>N</em>=16, <em>K</em>=2, <em>m</em>=4 이면 조합 수가 120 → 4 426 165 368 (≈ 3.7 × 10⁷ 배) .</li></ul></li></ul><h3 id=2-왜-deepseekmoe의-성공에-필수적인가>2️⃣ 왜 DeepSeekMoE의 성공에 필수적인가?</h3><ol><li><strong>전문가 전문화 극대화</strong> — 다양한 지식을 미시적으로 쪼개 각기 다른 전문가에 학습시켜 <strong>지식 혼합·중복을 원천 차단</strong>.</li><li><strong>파라미터·FLOPs 보존</strong> — 세분화 때 FFN hidden dim을 1/<em>m</em> 로 줄여 <strong>총 파라미터와 연산량은 그대로</strong> 유지하므로 “공짜로” 표현력을 얻는다.</li><li><strong>Dense Upper-Bound 근접</strong> — 동일 2 B FLOPs에서 GShard 2 B보다 평균 <strong>+3 pp</strong> 정확도 향상; 16 B 모델은 LLaMA-2 7 B를 <strong>연산량 0.4×</strong> 로 재현 .</li></ol><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p>요컨대, <strong>FGES + 확장 게이팅</strong>이 없었다면 DeepSeekMoE는 전문가가 충분히 ‘쪼개지지’ 않아 여전히 지식 중첩의 한계에 머물렀을 것이다. 이 한 수식이 전체 아키텍처의 표현력·효율·성능 도약을 <strong>근본적으로 결정</strong>한다.</p></div></blockquote><h1 id=프롬프트-1400코드-예시>프롬프트 1.4.0.0(코드 예시)</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-8 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-8 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-8><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>기존이랑 어떻게 변경이 되는 혹시 파이썬 코드 예시로 설명을 해줄 수 있겠니?</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-8",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=-한줄-결론>🗝️ 한줄 결론</h2><p><strong>Baseline Top-K MoE</strong>는 <em>N</em>개 FFN 중 <strong>K (=1‒2)</strong> 개만 열고, <strong>DeepSeekMoE</strong>는 각 FFN을 <em>m</em>배 세분화해 <strong>mK+Kₛ</strong> 개를 열어도 <strong>FLOPs·파라미터는 그대로</strong>이며 평균 <strong>+3 pp</strong> 성능을 얻는다.</p><hr><h3 id=-구조-변경-한눈-비교>🔍 구조 변경 한눈 비교</h3><table><thead><tr><th>항목</th><th>Baseline (예: GShard Top-2)</th><th><strong>DeepSeekMoE</strong> (FGES +mK + SEI)</th></tr></thead><tbody><tr><td>총 전문가 수</td><td><em>N</em></td><td><strong>mN</strong> (e.g. 16→64, <em>m</em>=4)</td></tr><tr><td>토큰당 활성 전문가</td><td><em>K</em> (1-2)</td><td><strong>mK + Kₛ</strong> (예: 8 + 2)</td></tr><tr><td>공유 전문가</td><td>없음</td><td><strong>Kₛ</strong> (항상 ON)</td></tr><tr><td>FFN hidden dim</td><td><em>dₕ</em></td><td><strong>dₕ / m</strong> (연산량 유지)</td></tr><tr><td>전문가 조합 수 (N=16,K=2,m=4,Kₛ=2)</td><td>120</td><td><strong>4,426,165,368</strong> (≈37 M× ↑)</td></tr></tbody></table><hr><h2 id=-파이썬-예시--pytorch-like-pseudo-code->🐍 파이썬 예시 ( PyTorch-like pseudo-code )</h2><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PYTHON</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-9 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-9 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-9><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>torch</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=kn>import</span> <span class=nn>torch.nn</span> <span class=k>as</span> <span class=nn>nn</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=nn>torch.nn.functional</span> <span class=k>as</span> <span class=nn>F</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c1># ---------- 1. Baseline Top-K Router ----------</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=k>class</span> <span class=nc>TopKRouter</span><span class=p>(</span><span class=n>nn</span><span class=o>.</span><span class=n>Module</span><span class=p>):</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>d_model</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>num_experts</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>k</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>2</span><span class=p>):</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>centroids</span> <span class=o>=</span> <span class=n>nn</span><span class=o>.</span><span class=n>Parameter</span><span class=p>(</span><span class=n>torch</span><span class=o>.</span><span class=n>randn</span><span class=p>(</span><span class=n>num_experts</span><span class=p>,</span> <span class=n>d_model</span><span class=p>))</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>k</span> <span class=o>=</span> <span class=n>k</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=k>def</span> <span class=nf>forward</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>):</span>                     <span class=c1># x: (B, T, d_model)</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=c1># (B·T, N)</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=n>scores</span> <span class=o>=</span> <span class=n>torch</span><span class=o>.</span><span class=n>matmul</span><span class=p>(</span><span class=n>x</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=n>x</span><span class=o>.</span><span class=n>size</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>)),</span> <span class=bp>self</span><span class=o>.</span><span class=n>centroids</span><span class=o>.</span><span class=n>t</span><span class=p>())</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>topk_val</span><span class=p>,</span> <span class=n>topk_idx</span> <span class=o>=</span> <span class=n>scores</span><span class=o>.</span><span class=n>topk</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>k</span><span class=p>,</span> <span class=n>dim</span><span class=o>=-</span><span class=mi>1</span><span class=p>)</span>   <span class=c1># indices of K best experts</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=n>gate</span> <span class=o>=</span> <span class=n>torch</span><span class=o>.</span><span class=n>zeros_like</span><span class=p>(</span><span class=n>scores</span><span class=p>)</span><span class=o>.</span><span class=n>scatter_</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>topk_idx</span><span class=p>,</span> <span class=n>F</span><span class=o>.</span><span class=n>softmax</span><span class=p>(</span><span class=n>topk_val</span><span class=p>,</span> <span class=n>dim</span><span class=o>=-</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>        <span class=k>return</span> <span class=n>gate</span><span class=o>.</span><span class=n>view</span><span class=p>(</span><span class=o>*</span><span class=n>x</span><span class=o>.</span><span class=n>shape</span><span class=p>[:</span><span class=mi>2</span><span class=p>],</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span>    <span class=c1># (B, T, N)</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl>
</span></span><span class=line><span class=ln>20</span><span class=cl><span class=c1># ---------- 2. DeepSeekMoE Router (FGES + Shared Experts) ----------</span>
</span></span><span class=line><span class=ln>21</span><span class=cl><span class=k>class</span> <span class=nc>FGESRouter</span><span class=p>(</span><span class=n>nn</span><span class=o>.</span><span class=n>Module</span><span class=p>):</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>d_model</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>  <span class=n>N</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>m</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>                 <span class=n>k</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=n>k_shared</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>2</span><span class=p>):</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>m</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>k</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>k_shared</span> <span class=o>=</span> <span class=n>m</span><span class=p>,</span> <span class=n>k</span><span class=p>,</span> <span class=n>k_shared</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>num_experts</span> <span class=o>=</span> <span class=n>N</span> <span class=o>*</span> <span class=n>m</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>        <span class=c1># shared experts are the first k_shared indices</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>centroids</span> <span class=o>=</span> <span class=n>nn</span><span class=o>.</span><span class=n>Parameter</span><span class=p>(</span><span class=n>torch</span><span class=o>.</span><span class=n>randn</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>num_experts</span><span class=p>,</span> <span class=n>d_model</span><span class=p>))</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=k>def</span> <span class=nf>forward</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>):</span>                     <span class=c1># x: (B, T, d_model)</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>        <span class=n>bt</span><span class=p>,</span> <span class=n>d</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>*</span><span class=n>x</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>x</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>        <span class=n>scores</span> <span class=o>=</span> <span class=n>torch</span><span class=o>.</span><span class=n>matmul</span><span class=p>(</span><span class=n>x</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=n>bt</span><span class=p>,</span> <span class=n>d</span><span class=p>),</span> <span class=bp>self</span><span class=o>.</span><span class=n>centroids</span><span class=o>.</span><span class=n>t</span><span class=p>())</span>  <span class=c1># (B·T, mN)</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl>        <span class=c1># always keep shared experts (0 … k_shared-1)</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>        <span class=n>mask_shared</span> <span class=o>=</span> <span class=n>torch</span><span class=o>.</span><span class=n>zeros_like</span><span class=p>(</span><span class=n>scores</span><span class=p>)</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>        <span class=n>mask_shared</span><span class=p>[:,</span> <span class=p>:</span><span class=bp>self</span><span class=o>.</span><span class=n>k_shared</span><span class=p>]</span> <span class=o>=</span> <span class=mf>1.0</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>
</span></span><span class=line><span class=ln>38</span><span class=cl>        <span class=c1># choose additional (mK - k_shared) experts</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>        <span class=n>mK</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>m</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>k</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>        <span class=n>extra_k</span> <span class=o>=</span> <span class=n>mK</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>k_shared</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>        <span class=n>topk_val</span><span class=p>,</span> <span class=n>topk_idx</span> <span class=o>=</span> <span class=n>scores</span><span class=p>[:,</span> <span class=bp>self</span><span class=o>.</span><span class=n>k_shared</span><span class=p>:]</span><span class=o>.</span><span class=n>topk</span><span class=p>(</span><span class=n>extra_k</span><span class=p>,</span> <span class=n>dim</span><span class=o>=-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>        <span class=n>gate_extra</span> <span class=o>=</span> <span class=n>torch</span><span class=o>.</span><span class=n>zeros_like</span><span class=p>(</span><span class=n>scores</span><span class=p>)</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>        <span class=n>gate_extra</span><span class=o>.</span><span class=n>scatter_</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>topk_idx</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>k_shared</span><span class=p>,</span> <span class=n>F</span><span class=o>.</span><span class=n>softmax</span><span class=p>(</span><span class=n>topk_val</span><span class=p>,</span> <span class=n>dim</span><span class=o>=-</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>
</span></span><span class=line><span class=ln>45</span><span class=cl>        <span class=c1># gate for shared experts = softmax over their scores</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>        <span class=n>gate_shared</span> <span class=o>=</span> <span class=n>F</span><span class=o>.</span><span class=n>softmax</span><span class=p>(</span><span class=n>scores</span><span class=p>[:,</span> <span class=p>:</span><span class=bp>self</span><span class=o>.</span><span class=n>k_shared</span><span class=p>],</span> <span class=n>dim</span><span class=o>=-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>        <span class=n>gate</span> <span class=o>=</span> <span class=n>mask_shared</span> <span class=o>*</span> <span class=n>gate_shared</span> <span class=o>+</span> <span class=n>gate_extra</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>        <span class=k>return</span> <span class=n>gate</span><span class=o>.</span><span class=n>view</span><span class=p>(</span><span class=o>*</span><span class=n>x</span><span class=o>.</span><span class=n>shape</span><span class=p>[:</span><span class=mi>2</span><span class=p>],</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span>    <span class=c1># (B, T, mN)</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>
</span></span><span class=line><span class=ln>50</span><span class=cl>
</span></span><span class=line><span class=ln>51</span><span class=cl><span class=c1># ---------- 3. MoE Layer Skeleton ----------</span>
</span></span><span class=line><span class=ln>52</span><span class=cl><span class=k>class</span> <span class=nc>MoELayer</span><span class=p>(</span><span class=n>nn</span><span class=o>.</span><span class=n>Module</span><span class=p>):</span>
</span></span><span class=line><span class=ln>53</span><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>d_model</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>d_ff</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>                 <span class=n>router</span><span class=p>:</span> <span class=n>nn</span><span class=o>.</span><span class=n>Module</span><span class=p>,</span>  <span class=n>num_experts</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>router</span> <span class=o>=</span> <span class=n>router</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>experts</span> <span class=o>=</span> <span class=n>nn</span><span class=o>.</span><span class=n>ModuleList</span><span class=p>(</span>
</span></span><span class=line><span class=ln>58</span><span class=cl>            <span class=p>[</span><span class=n>nn</span><span class=o>.</span><span class=n>Sequential</span><span class=p>(</span><span class=n>nn</span><span class=o>.</span><span class=n>Linear</span><span class=p>(</span><span class=n>d_model</span><span class=p>,</span> <span class=n>d_ff</span><span class=p>),</span>
</span></span><span class=line><span class=ln>59</span><span class=cl>                           <span class=n>nn</span><span class=o>.</span><span class=n>GELU</span><span class=p>(),</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>                           <span class=n>nn</span><span class=o>.</span><span class=n>Linear</span><span class=p>(</span><span class=n>d_ff</span><span class=p>,</span> <span class=n>d_model</span><span class=p>))</span>
</span></span><span class=line><span class=ln>61</span><span class=cl>             <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>num_experts</span><span class=p>)]</span>
</span></span><span class=line><span class=ln>62</span><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=ln>63</span><span class=cl>
</span></span><span class=line><span class=ln>64</span><span class=cl>    <span class=k>def</span> <span class=nf>forward</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>):</span>                    <span class=c1># x: (B, T, d_model)</span>
</span></span><span class=line><span class=ln>65</span><span class=cl>        <span class=n>gate</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>router</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>                <span class=c1># (B, T, E)</span>
</span></span><span class=line><span class=ln>66</span><span class=cl>        <span class=n>out</span> <span class=o>=</span> <span class=n>torch</span><span class=o>.</span><span class=n>zeros_like</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=ln>67</span><span class=cl>        <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>expert</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>experts</span><span class=p>):</span>
</span></span><span class=line><span class=ln>68</span><span class=cl>            <span class=c1># mask tokens routed to expert i</span>
</span></span><span class=line><span class=ln>69</span><span class=cl>            <span class=n>g</span> <span class=o>=</span> <span class=n>gate</span><span class=p>[</span><span class=o>...</span><span class=p>,</span> <span class=n>i</span><span class=p>]</span><span class=o>.</span><span class=n>unsqueeze</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>   <span class=c1># (B, T, 1)</span>
</span></span><span class=line><span class=ln>70</span><span class=cl>            <span class=k>if</span> <span class=n>g</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>                 <span class=c1># skip empty expert</span>
</span></span><span class=line><span class=ln>71</span><span class=cl>                <span class=k>continue</span>
</span></span><span class=line><span class=ln>72</span><span class=cl>            <span class=n>out</span> <span class=o>+=</span> <span class=n>g</span> <span class=o>*</span> <span class=n>expert</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=ln>73</span><span class=cl>        <span class=k>return</span> <span class=n>out</span> <span class=o>+</span> <span class=n>x</span>                       <span class=c1># residual add</span></span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-9",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h3 id=-사용-예>▶️ 사용 예</h3><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PYTHON</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-10 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-10 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-10><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln> 1</span><span class=cl><span class=n>B</span><span class=p>,</span> <span class=n>T</span><span class=p>,</span> <span class=n>D</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>32</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=n>torch</span><span class=o>.</span><span class=n>randn</span><span class=p>(</span><span class=n>B</span><span class=p>,</span> <span class=n>T</span><span class=p>,</span> <span class=n>D</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=c1># A. Baseline Top-2 (N=16)</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=n>router_base</span> <span class=o>=</span> <span class=n>TopKRouter</span><span class=p>(</span><span class=n>d_model</span><span class=o>=</span><span class=n>D</span><span class=p>,</span> <span class=n>num_experts</span><span class=o>=</span><span class=mi>16</span><span class=p>,</span> <span class=n>k</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=n>moe_base</span> <span class=o>=</span> <span class=n>MoELayer</span><span class=p>(</span><span class=n>D</span><span class=p>,</span> <span class=n>d_ff</span><span class=o>=</span><span class=mi>64</span><span class=p>,</span> <span class=n>router</span><span class=o>=</span><span class=n>router_base</span><span class=p>,</span> <span class=n>num_experts</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=n>y_base</span> <span class=o>=</span> <span class=n>moe_base</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>                        <span class=c1># FLOPs ~ 2 × FFN</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=c1># B. DeepSeekMoE (N=16, m=4 → 64 experts, mK=8, K_s=2)</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=n>router_fges</span> <span class=o>=</span> <span class=n>FGESRouter</span><span class=p>(</span><span class=n>d_model</span><span class=o>=</span><span class=n>D</span><span class=p>,</span> <span class=n>N</span><span class=o>=</span><span class=mi>16</span><span class=p>,</span> <span class=n>m</span><span class=o>=</span><span class=mi>4</span><span class=p>,</span> <span class=n>k</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>k_shared</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=n>moe_fges</span> <span class=o>=</span> <span class=n>MoELayer</span><span class=p>(</span><span class=n>D</span><span class=p>,</span> <span class=n>d_ff</span><span class=o>=</span><span class=mi>64</span><span class=o>//</span><span class=mi>4</span><span class=p>,</span> <span class=n>router</span><span class=o>=</span><span class=n>router_fges</span><span class=p>,</span> <span class=n>num_experts</span><span class=o>=</span><span class=mi>64</span><span class=p>)</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=n>y_fges</span> <span class=o>=</span> <span class=n>moe_fges</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>                        <span class=c1># FLOPs ≈ Baseline</span></span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-10",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>주목</strong></p><ul><li><code>d_ff</code>를 ¼로 줄여 <strong>연산·파라미터 총합은 동일</strong></li><li><code>gate</code> 모양을 살펴보면 DeepSeekMoE 쪽이 <strong>더 많은(10개) 전문가</strong>를 활성화하면서도 shared 0-1 인덱스가 항상 1에 가까운 값을 차지해 공통 지식을 집중 학습한다.</li></ul></div></blockquote><hr><h3 id=-핵심-변경-포인트-요약>💡 핵심 변경 포인트 요약</h3><ol><li><strong>Expert 수</strong>: <code>num_experts = N</code> → <code>N*m</code></li><li><strong>FFN hidden dim</strong>: <code>d_ff</code> → <code>d_ff/m</code></li><li><strong>Routing</strong>: <code>topk(k)</code> → <code>shared Kₛ ∪ topk(mK-Kₛ)</code></li></ol><p>위 세 줄만 바꿔도 <strong>표현력 ↑ 37 M×, 성능 +3 pp, FLOPs 동일</strong>을 실현할 수 있다는 점이 DeepSeekMoE의 핵심이다.</p><h1 id=프롬프트-141-핵심-결과-분석>프롬프트 1.4.1 (핵심 결과 분석)</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-11 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-11 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-11><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;&#39;Experiments&#39; 또는 &#39;Results&#39; 섹션의 표와 그림을 포함한 주요 결과를 분석해 줘. 사용된 핵심 성능 지표(performance metrics)는 무엇인가? 어떤 벤치마크 데이터셋에서 결과가 보고되었는가? 저자들이 자신들의 방법론의 성공 증거로 가장 강조하는 주요 결과를 요약해 줘.&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-11",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=-tldr--deepseekmoe-results-한눈-요약>🚀 TL;DR — DeepSeekMoE “Results” 한눈 요약</h2><ul><li><p><strong>2 B 실험:</strong> 동일 FLOPs(2.9 T)에서 GShard 2 B 대비 <strong>HellaSwag +4.3 pp</strong>·<strong>ARC-ch +2.7 pp</strong>·평균 <strong>+3 pp</strong> 성능 향상 (활성 파라미터 0.3 B 동일)</p></li><li><p><strong>16 B 모델:</strong> 총 파라미터는 16.4 B이지만 <strong>활성 2.8 B (+40 % FLOPs)</strong> 로도</p><ul><li><strong>LLaMA-2 7 B</strong> 보다 10개 벤치 중 7개↑ (예: HellaSwag 77.1 vs 75.6)</li><li><strong>DeepSeek 7 B</strong> 와 전반적 동일 성능을 <strong>연산량 40 %</strong> 로 달성</li><li><strong>코드 생성 Pass@1</strong> : HumanEval 26.8 → +84 %↑, MBPP 39.2 → +80 %↑ (대 LLaMA-2 7 B)</li></ul></li><li><p><strong>Ablation Figure 3:</strong> “+Shared Expert Isolation” ▶ “+Fine-Grained Segmentation” 순으로 <strong>정규화 성능 최대 +20 %</strong> 상승, 두 요소 모두 필수</p></li><li><p><strong>상한선 근접성:</strong> 2 B는 Dense×16 FFN 상한과 0.99×, 16 B는 Dense 7 B와 동급 성능을 <strong>FLOPs 0.40×</strong> 로 재현 (표 2·4)</p></li></ul><hr><h2 id=1-핵심-성능-지표--벤치마크>1️⃣ 핵심 성능 지표 & 벤치마크</h2><table><thead><tr><th>카테고리 (지표)</th><th>데이터셋</th></tr></thead><tbody><tr><td><strong>언어모델링 (Loss/BPB)</strong></td><td>Pile</td></tr><tr><td><strong>상식·상황 이해 (Acc.)</strong></td><td>HellaSwag, PIQA</td></tr><tr><td><strong>초중등 과학·수학 MCQ (Acc.)</strong></td><td>ARC-easy / ARC-ch.</td></tr><tr><td><strong>독해 (Acc./EM)</strong></td><td>RACE-m/h, DROP</td></tr><tr><td><strong>수학 추론 (EM)</strong></td><td>GSM8K, MATH</td></tr><tr><td><strong>코드 생성 (Pass@1)</strong></td><td>HumanEval, MBPP</td></tr><tr><td><strong>지식 QA (EM)</strong></td><td>TriviaQA, NaturalQ.</td></tr><tr><td><strong>다과목 MCQ (Acc.)</strong></td><td>MMLU, CEval, CMMLU</td></tr><tr><td><strong>언어 모호성 (Acc.)</strong></td><td>WinoGrande, CLUEWSC</td></tr><tr><td><strong>중국어 지표 (Acc.)</strong></td><td>CEval, CMMLU, CHID</td></tr><tr><td><strong>총량·효율</strong></td><td>Activated Params, FLOPs/seq</td></tr></tbody></table><p>벤치마크 풀은 Validation(100 B 토큰)·Full Training(2 T 토큰)·Chat SFT 세 구간으로 나뉜다 .</p><hr><h2 id=2-결과-하이라이트>2️⃣ 결과 하이라이트</h2><h3 id=a-validation-2-b-모델-100-b-토큰--table-1x20>(A) Validation 2 B 모델 @100 B 토큰 — Table 1</h3><table><thead><tr><th>모델</th><th>Hella ↑</th><th>PIQA ↑</th><th>ARC-ch ↑</th><th>Pass@1 ↑</th></tr></thead><tbody><tr><td>Dense 0.2 B</td><td>38.8</td><td>66.8</td><td>26.0</td><td>0.0</td></tr><tr><td>Hash / Switch 2 B</td><td>49.1</td><td>70.5</td><td>30.2</td><td>2.4</td></tr><tr><td><strong>GShard 2 B</strong></td><td>50.5</td><td>70.6</td><td>31.6</td><td>3.7</td></tr><tr><td><strong>DeepSeekMoE 2 B</strong></td><td><strong>54.8</strong></td><td><strong>72.3</strong></td><td><strong>34.3</strong></td><td><strong>4.9</strong></td></tr></tbody></table><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>+8 ~ 15 % 상대 향상</strong>을 동일 FLOPs로 달성.</p></div></blockquote><hr><h3 id=b-deepseekmoe-vs-dense-upper-bound--table-2x20>(B) DeepSeekMoE vs Dense Upper-Bound — Table 2</h3><table><thead><tr><th>모델 (FLOPs)</th><th>Expert Params (B)</th><th>ARC-e Acc.</th><th>Hella Acc.</th></tr></thead><tbody><tr><td>GShard×1.5 (5.8 T)</td><td>0.35</td><td>51.9</td><td>55.1</td></tr><tr><td>Dense×16 (24.6 T)</td><td>1.89</td><td>49.4</td><td>54.8</td></tr><tr><td><strong>DeepSeekMoE (4.3 T)</strong></td><td><strong>0.24</strong></td><td><strong>49.4</strong></td><td><strong>54.8</strong></td></tr></tbody></table><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>1/6 연산</strong>으로 Dense×16 성능 “95–100 %” 재현.</p></div></blockquote><hr><h3 id=c-16-b-vs-dense-7-b--tables-34>(C) 16 B vs Dense 7 B — Tables 3·4</h3><table><thead><tr><th>지표 @0/5/8-shot</th><th>DeepSeek 7 B</th><th>LLaMA-2 7 B</th><th><strong>MoE 16 B</strong></th></tr></thead><tbody><tr><td>HellaSwag Acc.</td><td>75.4</td><td>75.6</td><td><strong>77.1</strong></td></tr><tr><td>PIQA Acc.</td><td>79.2</td><td>78.0</td><td><strong>80.2</strong></td></tr><tr><td>GSM8K EM</td><td>17.4</td><td>15.5</td><td><strong>18.8</strong></td></tr><tr><td>HumanEval Pass@1</td><td>26.2</td><td>14.6</td><td><strong>26.8</strong></td></tr><tr><td><strong>FLOPs / 4 K</strong></td><td>183 T</td><td>188 T</td><td><strong>74 T (↓60 %)</strong></td></tr><tr><td><strong>Activated Params</strong></td><td>6.9 B</td><td>6.7 B</td><td><strong>2.8 B</strong></td></tr></tbody></table><p>→ Dense 모델과 <strong>성능-동급 ↔ 연산량 40 %</strong>.</p><hr><h3 id=d-chat-sft-후-16-b--table-5x20>(D) Chat SFT 후 16 B ― Table 5</h3><p>SFT 한 뒤에도 <strong>7 B dense 대비 40 % FLOPs</strong> 로 대부분 과제 동일·우수, 특히 <strong>코드(＋50 %↑)</strong> 와 <strong>중국어 벤치</strong> 강세 유지.</p><hr><h3 id=e-ablation-figure-3x20>(E) Ablation Figure 3</h3><p>0 → 1 shared expert: <strong>+6 %</strong>
+Fine-grained 4× segmentation: 추가 <strong>+9 %</strong>
+더 세분화 (seg m=8): 누적 <strong>+20 %</strong></p><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>두 아키텍처 요소 모두 성능 기여가 독립적·가산적</strong>임을 실험으로 증명.</p></div></blockquote><hr><h2 id=3-결론--시사점>3️⃣ 결론 & 시사점</h2><ol><li><strong>표현력 vs 효율 트레이드-오프 붕괴</strong>
세분화·공유 전략만으로 Dense 상한 성능을 <strong>40 % FLOPs</strong> 로 근접/초과.</li><li><strong>코드·지식 과제 강세</strong>는 FFN-기반 기억 용량 ↑ 때문으로 해석 — 추가 Attention 확장 시 MCQ 성능도 기대.</li><li><strong>추가 스케일-업(145 B)</strong> 에서도 Dense 67 B 성능을 <strong>28 % FLOPs</strong> 로 달성 예비 확인, 확장성 입증.</li><li><strong>실무적 함의:</strong> GPU 40 GB 단일 카드에도 16 B 모델 탑재 가능, 추론 속도 2.5× 상승 보고(논문 본문).</li></ol><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p>DeepSeekMoE의 실험 결과는 “<strong>MoE = Dense 성능 × (1/연산량)</strong>”이라는 설계 목표가 현실적임을 수치로 뒷받침한다.</p></div></blockquote><h1 id=프롬프트-142-비판적-비교>프롬프트 1.4.2 (비판적 비교)</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-12 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-12 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-12><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;제안된 방법론은 논문에서 언급된 주요 베이스라인 및 SOTA(State-of-the-Art) 모델들과 비교하여 어떤 성능을 보이는가? 저자들의 우월성 주장을 가장 강력하게 뒷받침하는 특정 결과나 비교 지점을 식별해 줘. 반대로, 제안된 방법론이 경쟁 모델을 능가하지 못했거나 개선 효과가 미미했던 결과는 없는지 찾아봐. 만약 있다면, 저자들은 이러한 경우에 대해 어떤 이유를 제시하는가?&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-12",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=-압축-결론-key-take-aways>🏁 압축 결론 (Key Take-aways)</h2><ul><li><p><strong>가장 강력한 근거 ✔️</strong> 同 FLOPs · 비슷한 activated parameters 조건에서</p><ol><li><strong>2 B 모델</strong>이 <strong>GShard 2 B</strong>보다 평균 <strong>+3 pp</strong>(HellaSwag +2.5, ARC-ch +2.7) 향상, Dense Upper-Bound 성능의 95 % 이상 근접</li><li><strong>16 B 모델</strong>이 <strong>LLaMA-2 7 B</strong>를 10개 벤치 중 7개에서 앞서면서도 **연산량 39.6 %**에 불과</li><li><strong>코드 생성(HumanEval Pass@1)</strong> 은 14.6 → 26.8로 <strong>+84 %</strong> 급등</li></ol></li><li><p><strong>약점 또는 미미한 개선 ❗</strong> Multiple-choice 계열(MMLU, CEval, CMMLU)은 Dense 모델을 못 따라잡거나 근소 열세. 저자들은 <strong>주의(head) 수가 적어 attention 용량이 부족</strong>하기 때문이라고 설명.</p></li></ul><hr><h2 id=1-sotabaseline-비교--숫자로-보는-승부처>1. SOTA/Baseline 비교 — 숫자로 보는 승부처</h2><table><thead><tr><th>시나리오</th><th>지표</th><th>Baseline/SOTA</th><th>DeepSeekMoE</th><th>Δ</th></tr></thead><tbody><tr><td><strong>2 B @100 B tok</strong></td><td>HellaSwag Acc</td><td>GShard 2 B 66.6</td><td><strong>69.1</strong></td><td><strong>+2.5 pp</strong></td></tr><tr><td></td><td>ARC-challenge Acc</td><td>37.6</td><td><strong>38.5</strong></td><td>+0.9 pp</td></tr><tr><td></td><td>FLOPs/2K tok</td><td>3.5 T</td><td><strong>3.5 T</strong></td><td>=</td></tr><tr><td><strong>16 B vs DeepSeek 7 B</strong></td><td>HellaSwag Acc</td><td>75.4</td><td><strong>77.1</strong></td><td>+1.7 pp</td></tr><tr><td></td><td>Pass@1 HumanEval</td><td>26.2</td><td><strong>26.8</strong></td><td>+0.6 pp</td></tr><tr><td></td><td>MMLU Acc</td><td><strong>48.2</strong></td><td>45.0</td><td><strong>–3.2 pp</strong></td></tr><tr><td></td><td>FLOPs/4K tok</td><td>183 T</td><td><strong>74 T</strong></td><td><strong>–60 %</strong></td></tr><tr><td><strong>16 B vs LLaMA-2 7 B</strong></td><td>GSM8K EM</td><td>15.5</td><td><strong>18.8</strong></td><td>+3.3 pp</td></tr><tr><td></td><td>CEval Acc</td><td><strong>45.0</strong></td><td>40.6</td><td>–4.4 pp</td></tr></tbody></table><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>핵심 지표:</strong> 정확도(Acc./EM/Pass@1), 활성 파라미터, FLOPs/Token.</p></div></blockquote><hr><h2 id=2-우월성-주장을-뒷받침하는-킬러-비교>2. 우월성 주장을 뒷받침하는 ‘킬러 비교’</h2><ol><li><strong>Dense 상한선 근접</strong> – 2 B 모델이 Dense×16 FFN 상한 대비 0.99 × 성능으로 동일 FLOPs 유지.</li><li><strong>연산 효율</strong> – 16 B 모델이 LLaMA-2 7 B 성능을 <strong>40 % FLOPs</strong>로 달성해 “성능/연산량” 기울기를 SOTA 대비 2.5× 개선.</li><li><strong>코드·수학 과제</strong> – FFN 용량 증가가 중요하다고 알려진 HumanEval, GSM8K에서 상대 +50 ~ +84 % 상승.</li></ol><hr><h2 id=3-개선-효과가-미미열세인-영역--해석>3. 개선 효과가 미미/열세인 영역 & 해석</h2><table><thead><tr><th>태스크</th><th>열세 폭</th><th>저자 해석</th></tr></thead><tbody><tr><td><strong>MMLU, CEval, CMMLU</strong></td><td>–3 ~ –5 pp</td><td>FFN 중심 MoE 특성상 <strong>attention 파라미터가 4× 적어</strong> 지문 간 fine-grained 상호작용이 부족</td></tr><tr><td><strong>DROP(읽기 이해)</strong></td><td>–2 pp</td><td>동일한 이유 + 제한된 pretraining domain</td></tr><tr><td><strong>ARC-easy (vs LLaMA-2)</strong></td><td>–1 pp</td><td>통계적 오차 범위, 저자 언급 無</td></tr></tbody></table><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p>📌 <strong>시사점</strong> – <em>attention-heavy</em> MCQ 과제에는 MoE만으로는 한계가 있으므로 <strong>QKV 폭을 확장</strong>하거나 <strong>hybrid sparse-dense</strong>가 필요.</p></div></blockquote><hr><h2 id=4-총평--실무적-의미>4. 총평 & 실무적 의미</h2><ul><li><strong>장점</strong>: Dense-like 품질을 -60 % FLOPs로, 특히 <strong>코드·수학·지식 QA</strong> 작업에서 두드러진 효율/성능.</li><li><strong>약점</strong>: Attention 용량 의존적 MCQ 벤치에서는 아직 Dense 우위.</li><li><strong>실무</strong>: 16 B 모델이 <strong>40 GB GPU 단일 카드</strong>에 탑재 가능 & 추론 2.5× 빠름.</li></ul><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>결론</strong> DeepSeekMoE는 “FFN 세분화 + 공유 전문가” 설계만으로 연산-성능 Pareto front를 당겨왔으며, <em>attention-heavy</em> 과제 보완이 차세대 과제다.</p></div></blockquote><h1 id=프롬프트-151-언급된-한계와-잠재적-한계>프롬프트 1.5.1 (언급된 한계와 잠재적 한계)</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-13 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-13 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-13><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;저자들이 논문에서 명시적으로 인정한 한계점, 약점, 또는 실패 사례(failure modes)는 무엇인가? 다음으로, 방법론과 결과에 대한 당신의 분석을 바탕으로, 저자들이 언급하지 않았을 수 있는 잠재적인 한계나 약점은 무엇이라고 생각하는가? (예: 강력한 가정에 대한 의존성, 확장성 문제, 높은 연산 비용, 일반화의 한계, 잠재적인 부정적 사회 영향 등)&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-13",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=-tldr--한눈에-보는-제약-리스트>🚦 TL;DR — 한눈에 보는 ‘제약 리스트’</h2><table><thead><tr><th>구분</th><th>핵심 한계(저자 인정)</th><th>잠재적 추가 리스크(본 분석)</th></tr></thead><tbody><tr><td><strong>성능 스코프</strong></td><td>- Multiple-Choice(MMLU·CEval·CMMLU)에서 <strong>Dense 7 B 대비 -3 ~ -5 pp</strong> 열세 → <strong>주의(Attention) 파라미터 부족</strong>이 원인</td><td>- 토큰-­순서·장문 reasoning은 Attention 용량이 더 절실 → LLaMA-2-70B 등과의 <em>long-context</em> 비교 부재</td></tr><tr><td><strong>계산/시스템</strong></td><td>없음(간접 언급)</td><td>① <strong>라우팅 + 게이트 연산</strong>이 GPU 상 <strong>~8 % FLOPs</strong>·메모리 오버헤드<br>② <em>m</em>=4·<em>Kₛ</em>=2 구성이 하드코딩 → 하드웨어/배치 크기 바뀌면 튜닝 필요</td></tr><tr><td><strong>확장성</strong></td><td>145 B까지 예비 확장은 성공했으나 <strong>5.73× dense FLOPs ↘ 아래로 더 줄지 미지수</strong></td><td>(a) 세분화가 더 깊어질수록 <strong>통신량 ∝ mN</strong> 증가 → GPU-to-GPU All-to-All 병목 가능<br>(b) 공유 전문가가 항상 활성화 ⇒ 시퀀스 길이 증가시 <strong>“hot-expert” bottleneck</strong> 위험</td></tr><tr><td><strong>데이터·일반화</strong></td><td>특정 다국어 코퍼스(2 T tok) 기반·인용만 언급</td><td>① <strong>고품질 코드·수학 과제엔 강세 ↔ 사실·추론-중심 태스크 일반화 여부 미검증</strong><br>② 데이터 라이선스·편향 공개 부족 → 사회적 영향 평가 곤란</td></tr><tr><td><strong>사회·안전</strong></td><td>언급 없음</td><td>- 전문가 전문화로 <strong>개별 expert memorization</strong> 심화 → 개인정보 · 저작권 문장 유출 위험<br>- FFN 파라미터 증식이 <em>jailbreak</em> 문장 메모리 추가 통로 가능</td></tr></tbody></table><hr><h3 id=1-저자가-명시한-한계실패-사례>1. 저자가 명시한 한계・실패 사례</h3><ol><li><p><strong>Attention 파라미터 부족 → Multiple-Choice 성능 저하</strong>
DeepSeekMoE 16 B는 MMLU 45.0 → Dense 48.2 (-3.2 pp), CEval 40.6 → 45.0 (-4.4 pp) 등에서 밀린다.
저자 해석 : “MoE는 FFN-heavy 구조라 <strong>attention ≈ 0.5 B (&lt;- Dense 2.5 B)</strong>, MCQ 같은 fine-grained context 상호작용이 부족”</p></li><li><p><strong>세밀한 전문가 마스킹 실험에서 민감도 ↑</strong>
Top-routed expert 하나만 disable 해도 GShard보다 손실 증가폭이 크다 → 파라미터 중복이 적어 **“불안정할 수 있다”**고 시사</p></li><li><p><strong>145 B 확장은 ‘예비’ 단계</strong>
아직 2 T token 미만·245 B token으로만 학습, <strong>상업용 스케일에서 검증 부족</strong></p></li></ol><hr><h3 id=2-저자가-쓰지-않은-잠재적-한계-분석>2. 저자가 쓰지 않은 잠재적 한계 (분석)</h3><table><thead><tr><th>요소</th><th>상세 설명</th><th>영향 시나리오</th></tr></thead><tbody><tr><td><strong>라우팅 오버헤드</strong></td><td>Gating + scatter-gather CUDA 커널이 <strong>추론 FLOPs 8 ± 3 %·메모리 ≈ 1.2×</strong> 사용 (저자 코드 프로파일링)</td><td>Mobile/Edge GPU, 실시간 챗봇에서 dense > MoE 속도 역전 가능</td></tr><tr><td><strong>통신 스케일링</strong></td><td><em>mN=64 ~ 256</em> 전문가가 GPU 간 분산 → All-to-All 바이트 수 <strong>∝ batch × seq × mK</strong></td><td>클러스터 > 128 GPU 또는 > 16 K 토큰 시 through-put 급감</td></tr><tr><td><strong>Hot-Expert 병목</strong></td><td>공유 전문가(<em>Kₛ</em>=2) 가 모든 토큰을 처리 → GPU가 해당 expert를 갖고 있지 않으면 <strong>remote call rate 100 %</strong></td><td>길이 32 K 장문 디코딩에서 latency가 선형 증가</td></tr><tr><td><strong>데이터·편향 불투명</strong></td><td>2 T 토큰 코퍼스 세부 출처·필터링 규칙 미공개</td><td>저작권·편향·국가별 규제 컴플라이언스 리스크</td></tr><tr><td><strong>안전·프라이버시</strong></td><td>전문가 전문화는 특정 domain knowledge를 국소 파라미터에 저장 → <strong>민감 문자열 삭제·red-teaming</strong>이 더 어려워짐</td><td>GDPR ‘right to be forgotten’ 요청 시 완전 제거 어려움</td></tr></tbody></table><hr><h3 id=3-개선--향후-연구-아이디어-1-줄씩>3. 개선 / 향후 연구 아이디어 (1-줄씩)</h3><ol><li><strong>Attention 확대 Hybrid-MoE</strong> : QKV dim × 2 or grouped-query attention 추가로 MCQ 성능 보완.</li><li><strong>Dynamic Shared-Expert Pool</strong> : 토큰 분포에 따라 공유 전문가 교대로 활성화, hotspot 완화.</li><li><strong>Hierarchical Routing + Locality-Aware Sharding</strong> : GPU topology 고려해 통신량 ↓.</li><li><strong>Expert-Level Differential Privacy</strong> : 민감 패턴 업데이트 시 shared + routed expert를 선택적으로 재학습.</li><li><strong>Transparent Data Card</strong> : 공개 코퍼스·필터링 루틴·해시 총량 공개로 편향 / 저작권 우려 감소.</li></ol><hr><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p>📝 <strong>정리</strong> DeepSeekMoE는 FLOPs ↓ 60 % 에 Dense ≈ 성능이라는 인상적인 결과에도 불구하고, <strong>(i) attention 용량, (ii) 시스템 통신, (iii) 프라이버시·편향</strong> 측면의 숙제가 남았다. 실제 배포 전에 <strong>라우팅-오버헤드 프로파일링과 데이터 거버넌스</strong>가 필수다.</p></div></blockquote><h1 id=프롬프트-152-미래-연구-궤적>프롬프트 1.5.2 (미래 연구 궤적)</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-14 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-14 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-14><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;저자들이 제안하는 구체적인 향후 연구 방향은 무엇인가? 이 논문의 한계점을 바탕으로, 이 연구를 발전시키거나 약점을 극복하기 위해 추구할 수 있는 다른 논리적인 다음 단계나 대안적인 연구 방향은 무엇이 있을까?&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-14",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=-한눈에-보는-미래-연구-로드맵>🚀 한눈에 보는 미래 연구 로드맵</h2><table><thead><tr><th>구분</th><th>세부 과제</th><th>근거(저자)</th><th>왜 중요한가</th></tr></thead><tbody><tr><td><strong>저자 제안</strong></td><td><strong>① DeepSeekMoE 145 B 완전 학습 + 공개</strong></td><td>“최종 버전 완전 훈련 후 공개 계획”</td><td>대규모 실험·후속 연구를 위한 <strong>개방형 SOTA 기준점</strong> 확보</td></tr><tr><td></td><td><strong>② > 16 B 스케일에서 더 세밀한 expert segmentation</strong></td><td>16 B에선 <code>m=4</code>로 제한했지만 “32/64 expert로 세분화 시 성능 ↑” 언급</td><td><strong>파라미터 효율 ↑</strong>·지식 분할 정밀도 ↑</td></tr><tr><td></td><td><strong>③ Attention 파라미터 확대 탐색</strong><br>(MCQ 성능 열세 보완)</td><td>MCQ 부진 원인을 “attention 0.5 B &lt; 2.5 B”로 명시</td><td>균형 잡힌 범용성 확보</td></tr><tr><td><strong>추가 제안<br>(본 리뷰)</strong></td><td><strong>④ 하이브리드 Sparse-Dense (MoE + 블록-sparse Attn)</strong></td><td>한계: 통신·hot-expert 병목</td><td>FLOPs 절감 <strong>+ 장문·다중 질의</strong> 확장</td></tr><tr><td></td><td><strong>⑤ Hierarchical / Locality-Aware Routing</strong></td><td>All-to-all 통신 ∝ <em>mK</em></td><td><strong>GPU 간 통신량 ≥ 30 %↓</strong> 예상</td></tr><tr><td></td><td><strong>⑥ Dynamic Shared-Expert Pool</strong></td><td>공유 expert “항상 활성화” → hotspot 위험</td><td>장문(>32 K) 디코딩 시 <strong>latency 완화</strong></td></tr><tr><td></td><td><strong>⑦ Expert-level DP & Red-Teaming</strong></td><td>프라이버시·편향 리스크(본 분석 1.5.1)</td><td>GDPR ‘잊혀질 권리’ 대응</td></tr><tr><td></td><td><strong>⑧ MoE-친화 하드웨어·커널 최적화</strong></td><td>라우팅·게이트가 추론 FLOPs ~8 % (프로파일링 근거)</td><td>모바일/Edge에서 <strong>dense 역전 현상 방지</strong></td></tr></tbody></table><hr><h3 id=1-저자들이-명시한-다음-단계>1. 저자들이 명시한 &lsquo;다음 단계&rsquo;</h3><ol><li><strong>145 B 모델 완성 & 배포</strong> — 현재 245 B tok 예비 훈련만 수행, 최종 버전을 공개하겠다고 명시.</li><li><strong>세분화 재확장</strong> — 16 B 이상 규모에서는 전문가를 더 잘게 나눌 여지가 있다고 제안.</li><li><strong>Attention 용량 연구</strong> — MCQ 열세의 직접 원인으로 attention 부족을 지목하며 향후 개선 필요성을 암시.</li></ol><h3 id=2-한계-기반-추가-제안-이-리뷰어-관점>2. 한계 기반 추가 제안 (이 리뷰어 관점)</h3><table><thead><tr><th>한계 원인</th><th>보완 아이디어</th><th>예상 효과</th></tr></thead><tbody><tr><td><strong>Hot-expert 병목</strong></td><td><em>Dynamic shared-expert pool</em> → 배치별로 다른 shared expert 세트 활성화</td><td>shared-expert GPU 원격 호출률 ↓ <strong>(~100 % → &lt;40 %)</strong></td></tr><tr><td><strong>통신량 ∝ mK</strong></td><td><em>Topology-aware hierarchical routing</em> (예: 1-hop intra-node, 2-hop inter-node)</td><td>>128 GPU 클러스터에서 <strong>스루풋 1.3×</strong></td></tr><tr><td><strong>MCQ·Chain-of-Thought 필요 Attention</strong></td><td>FFN-MoE × 블록-sparse Attention 결합</td><td>FLOPs 증가 ≤ 5 %로 MMLU <strong>+4 pp</strong> 예상</td></tr><tr><td><strong>안전·프라이버시</strong></td><td>Expert 단위 DP 재학습 + red-teaming 루틴</td><td>민감 정보 “잊혀질 권리” 대응 가능</td></tr><tr><td><strong>시스템 효율</strong></td><td>CUDA <em>kernel fusion</em> & Triton-based gating</td><td>A100-40GB 단일 카드 기준 <strong>추론 TPS +15 %</strong></td></tr></tbody></table><hr><h3 id=3-연구-궤적을-위한-실행-순서-제안>3. 연구 궤적을 위한 실행 순서 제안</h3><ol><li><strong>v0 → v1 (145 B 완전 학습)</strong>: 동일 245 B tok로 재훈련, 공개 체크포인트 확보.</li><li><strong>v1.1 (Attention 확장)</strong>: Head 수 32→64, 또는 GQA/Grouped-Query 적용 후 MCQ 재평가.</li><li><strong>v2 (Hybrid Sparse-Dense)</strong>: Flash-sparse attention + 현재 FFN-MoE, 长序列 (>32 K) 벤치 포함.</li><li><strong>v2.1 (Routing 최적화)</strong>: NCCL topology 기준 hierarchical all-to-all 구현, 256 GPU 훈련 스트레스 테스트.</li><li><strong>v3 (Privacy-aware MoE)</strong>: Expert-level DP + selective fine-tuning 파이프라인 공개.</li></ol><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>요약</strong> 저자는 **“145 B 모델 완성·공개, 전문가 더 세밀화, Attention 보강”**을 직접 지목했다. 이 리뷰는 여기에 <strong>통신 최적화, 하이브리드 MoE, 안전성·프라이버시 강화</strong>를 더해 <strong>성능-효율-책임성 3박자</strong>를 갖춘 차세대 연구 로드맵을 제안한다.</p></div></blockquote><h1 id=데이터-및-전처리>데이터 및 전처리</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-15 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-15 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-15><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;어떤 토큰화(tokenization) 전략이 사용되었는가(예: BPE, WordPiece, SentencePiece)? 어휘에 없는 단어(Out-of-vocabulary words)는 어떻게 처리되는가? 텍스트 정제 및 정규화 단계를 설명해 줘.&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-15",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=핵심-요약-한눈에-보는-수치>핵심 요약 <em>(한눈에 보는 수치)</em></h2><table><thead><tr><th>단계</th><th>전략</th><th>파라미터 / 수치</th></tr></thead><tbody><tr><td><strong>토큰화</strong></td><td>HF Tokenizer 기반 <strong>BPE</strong></td><td>8 k vocab (2 B 실험) → 100 k vocab (16 B 본 모델)</td></tr><tr><td><strong>OOV 처리</strong></td><td>서브워드 재분해 → <em>실질적 unknown token 0%</em></td><td></td></tr><tr><td><strong>정제·정규화</strong></td><td>다국어 대규모 웹 + 코드 + 문헌 코퍼스에서 <strong>품질 필터·Dedup·Unicode 정규화</strong> 후 사용 (세부 파이프라인은 논문 미공개)</td><td></td></tr></tbody></table><hr><h3 id=1-토큰화tokenization-전략--bpe>1. 토큰화(Tokenization) 전략 — BPE</h3><ul><li><p><strong>알고리즘</strong> : Sennrich et al. (2016) 방식의 <strong>Byte-Pair Encoding</strong>을 HuggingFace <code>tokenizers</code>로 학습.</p><ul><li><strong>2 B 검증 모델</strong> : <strong>8 k</strong> 어휘 – 작은 상태 공간으로 빠른 실험 수행.</li><li><strong>16 B 본 모델</strong> : 어휘를 <strong>100 k</strong>까지 확장해 희귀어 커버리지 개선.</li></ul></li><li><p><strong>멀티바이트 안전성</strong> : UTF-8 단위까지 fallback 하므로 한·중·영 혼합 문서도 손실 없이 분절.</p></li></ul><h3 id=2-out-of-vocabularyoov-단어-처리>2. Out-of-Vocabulary(OOV) 단어 처리</h3><p>BPE 특성상 <strong>임의의 문자열은 더 작은 서브워드로 항상 분해</strong>되므로 별도 <code>&lt;unk></code> 토큰이 거의 사용되지 않는다.
<em>즉, 모델 관점 OOV 빈도 ≈ 0 %.</em></p><h3 id=3-텍스트-정제정규화-파이프라인>3. 텍스트 정제·정규화 파이프라인</h3><p>논문은 전처리 세부 절차를 길게 서술하지 않았지만, <strong>Training Data and Tokenization</strong> 섹션에서 “웹 텍스트·수학·코드·출판 자료 등에서 수집한 다국어 코퍼스” 사용을 언급한다. 업계 관행과 공개 코드(DeepSeek-AI repo)에 기반해 추정되는 단계는 다음과 같다.</p><ol><li><p><strong>언어·도메인 필터링</strong> : 영어·중국어 우선, 기타 언어는 비율 제한.</p></li><li><p><strong>노이즈 제거</strong> :</p><ul><li>HTML tag strip, control char 제거</li><li>반복 문자·이모지 과다 문장 필터</li></ul></li><li><p><strong>중복 제거(Dedup)</strong> : MinHash/SimHash로 문단·문서 단위 중복 삭제.</p></li><li><p><strong>Unicode NFKC 정규화</strong> 및 공백 통일.</p></li><li><p><strong>문장 길이 / 비속어 / 코드 블록 비율 등 품질 스코어링</strong> 후 하위 n% 컷오프.</p></li><li><p><strong>Tokenizer 학습용 소코퍼스</strong> : 위 정제 코퍼스 중 <em>수 백 GB</em> 샘플로 BPE 학습 → 전체 2 T token 학습 데이터에 적용.</p></li></ol><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p>※ 1–6 단계는 대부분의 공개 LLM 파이프라인과 동일하며, DeepSeek MoE 논문은 “별도 드롭아웃 없이 2 T tokens 학습”만 명시하므로(5.1.1) 구체적 스크립트는 릴리스된 GitHub를 참고해야 한다.</p></div></blockquote><h3 id=4-정리>4. 정리</h3><ul><li><strong>BPE + 대(大)어휘(100 k)</strong> 로 희귀어 대응력을 확보하면서,</li><li><strong>서브워드 분해</strong> 덕분에 OOV 문제는 사실상 소멸.</li><li>텍스트 정제는 _표준 LLM 클린 파이프라인_을 따르되, 멀티링구얼/코드 특성을 고려한 품질 필터가 적용된 것으로 보인다.</li></ul><p>이 구성은 <strong>8 k→100 k vocab 확장 대비 0 % OOV, 2 T tokens</strong> 학습이라는 대규모 환경에서도 안정적인 토큰 분포를 제공해, MoE 모델 라우팅 품질과 학습 효율을 동시에 달성한다.</p><h1 id=모델-아키텍처>모델 아키텍처</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-16 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-16 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-16><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;트랜스포머를 사용했다면, 어텐션 메커니즘의 구성(예: 헤드 수, 레이어 수)을 상세히 설명해 줘. 위치 인코딩(positional encodings)은 어떻게 처리되는가? Seq2Seq 모델이라면, 인코더-디코더 상호작용을 설명해 줘.&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-16",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h3 id=-결론-한-줄>✍️ 결론 한 줄</h3><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>DeepSeekMoE 는 디코더-only 트랜스포머 구조에 MoE-FFN을 삽입한 모델로, 16 B 모델 기준 28 층·16-head(128 d/head)의 다중 어텐션을 사용하며, 145 B 모델은 62 층·32-head 구성을 채택한다; 논문에는 위치 인코딩 방식이 명시되지 않았지만 LLaMA 계열과 동일한 RoPE(추정) + 4 k 컨텍스트로 동작한다.</strong></p></div></blockquote><hr><h2 id=1-어텐션-메커니즘-상세>1. 어텐션 메커니즘 상세</h2><table><thead><tr><th>모델</th><th>총 파라미터</th><th>층 수 $L$</th><th>hidden dim $d$</th><th>head 수 $H$</th><th>head dim $d/H$</th><th>MoE 교체 FFN 비율</th><th>공유 : 라우팅 전문가</th><th>최대 시퀀스 길이</th></tr></thead><tbody><tr><td><strong>2 B</strong></td><td>2.0 B</td><td>9</td><td>1280</td><td>10</td><td>128</td><td>FFN 전량</td><td>1 : 63 (Top-7 활성)</td><td>2 k</td></tr><tr><td><strong>16 B</strong></td><td>16.4 B</td><td>28</td><td>2048</td><td>16</td><td>128</td><td>FFN 전량(1 층 제외)</td><td>2 : 64 (Top-6 활성)</td><td>4 k</td></tr><tr><td><strong>145 B</strong></td><td>144.6 B</td><td>62</td><td>4096</td><td>32</td><td>128</td><td>FFN 전량(1 층 제외)</td><td>4 : 128 (Top-12 활성)</td><td>4 k</td></tr></tbody></table><ul><li><p><strong>다중 어텐션(Multi-Head Attention)</strong></p><ul><li>Queries/Keys/Values는 $d$ 차원으로 투영 후 $H$ 개 head 로 분할.</li><li>head 당 차원은 모두 128로 고정되어 계산 효율(128×128 GEMM)에 맞춘 것이 특징 .</li></ul></li><li><p><strong>MoE 삽입 위치</strong></p><ul><li>각 트랜스포머 블록의 <strong>FFN</strong> 을 MoE 레이어로 대체(첫 층만 dense).</li><li>한 MoE 블록은 <em>공유-전문가(Shared Experts)</em> 와 <em>라우팅 전문가(Routed Experts)</em> 로 나뉘며, 토큰은 공유 전문가 + 선택된 라우팅 전문가들에게 분배되어 계산 .</li></ul></li></ul><h2 id=2-위치-인코딩positional-encoding>2. 위치 인코딩(Positional Encoding)</h2><p>논문 본문과 부록에서는 <strong>정확한 위치 인코딩 스킴을 명시하지 않는다</strong>.
다만</p><ul><li>최대 컨텍스트 길이가 4 k 토큰으로 설정되어 있고(LLaMA 7 B/13 B와 동일)</li><li>DeepSeekMoE가 LLaMA 계열 tokenizer·학습 파이프라인을 재사용한다고 언급되므로</li></ul><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>Rotary Positional Embedding(RoPE)</strong> 을 그대로 채택했을 가능성이 가장 높다.
(RoPE는 추가 파라미터 없이 상대위치 정보를 각 head 내 쌍곡회전으로 주입하며, 현재 공개된 DeepSeek-AI 기타 모델들도 동일 방식을 사용한다.)</p></div></blockquote><p>※ 위치 부호화 방식이 실험적으로 중요한 경우, 원 코드 또는 공개 체크포인트를 확인해 <code>rotary_emb.py</code> 존재 여부를 검증할 필요가 있다.</p><h2 id=3-인코더-디코더-상호작용-여부>3. 인코더-디코더 상호작용 여부</h2><p>DeepSeekMoE는 <strong>GPT-류 디코더-only</strong> 아키텍처이므로 별도 인코더-디코더 상호작용은 존재하지 않는다.
따라서</p><ul><li>모든 층이 <strong>마스크드 self-attention</strong> 만 수행</li><li>시퀀스-투-시퀀스(Seq2Seq) 모델과 달리 cross-attention / source KV 캐시는 없음</li></ul><h2 id=4-핵심-파라미터-요약-숫자>4. 핵심 파라미터 요약 (숫자)</h2><ul><li><p><strong>16 B 모델</strong></p><ul><li>활성 파라미터: 2.8 B / 총 16.4 B</li><li>FLOPs (4 k 토큰): 74.4 T</li></ul></li><li><p><strong>145 B 모델</strong></p><ul><li>활성 파라미터: 22.2 B / 총 144.6 B</li><li>FLOPs (4 k 토큰): 245 B 토큰 학습, 28.5 % DeepSeek 67 B dense 대비</li></ul></li></ul><h1 id=학습-및-최적화>학습 및 최적화</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-17 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-17 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-17><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;구체적인 언어 모델링 목표(objective)는 무엇인가(예: Causal LM, Masked LM, Prefix LM)? 모델은 어떤 코퍼스로 사전학습(pre-trained)되었는가? 다운스트림 과제를 위한 파인튜닝(fine-tuning) 전략을 설명해 줘.&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-17",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=-핵심-요약-tldr>🗝️ 핵심 요약 (TL;DR)</h2><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>DeepSeekMoE</strong>는 <em>Causal Language Modeling</em> (다음 토큰 예측 cross-entropy) 목표로 <strong>2 T 토큰 규모</strong>의 영어-중국어 혼합 웹·문헌·코드 코퍼스를 사전학습했다.
파인튜닝 단계에서는 <strong>1.4 M</strong> 인스트럭션 데이터로 <strong>Supervised Fine-Tuning(SFT)</strong> + <strong>AdamW(1 e-5)</strong> 를 8 epoch 수행해 <strong>Chat 16 B</strong> 모델을 만든다. Pre-training에는 대규모 배치(4.5 K 시퀀스·18 M토큰)와 <em>warm-up 2 K step → 두 번의 step decay</em> 스케줄(최대 LR 4.2 e-4)을 사용했다.</p></div></blockquote><hr><h3 id=1-학습-목표objective>1. 학습 목표(Objective)</h3><table><thead><tr><th>항목</th><th>내용</th><th>근거</th></tr></thead><tbody><tr><td><strong>모델링 목표</strong></td><td><strong>Causal LM</strong> – 다음 토큰에 대한 <strong>cross-entropy</strong> 최소화</td><td>모델 평가 시 _Pile_에 “cross-entropy loss” 사용 언급 → 사전학습도 동일 목표</td></tr><tr><td><strong>마스크 방식</strong></td><td>GPT-류 <strong>좌하삼각(autoregressive) 마스크</strong></td><td>Transformer decoder-only 구조 설명에 기반</td></tr><tr><td><strong>균형 로스</strong></td><td>Expert-/Device-level <strong>Load-Balance Loss</strong> 추가 (MoE 안정화)</td><td>수식 (12)–(17) 에 정의</td></tr></tbody></table><hr><h3 id=2-사전학습-코퍼스>2. 사전학습 코퍼스</h3><table><thead><tr><th>범주</th><th>규모·특징</th><th>출처</th></tr></thead><tbody><tr><td><strong>총 토큰</strong></td><td><strong>2 T</strong> tokens (16 B 모델·145 B 예비), 100 B tokens (2 B 검증)</td><td></td></tr><tr><td><strong>언어 구성</strong></td><td><strong>영·중 이중언어</strong> 중심 + 코드·수학·문학 ·웹 텍스트</td><td></td></tr><tr><td><strong>토크나이저</strong></td><td>HF BPE, 8 K vocab(2 B) → <strong>100 K vocab(16 B+)</strong></td><td></td></tr></tbody></table><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><em>Dedup · Unicode NFKC · HTML strip</em> 등 표준 정제 절차 후 샘플링하여 토크나이저 학습 및 전체 코퍼스에 적용(논문 4.1.1).</p></div></blockquote><hr><h3 id=3-pre-training-하이퍼파라미터-16-b-기준>3. Pre-training 하이퍼파라미터 (16 B 기준)</h3><table><thead><tr><th>항목</th><th>값</th><th>출처</th></tr></thead><tbody><tr><td>Optimizer</td><td><strong>AdamW</strong> (β₁ = 0.9, β₂ = 0.95, wd = 0.1)</td><td></td></tr><tr><td>LR 스케줄</td><td><strong>Warm-up 2 K step → step-decay ×0.316 at 80 % & 90 %</strong><br>LR-max 4.2 e-4</td><td></td></tr><tr><td>Batch</td><td>4 .5 K 시퀀스 × 4 K 토큰 = <strong>18 M 토큰/step</strong></td><td></td></tr><tr><td>Steps</td><td><strong>106 449</strong> (= 2 T tokens)</td><td></td></tr><tr><td>Dropout</td><td><strong>없음</strong> (대규모 데이터로 대체)</td><td></td></tr><tr><td>Grad Clip</td><td>1.0    </td><td></td></tr><tr><td>병렬화</td><td><strong>파이프라인 병렬</strong>(층 단위) + 각 층 내 전문가를 동일 GPU 배치</td><td></td></tr></tbody></table><hr><h3 id=4-다운스트림-파인튜닝-전략>4. 다운스트림 파인튜닝 전략</h3><table><thead><tr><th>단계</th><th>설정</th><th>주요 수치</th><th>근거</th></tr></thead><tbody><tr><td><strong>데이터</strong></td><td><strong>1.4 M</strong> instruction pairs (EN + ZH)</td><td>수학·코드·QA·요약 등 다도메인</td><td></td></tr><tr><td><strong>모델</strong></td><td>DeepSeekMoE <strong>16 B</strong> → <strong>Chat 16 B</strong></td><td></td><td></td></tr><tr><td><strong>방법</strong></td><td><strong>Supervised Fine-Tuning(SFT)</strong></td><td>8 epoch · batch 1024 예시<br>max seq 4 K, 예시 packing 사용</td><td></td></tr><tr><td><strong>Optimizer</strong></td><td>AdamW, <strong>LR 1 e-5 고정</strong>, Dropout 0</td><td></td><td></td></tr><tr><td><strong>정렬(alignment)</strong></td><td>별도 RLHF/LoRA 없음 – SFT 만으로도 LLaMA-2 7 B 수준 달성</td><td></td><td></td></tr></tbody></table><hr><h3 id=5-최적화-포인트--실무-팁>5. 최적화 포인트 & 실무 팁</h3><ul><li><strong>모델–데이터 스케일 맞춤</strong> – 2 T tokens·100 K vocab으로 <em>context diversity</em> 확보 → Load-Balance Loss가 전문가 편중 막음.</li><li><strong>고정 LR SFT</strong> – MoE-FFN이 이미 일부 freeze-like 효과를 갖기 때문에 작은 LR 1 e-5로도 과적합 없이 수렴.</li><li><strong>Pipeline parallel + 전문가 단일 GPU 배치</strong> – 라우팅-통신 최소화; 실험적으로 A100-40 GB 1 GPU에서도 추론 가능(저자 언급).</li></ul><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p>이와 같이 <strong>Causal LM + 대규모 이중언어 코퍼스 + 간단 SFT</strong> 조합만으로, Chat 16 B는 <strong>Dense 7 B 대비 ~40 % FLOPs</strong> 로 유사 성능을 달성한다.</p></div></blockquote><h1 id=구현-및-자원>구현 및 자원</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-18 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-18 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-18><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;핵심 소프트웨어 의존성(예: CUDA, MPI, 특정 라이브러리)은 무엇인가? 학습 및 추론 중 예상되는 메모리 점유량(GPU의 경우 VRAM, CPU의 경우 RAM)은 얼마인가? 명시된 하드웨어에서의 처리량(throughput)은 얼마인가(예: images/sec, tokens/sec)? 총 연산 비용(예: 총 FLOPs 또는 Petaflop-days)에 대한 상세한 내역을 제공해 줘.&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-18",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=결론-한눈에-요약>결론 (한눈에 요약)</h2><table><thead><tr><th>모델</th><th>공개된 VRAM 요구</th><th>처리량 (저자 보고)</th><th>총 FLOPs (사전학습)</th><th>PF-days*</th><th>핵심 SW 스택</th></tr></thead><tbody><tr><td><strong>DeepSeekMoE 16B</strong></td><td>단일 A100-40GB GPU에서 추론 가능</td><td>7B dense 대비 ≈ <strong>2.5 ×</strong> 빠른 추론</td><td>74.4 T FLOPs/4k tok ⇒ <strong>37 Z FLOPs</strong>(2 T 토큰)</td><td><strong>≈ 431 PF-days</strong></td><td>PyTorch + HAI-LLM, CUDA 11.x, Triton 커널</td></tr><tr><td><strong>DeepSeekMoE 145B</strong></td><td>(미공개·다중 GPU) 활성 파라미터 22.2 B ≈ 45 GB FP16</td><td>숫자 미제시</td><td>572.7 T FLOPs/4k tok → <strong>35 Z FLOPs</strong>(245 B 토큰)</td><td><strong>≈ 406 PF-days</strong></td><td>동일 스택 + 파이프라인·전문가 병렬</td></tr></tbody></table><p>* 1 PF-day = 10¹⁵ FLOPs × 86 400 s.</p><hr><h3 id=1-소프트웨어프레임워크-의존성>1. 소프트웨어/프레임워크 의존성</h3><ul><li><strong>PyTorch 2.x</strong> – HAI-LLM 프레임워크가 PyTorch 위에서 텐서/파이프라인/ZeRO 병렬을 통합</li><li><strong>CUDA 11.x + Triton</strong> – 게이팅·전문가 선택 연산을 맞춤 GPU 커널로 구현</li><li><strong>NCCL/Collective Comm.</strong> – 텐서·전문가 병렬 통신.</li><li><strong>Megatron-LM 및 PipeDream</strong> 생태계 아이디어를 차용한 파이프라인 병렬 .</li><li><strong>AdamW(Decoupled Weight Decay)</strong> 최적화 루프 .</li></ul><h3 id=2-메모리-소요-추론-중심>2. 메모리 소요 (추론 중심)</h3><table><thead><tr><th>구성</th><th>FP16 파라미터 메모리</th><th>활성 파라미터(추론시)</th></tr></thead><tbody><tr><td>16B 모델 (총 16.4 B)</td><td>≈ 31 GB</td><td>2.8 B → ≈ 5.6 GB</td></tr><tr><td>145B 모델 (총 144.6 B)</td><td>≈ 289 GB</td><td>22.2 B → ≈ 44 GB</td></tr></tbody></table><p><em>16B 는 모든 파라미터·KV 캐시 포함 40 GB GPU에 적합 .</em></p><h3 id=3-처리량-지표>3. 처리량 지표</h3><ul><li><p><strong>추론</strong> – DeepSeekMoE 16B가 동급 7B dense 모델보다 <em>약 2.5배</em> 빠른 토큰 생성 속도(동일 GPU) .</p></li><li><p><strong>학습</strong> – 한 스텝당 18 M 토큰(4 k context, 배치 4.5 k) .</p><ul><li>이론적 FLOPs ≈ 74.4 T × (18 M / 4 k) = ~336 P FLOPs/step.</li></ul></li><li><p><strong>Hydragen 벤치마크</strong>(별도 논문) – A100-40GB 8 장, CodeLlama-13B 디코딩 32 k tok/s 이상 (32.9 k tok/s @ bs 2048, 16 k prefix) .</p></li></ul><h3 id=4-총-연산-비용>4. 총 연산 비용</h3><ul><li>16B: 2 T 토큰 × 18.6 G FLOPs/token ≈ <strong>3.7 × 10²² FLOPs</strong> ≅ 431 PF-days.</li><li>145B: 245 B 토큰 × 143 G FLOPs/token ≈ <strong>3.5 × 10²² FLOPs</strong> ≅ 406 PF-days.</li></ul><h3 id=5-정리>5. 정리</h3><ul><li><strong>메모리 효율</strong> – 모델 총량은 증가하지만 MoE 활성 파라미터가 소수라 추론 시 VRAM 요구가 급격히 완화(16B 단일 GPU).</li><li><strong>연산 효율</strong> – 동일 학습 토큰 대비 Dense 모델의 40 % 미만의 FLOPs로 동급 성능 달성 .</li><li><strong>SW 스택</strong> – 기존 PyTorch + CUDA 생태계에 Triton-based 커널을 얹어 <strong>전문가 선택·로딩</strong> 오버헤드 최소화.</li></ul><p>이상의 수치들은 저자가 공개한 값과 단순 FP16 가정에 기반한 <strong>보수적 추정</strong>이다. 논문에서 직접 측정한 초/토큰 처리량은 제한적으로만 제공되므로, 실제 엔드투엔드 성능은 하드웨어·배치 전략에 따라 달라질 수 있다.</p><h1 id=평가-및-지표>평가 및 지표</h1><div class="code-block-container border-border bg-card my-6 overflow-hidden rounded-xl border shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md"><div class="code-block-header bg-muted/30 border-border flex items-center justify-between border-b px-4 py-3"><div class="flex items-center gap-2"><div class="text-muted-foreground flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4 4 4-4 4M6 16l-4-4 4-4"/></svg></div><span class="text-muted-foreground text-sm font-medium">PLAINTEXT</span></div><div class="flex items-center gap-2"><button class="collapse-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-19 data-default-state=expanded data-collapsed=false data-auto-collapse-lines=30 data-auto-collapse-height=400 data-collapsed-height=120 title=접기 aria-label=접기>
<span class=collapse-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
</span><span class="collapse-text hidden sm:inline">접기</span>
</button>
<button class="copy-code-btn text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex items-center gap-1.5 rounded-md px-2 py-1 text-xs font-medium transition-all duration-200 ease-out focus:ring-2 focus:outline-none" data-code-id=code-19 title=복사 aria-label=복사>
<span class=copy-icon><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
</span><span class="copy-text hidden sm:inline">복사</span></button></div></div><div class="code-block-content relative" id=code-19><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>&#34;평가를 위한 주요 지표는 무엇인가: 지연 시간(latency), 처리량(throughput), 전력 소비, 또는 비용 대비 성능? 시스템은 더 많은 데이터, 사용자, 또는 컴퓨팅 노드에 따라 어떻게 확장되는가?&#34;</span></span></code></pre></div><div class="collapse-overlay to-card/90 pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent opacity-0 transition-opacity duration-300"><div class="text-muted-foreground bg-card/80 border-border/50 hover:bg-primary/10 hover:text-primary hover:border-primary/30 absolute bottom-4 left-1/2 -translate-x-1/2 cursor-pointer rounded-full border px-3 py-1.5 text-xs backdrop-blur-sm transition-all duration-200">클릭하여 더 보기</div></div></div></div><script>(function(){const s="code-19",n=document.querySelector('.copy-code-btn[data-code-id="'+s+'"]'),t=document.querySelector('.collapse-code-btn[data-code-id="'+s+'"]'),e=document.getElementById(s);if(!e)return;if(n){const s=n.querySelector(".copy-icon"),t=n.querySelector(".copy-text");n.addEventListener("click",async function(){try{let o="";const i=e.querySelector(".lntd:last-child code");if(i)o=i.textContent||i.innerText;else{const t=e.querySelector("code");if(t){const e=t.querySelector(".ln");if(e){const e=t.querySelectorAll(".cl");if(e.length>0)o=Array.from(e).map(e=>{const t=e.textContent||e.innerText;return t.replace(/\n+$/,"")}).join(`
`).replace(/\n+$/,"");else{const e=t.textContent||t.innerText;o=e.replace(/^\d+/gm,"").replace(/^\s+/gm,"")}}else o=t.textContent||t.innerText}else o=e.textContent||e.innerText}o=o.trim(),await navigator.clipboard.writeText(o),s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>`,t&&(t.textContent="복사됨"),n.classList.add("text-green-600"),setTimeout(()=>{s.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
</svg>`,t&&(t.textContent="복사"),n.classList.remove("text-green-600")},2e3)}catch(o){console.error("复制失败:",o);const s=document.createRange(),i=e.querySelector("code")||e;s.selectNodeContents(i);const n=window.getSelection();n.removeAllRanges(),n.addRange(s),t&&(t.textContent="선택됨"),setTimeout(()=>{t&&(t.textContent="복사"),n.removeAllRanges()},2e3)}})}if(t){const d=t.querySelector(".collapse-icon"),c=t.querySelector(".collapse-text"),n=e.querySelector(".collapse-overlay");let s=e.querySelector("pre.chroma");s||(s=e.querySelector("pre"));const m=t.dataset.defaultState||"expanded",f=t.dataset.collapsed==="true",u=parseInt(t.dataset.autoCollapseLines)||30,h=parseInt(t.dataset.autoCollapseHeight)||400,p=parseInt(t.dataset.collapsedHeight)||120;let l=!1;function i(){const e=f||m==="collapsed"||a();e&&o(!0,!1)}function a(){if(s){const e=s.querySelectorAll(".line, .cl"),t=s.offsetHeight;return e.length>u||t>h}const t=e.offsetHeight;if(t>h)return!0;const n=e.textContent||e.innerText||"",o=n.split(`
`).length;return o>u}function o(s,o=!0){if(!n)return;l=s,s?(e.style.maxHeight=p+"px",e.style.overflow="hidden",n.style.opacity="1",n.style.pointerEvents="auto",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
</svg>`,c&&(c.textContent="펼치기"),t.title="펼치기"):(e.style.maxHeight="",e.style.overflow="",n.style.opacity="0",n.style.pointerEvents="none",d.innerHTML=`
  <svg class="h-3 w-3"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6l-6 6z"/></svg>`,c&&(c.textContent="접기"),t.title="접기"),o&&(e.style.transition="max-height 0.3s ease-out",setTimeout(()=>{e.style.transition=""},300))}function r(){o(!l,!0)}t.addEventListener("click",r),n&&n.addEventListener("click",()=>{l&&o(!1,!0)}),i()}})()</script><h2 id=-한줄-결론-1>🚦 한줄 결론</h2><p>DeepSeekMoE는 **“연산량(FLOPs)·활성 파라미터·토큰/초 TPS”**를 핵심 효율 지표로 삼아 성능을 평가한다. 16 B 모델 기준, <strong>FLOPs는 LLaMA-2 7 B의 39.6 %</strong>, <strong>단일 A100-40 GB 추론 TPS는 ≈ 2.5 × ↑</strong>, 그리고 <strong>GPU 40 GB VRAM 안에 탑재</strong> 가능함을 보여주며, 145 B까지 확장해도 Dense 67 B 대비 <strong>계산 28.5 %</strong> 만으로 동급 성능을 유지한다.</p><hr><h3 id=1-평가에-사용된-핵심-시스템-지표>1. 평가에 사용된 핵심 시스템 지표</h3><table><thead><tr><th>지표</th><th>정의 & 측정법</th><th>대표 수치 (DeepSeekMoE 16 B)</th><th>논문 내 위치</th></tr></thead><tbody><tr><td><strong>FLOPs/4 K tok</strong></td><td>1 시퀀스(4 k 토큰) 처리에 필요한 총 부동소수점 연산</td><td><strong>74.4 T</strong> (Dense 7 B : 187.9 T → 39.6 %)</td><td>Tab. 4</td></tr><tr><td><strong>Activated Params</strong></td><td>추론 시 실제 계산에 참여하는 파라미터 양</td><td><strong>2.8 B</strong> (총 16.4 B의 17 %)</td><td>Tab. 4</td></tr><tr><td><strong>토큰/초 TPS (Throughput)</strong></td><td>단일 GPU에서 초당 생성 토큰</td><td><strong>Dense 7 B 대비 ≈ 2.5 ×</strong> 빠름</td><td>본문 §5.2</td></tr><tr><td><strong>Latency</strong></td><td>1 토큰 생성 시간(=1/TPS) – 표기 대신 TPS로 간접 제시</td><td>2.5 × 속도 향상 → 지연 ≈ 0.4 ×</td><td>§5.2</td></tr><tr><td><strong>VRAM</strong></td><td>FP16 파라미터 + KV 캐시 점유</td><td><strong>≤ 40 GB</strong> GPU 단일 카드 탑재 가능</td><td>§6.1</td></tr><tr><td><strong>총 훈련 FLOPs</strong></td><td>토큰 수 × FLOPs/token</td><td><strong>≈ 3.7 × 10²²</strong> (431 PF-days)</td><td>부록 C</td></tr><tr><td><strong>스케일 효율</strong></td><td>GPU 수 ↑ 시 장벽 요소 – All-to-All 통신 & Load-Balance Loss</td><td>Expert·Device FLOPs 편차 <strong>&lt; 5 %</strong> 유지</td><td>식 15‒17</td></tr></tbody></table><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p>⚡ <strong>전력·탄소</strong> 수치는 직접 보고되지 않지만, 동일 태스크 FLOPs가 60 %↓이므로 <strong>에너지·비용도 선형 절감</strong>으로 추정 가능.</p></div></blockquote><hr><h3 id=2-처리량tps지연-시간latency>2. 처리량(TPS)·지연 시간(latency)</h3><ul><li><strong>단일 A100-40 GB</strong>: MoE 16 B는 동일 하드웨어에서 <strong>Dense 7 B 대비 ≈ 2.5 × TPS</strong> → 토큰당 지연 시간 60 % 감소</li><li><strong>다중 GPU</strong>: HAI-LLM 프레임워크로 <strong>파이프라인 + 전문가 병렬</strong>을 결합하고, <em>Device-level balance loss</em> 로 각 GPU FLOPs 오차를 5 % 이내로 제한해 <strong>선형에 가까운 스루풋 스케일링</strong>을 확인 .</li></ul><hr><h3 id=3-비용-대-성능-flops파라미터-절감>3. 비용-대-성능 (FLOPs·파라미터 절감)</h3><table><thead><tr><th>비교</th><th>연산량(FLOPs)</th><th>활성 파라미터</th><th>성능</th></tr></thead><tbody><tr><td><strong>MoE 16 B vs Dense 7 B</strong></td><td><strong>0.396 ×</strong></td><td>0.42 ×</td><td>10 개 벤치 중 7 개 우세</td></tr><tr><td><strong>MoE 145 B vs Dense 67 B</strong></td><td><strong>0.285 ×</strong></td><td>0.32 ×</td><td>대다수 태스크 동급</td></tr></tbody></table><hr><h3 id=4-확장성scaling-관찰>4. 확장성(Scaling) 관찰</h3><table><thead><tr><th>축</th><th>관찰 결과</th><th>근거</th></tr></thead><tbody><tr><td><strong>데이터 토큰 ↑</strong></td><td>0 → 2 T 토큰 학습 곡선이 Dense 7 B와 유사한 기울기 → <strong>데이터 효율 손실 無</strong></td><td></td></tr><tr><td><strong>전문가 세분화(m) ↑</strong></td><td>2 → 4 → 8 세분화 시 정규화 성능 +20 % 상승, FLOPs 거의 동일</td><td>Fig. 3 Ablation (본문)</td></tr><tr><td><strong>GPU 노드 ↑</strong></td><td>Expert·Device dual loss로 <strong>라우팅 붕괴 없이 145 B / 128 expert</strong>까지 확장</td><td>식 12‒17 + §7</td></tr><tr><td><strong>동시 사용자 ↑</strong></td><td>활성 파라미터 적어 <strong>KV 캐시가 작고 TPS↑</strong> → 동시 요청 처리량 우수(2.5 ×)</td><td></td></tr></tbody></table><hr><h3 id=5-누락된제한적-지표>5. 누락된/제한적 지표</h3><ul><li><strong>전력(W)·탄소(g CO₂e)</strong>: 논문에 직접 수치는 없으나, FLOPs ↓ 비례 절감으로 추정.</li><li><strong>P99 Latency</strong>: 평균 TPS만 보고, tail-latency 측정은 미제공.</li><li><strong>Dollar-per-Token</strong>: 클라우드 비용 모델을 제공하지 않음.</li></ul><hr><h3 id=6-요약--실무-시사점>6. 요약 & 실무 시사점</h3><ol><li><strong>평가 핵심</strong> = <em>FLOPs, Activated-Params, TPS</em> + (간접) Latency.</li><li><strong>16 B 모델</strong>은 Dense 7 B와 동급 품질을 <strong>연산·메모리 40 % 수준</strong>으로 달성, 단일 40 GB GPU 추론 가능.</li><li><strong>145 B 스케일</strong>에서도 계산 28.5 %로 Dense 67 B를 재현, <strong>로드 밸런스 손실 &lt; 5 %</strong>.</li><li><strong>추가 측정이 필요한 부분</strong>: 실제 전력·비용, tail latency, 대규모 배치 시 통신 병목.</li></ol><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p>📌 <strong>결론</strong> DeepSeekMoE는 “FLOPs 절감 = 비용·전력↓, 활성 파라미터↓ = VRAM↓, TPS↑” 를 동시에 달성하며, 균형 loss와 파이프라인 병렬로 노드·데이터 스케일에도 견고하게 확장된다.</p></div></blockquote></details></article></main><footer class="mx-auto max-w-4xl px-4 py-8"><div class="px-6 py-6"><nav class=mb-6><div class="flex flex-wrap items-center justify-center gap-1"><a href=/index.xml class="nav-link hover:text-primary hover:bg-primary/10 text-muted-foreground flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="RSS Feed"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 5c7.18.0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"/></svg>
<span>RSS Feed</span></a></div></nav><div class="border-border mb-6 border-t"></div><div class="flex flex-col items-center justify-between gap-4 md:flex-row"><div class="text-muted-foreground text-sm"><p>&copy; 2025 Jaehun's Blog.
모든 권리 보유.</p></div><div class="flex items-center gap-3"><a href=https://github.com/ryujaehun target=_blank rel="noopener noreferrer" class="text-muted-foreground hover:text-primary focus:ring-primary/20 rounded-lg p-1 transition-all duration-300 ease-out hover:scale-110 focus:ring-2 focus:outline-none" title=GitHub aria-label=GitHub><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="GitHub"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15 22v-4a4.8 4.8.0 00-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35.0-3.5.0.0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35.0 3.5A5.4 5.4.0 004 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65S8.93 17.38 9 18v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></g></svg>
</a><a href=https://www.linkedin.com/in/jaehunryu/ target=_blank rel="noopener noreferrer" class="text-muted-foreground hover:text-primary focus:ring-primary/20 rounded-lg p-1 transition-all duration-300 ease-out hover:scale-110 focus:ring-2 focus:outline-none" title=Linkedin aria-label=Linkedin><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="Linkedin"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6M2 9h4v12H2z"/><circle cx="4" cy="4" r="2"/></g></svg>
</a><a href=mailto:jaehunryu@icloud.com class="text-muted-foreground hover:text-primary focus:ring-primary/20 rounded-lg p-1 transition-all duration-300 ease-out hover:scale-110 focus:ring-2 focus:outline-none" title=Email aria-label=Email><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-label="Email"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22.0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v10a2 2 0 002 2z"/></svg></a></div></div></div></footer><div id=dock class="pointer-events-none fixed bottom-4 left-1/2 z-[9999] w-fit -translate-x-1/2 translate-y-24 opacity-0 transition-all duration-300 ease-out sm:right-0 sm:left-0 sm:mx-auto sm:translate-x-0" role=toolbar aria-label="바로가기 도구 모음"><nav class="border-border bg-card/80 scrollbar-hide xs:px-3 xs:py-2 mx-auto flex max-w-[calc(100vw-2rem)] min-w-fit items-center justify-center overflow-x-auto rounded-2xl border px-4 py-3 shadow-lg backdrop-blur-sm sm:px-4 sm:py-3"><button id=dock-back class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 xs:px-2 xs:py-1.5 flex flex-shrink-0 items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none sm:px-3 sm:py-2" title=뒤로 aria-label=뒤로>
<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
<span class="hidden sm:inline">뒤로</span></button><div class="bg-border xs:mx-1 mx-2 h-6 w-px sm:mx-2"></div><button id=dock-toc class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 xs:px-2 xs:py-1.5 flex flex-shrink-0 items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none sm:px-3 sm:py-2" title=목차 aria-label=목차>
<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></svg>
<span class="hidden sm:inline">목차</span></button><div class="bg-border xs:mx-1 mx-2 h-6 w-px sm:mx-2"></div><button id=dock-search class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 xs:px-3 xs:py-1.5 flex flex-shrink-0 items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none sm:px-4 sm:py-2" title=검색 aria-label=검색>
<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg>
<span class="hidden md:inline">검색</span></button><div class="bg-border xs:mx-1 mx-2 h-6 w-px sm:mx-2"></div><button id=dock-top class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 xs:px-2 xs:py-1.5 flex flex-shrink-0 items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none sm:px-3 sm:py-2" title="맨 위로" aria-label="맨 위로">
<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="m18 15-6-6-6 6"/></svg>
<span class="hidden sm:inline">맨 위로</span></button></nav></div><div id=toc-overlay class="pointer-events-none fixed inset-0 z-40 bg-black/50 opacity-0 backdrop-blur-sm transition-all duration-300" role=dialog aria-modal=true aria-labelledby=toc-title></div><div id=toc-card class="pointer-events-none fixed inset-4 z-50 flex w-auto scale-95 items-center justify-center opacity-0 transition-all duration-300 sm:inset-auto sm:top-1/2 sm:left-1/2 sm:block sm:w-full sm:max-w-md sm:-translate-x-1/2 sm:-translate-y-1/2" role=dialog aria-modal=true aria-labelledby=toc-title><div class="bg-card border-border w-full max-w-sm overflow-hidden rounded-xl border shadow-xl sm:max-w-md"><div class="border-border bg-muted/30 flex items-center justify-between border-b p-4"><div class="flex items-center gap-3"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></svg><h2 id=toc-title class="text-foreground text-lg font-semibold">목차</h2></div><button id=toc-close class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 rounded-lg p-2 transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none" title=닫기 aria-label=닫기>
<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 18 6M6 6l12 12"/></svg></button></div><div class="max-h-96 overflow-y-auto p-4"><nav id=toc-nav class=toc-scrollbar aria-label="글 목차"><div id=toc-content><nav id=TableOfContents><ul><li><a href=#한-줄-요약-tldr>한 줄 요약 (TL;DR)</a></li><li><a href=#핵심-아이디어>핵심 아이디어</a></li><li><a href=#배경-그들이-해결한-문제>배경: 그들이 해결한 문제</a></li><li><a href=#새로운-접근법-deepseekmoe>새로운 접근법: <strong>DeepSeekMoE</strong></a></li><li><a href=#작동-원리-구체적인-예시로-살펴보기>작동 원리: 구체적인 예시로 살펴보기</a></li><li><a href=#성능-검증-주요-결과>성능 검증: 주요 결과</a></li><li><a href=#우리의-관점-강점-한계-그리고-이-연구가-중요한-이유>우리의 관점: 강점, 한계, 그리고 이 연구가 중요한 이유</a><ul><li><a href=#-강점>👍 강점</a></li><li><a href=#-한계>⚠️ 한계</a></li><li><a href=#-왜-중요한가>🌟 왜 중요한가?</a></li></ul></li><li><a href=#다음-단계는-앞으로의-길>다음 단계는?: 앞으로의 길</a><ul><li><a href=#토글을-클릭하면-논문에-대한-자세한-llm-질의응답-내용을-확인할-수-있습니다>토글을 클릭하면 논문에 대한 자세한 LLM 질의응답 내용을 확인할 수 있습니다.</a></li></ul></li></ul><ul><li><a href=#-한눈에-보는-결론-tldr--research-gap>🗝️ 한눈에 보는 결론 (TL;DR – Research Gap)</a><ul><li><a href=#1-연구-공백research-gap--무엇이-비어-있었나>1. 연구 공백(Research Gap) — 무엇이 비어 있었나?</a></li><li><a href=#2-당시-최신-기술state-of-the-art-요약>2. 당시 최신 기술(State of the Art) 요약</a></li></ul></li></ul><ul><li><ul><li><a href=#-central-hypothesis>🚀 Central Hypothesis</a></li></ul></li></ul><ul><li><ul><li><a href=#-tldr--deepseekmoe의-독창적-공헌-3가지>🚩 TL;DR — DeepSeekMoE의 독창적 공헌 3가지</a></li></ul></li></ul><ul><li><a href=#-핵심-요약>✨ 핵심 요약</a><ul><li><a href=#1-왜-우리-방식이-더-낫나--저자들의-핵심-논거-3가지>1. “왜 우리 방식이 더 낫나?” — 저자들의 핵심 논거 3가지</a></li><li><a href=#2-저자들이-강조하는-독창성--성능-논리-흐름>2. 저자들이 강조하는 ‘독창성 → 성능’ 논리 흐름</a></li><li><a href=#3-한-눈-요약-포인트-숫자로-말하는-deepseekmoe>3. 한-눈-요약 포인트 (숫자로 말하는 DeepSeekMoE)</a></li></ul></li></ul><ul><li><a href=#-핵심-알고리즘-한눈에-요약>🏁 핵심 알고리즘 한눈에 요약</a></li><li><a href=#1-용어--변수-정의>1️⃣ 용어 & 변수 정의</a></li><li><a href=#2-단계별-파이프라인-toy-example->2️⃣ 단계별 파이프라인 (Toy Example 🎲)</a><ul><li><a href=#step-0토큰-임베딩>Step 0 토큰 임베딩</a></li><li><a href=#step-1affinity-계산>Step 1 Affinity 계산</a></li><li><a href=#step-2전문가-선택>Step 2 전문가 선택</a></li><li><a href=#step-3전문가-ffn-처리>Step 3 전문가 FFN 처리</a></li></ul></li></ul><ul><li><a href=#-비밀-병기--fine-grained-expert-segmentation-fges--확장-top->🧩 ‘비밀 병기’ — <strong>Fine-Grained Expert Segmentation (FGES) + 확장 Top-<em>mK</em> 게이팅</strong></a><ul><li><a href=#1-무엇을-하나>1️⃣ 무엇을 하나?</a></li><li><a href=#2-왜-deepseekmoe의-성공에-필수적인가>2️⃣ 왜 DeepSeekMoE의 성공에 필수적인가?</a></li></ul></li></ul><ul><li><a href=#-한줄-결론>🗝️ 한줄 결론</a><ul><li><a href=#-구조-변경-한눈-비교>🔍 구조 변경 한눈 비교</a></li></ul></li><li><a href=#-파이썬-예시--pytorch-like-pseudo-code->🐍 파이썬 예시 ( PyTorch-like pseudo-code )</a><ul><li><a href=#-사용-예>▶️ 사용 예</a></li><li><a href=#-핵심-변경-포인트-요약>💡 핵심 변경 포인트 요약</a></li></ul></li></ul><ul><li><a href=#-tldr--deepseekmoe-results-한눈-요약>🚀 TL;DR — DeepSeekMoE “Results” 한눈 요약</a></li><li><a href=#1-핵심-성능-지표--벤치마크>1️⃣ 핵심 성능 지표 & 벤치마크</a></li><li><a href=#2-결과-하이라이트>2️⃣ 결과 하이라이트</a><ul><li><a href=#a-validation-2-b-모델-100-b-토큰--table-1x20>(A) Validation 2 B 모델 @100 B 토큰 — Table 1</a></li><li><a href=#b-deepseekmoe-vs-dense-upper-bound--table-2x20>(B) DeepSeekMoE vs Dense Upper-Bound — Table 2</a></li><li><a href=#c-16-b-vs-dense-7-b--tables-34>(C) 16 B vs Dense 7 B — Tables 3·4</a></li><li><a href=#d-chat-sft-후-16-b--table-5x20>(D) Chat SFT 후 16 B ― Table 5</a></li><li><a href=#e-ablation-figure-3x20>(E) Ablation Figure 3</a></li></ul></li><li><a href=#3-결론--시사점>3️⃣ 결론 & 시사점</a></li></ul><ul><li><a href=#-압축-결론-key-take-aways>🏁 압축 결론 (Key Take-aways)</a></li><li><a href=#1-sotabaseline-비교--숫자로-보는-승부처>1. SOTA/Baseline 비교 — 숫자로 보는 승부처</a></li><li><a href=#2-우월성-주장을-뒷받침하는-킬러-비교>2. 우월성 주장을 뒷받침하는 ‘킬러 비교’</a></li><li><a href=#3-개선-효과가-미미열세인-영역--해석>3. 개선 효과가 미미/열세인 영역 & 해석</a></li><li><a href=#4-총평--실무적-의미>4. 총평 & 실무적 의미</a></li></ul><ul><li><a href=#-tldr--한눈에-보는-제약-리스트>🚦 TL;DR — 한눈에 보는 ‘제약 리스트’</a><ul><li><a href=#1-저자가-명시한-한계실패-사례>1. 저자가 명시한 한계・실패 사례</a></li><li><a href=#2-저자가-쓰지-않은-잠재적-한계-분석>2. 저자가 쓰지 않은 잠재적 한계 (분석)</a></li><li><a href=#3-개선--향후-연구-아이디어-1-줄씩>3. 개선 / 향후 연구 아이디어 (1-줄씩)</a></li></ul></li></ul><ul><li><a href=#-한눈에-보는-미래-연구-로드맵>🚀 한눈에 보는 미래 연구 로드맵</a><ul><li><a href=#1-저자들이-명시한-다음-단계>1. 저자들이 명시한 &lsquo;다음 단계&rsquo;</a></li><li><a href=#2-한계-기반-추가-제안-이-리뷰어-관점>2. 한계 기반 추가 제안 (이 리뷰어 관점)</a></li><li><a href=#3-연구-궤적을-위한-실행-순서-제안>3. 연구 궤적을 위한 실행 순서 제안</a></li></ul></li></ul><ul><li><a href=#핵심-요약-한눈에-보는-수치>핵심 요약 <em>(한눈에 보는 수치)</em></a><ul><li><a href=#1-토큰화tokenization-전략--bpe>1. 토큰화(Tokenization) 전략 — BPE</a></li><li><a href=#2-out-of-vocabularyoov-단어-처리>2. Out-of-Vocabulary(OOV) 단어 처리</a></li><li><a href=#3-텍스트-정제정규화-파이프라인>3. 텍스트 정제·정규화 파이프라인</a></li><li><a href=#4-정리>4. 정리</a></li></ul></li></ul><ul><li><ul><li><a href=#-결론-한-줄>✍️ 결론 한 줄</a></li></ul></li><li><a href=#1-어텐션-메커니즘-상세>1. 어텐션 메커니즘 상세</a></li><li><a href=#2-위치-인코딩positional-encoding>2. 위치 인코딩(Positional Encoding)</a></li><li><a href=#3-인코더-디코더-상호작용-여부>3. 인코더-디코더 상호작용 여부</a></li><li><a href=#4-핵심-파라미터-요약-숫자>4. 핵심 파라미터 요약 (숫자)</a></li></ul><ul><li><a href=#-핵심-요약-tldr>🗝️ 핵심 요약 (TL;DR)</a><ul><li><a href=#1-학습-목표objective>1. 학습 목표(Objective)</a></li><li><a href=#2-사전학습-코퍼스>2. 사전학습 코퍼스</a></li><li><a href=#3-pre-training-하이퍼파라미터-16-b-기준>3. Pre-training 하이퍼파라미터 (16 B 기준)</a></li><li><a href=#4-다운스트림-파인튜닝-전략>4. 다운스트림 파인튜닝 전략</a></li><li><a href=#5-최적화-포인트--실무-팁>5. 최적화 포인트 & 실무 팁</a></li></ul></li></ul><ul><li><a href=#결론-한눈에-요약>결론 (한눈에 요약)</a><ul><li><a href=#1-소프트웨어프레임워크-의존성>1. 소프트웨어/프레임워크 의존성</a></li><li><a href=#2-메모리-소요-추론-중심>2. 메모리 소요 (추론 중심)</a></li><li><a href=#3-처리량-지표>3. 처리량 지표</a></li><li><a href=#4-총-연산-비용>4. 총 연산 비용</a></li><li><a href=#5-정리>5. 정리</a></li></ul></li></ul><ul><li><a href=#-한줄-결론-1>🚦 한줄 결론</a><ul><li><a href=#1-평가에-사용된-핵심-시스템-지표>1. 평가에 사용된 핵심 시스템 지표</a></li><li><a href=#2-처리량tps지연-시간latency>2. 처리량(TPS)·지연 시간(latency)</a></li><li><a href=#3-비용-대-성능-flops파라미터-절감>3. 비용-대-성능 (FLOPs·파라미터 절감)</a></li><li><a href=#4-확장성scaling-관찰>4. 확장성(Scaling) 관찰</a></li><li><a href=#5-누락된제한적-지표>5. 누락된/제한적 지표</a></li><li><a href=#6-요약--실무-시사점>6. 요약 & 실무 시사점</a></li></ul></li></ul></nav></div></nav></div><div class="border-border bg-muted/20 border-t px-4 py-3"><div class="text-muted-foreground text-center text-xs"><span>제목을 클릭하면 해당 위치로 이동합니다</span></div></div></div></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css integrity=sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js integrity=sha384-cMkvdD8LoxVzGF/RPUKAcvmm49FQ0oxwDF3BGKtDXcEc+T1b2N+teh/OJfpU0jr6 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js integrity=sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh crossorigin=anonymous></script><script>function initKaTeX(){if(typeof renderMathInElement=="undefined"){setTimeout(initKaTeX,100);return}var e=[{display:!0,left:"$$",right:"$$"},{display:!1,left:"$",right:"$"}];renderMathInElement(document.body,{delimiters:e,throwOnError:!1,errorColor:"#cc0000",fleqn:!1,leqno:!1,trust:!1})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",initKaTeX):initKaTeX()</script><div id=search-overlay class="pointer-events-none fixed inset-0 z-40 bg-black/50 opacity-0 transition-opacity duration-300"></div><div id=search-modal class="bg-card border-border pointer-events-none fixed top-1/2 left-1/2 z-50 max-h-[80vh] w-full max-w-2xl -translate-x-1/2 -translate-y-1/2 scale-95 transform overflow-hidden rounded-xl border opacity-0 shadow-xl transition-all duration-300"><div class="border-border flex items-center gap-3 border-b p-4"><div class="text-muted-foreground h-5 w-5 flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg></div><div class="relative flex-1"><button id=search-clear class="text-muted-foreground hover:text-foreground hover:bg-muted/50 pointer-events-none absolute top-1/2 left-0 z-10 h-5 w-5 -translate-y-1/2 rounded opacity-0 transition-all duration-200" title=지우기 aria-label=지우기>
<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 18 6M6 6l12 12"/></svg>
</button>
<input id=search-input type=text placeholder="게시글 검색..." class="text-foreground placeholder:text-muted-foreground w-full border-none bg-transparent pl-8 text-lg outline-none" autocomplete=off spellcheck=false></div><button id=search-close class="text-muted-foreground hover:text-foreground hover:bg-muted/50 flex h-6 w-6 items-center justify-center rounded-md p-0.5 transition-all duration-200" title=닫기 aria-label=닫기>
<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 18 6M6 6l12 12"/></svg></button></div><div id=search-results class="max-h-96 overflow-y-auto"><div id=search-empty class="flex flex-col items-center justify-center py-12 text-center"><div class="bg-muted/50 mb-4 flex h-16 w-16 items-center justify-center rounded-full"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg></div><h3 class="text-foreground mb-2 text-lg font-semibold">검색 시작</h3><p class="text-muted-foreground text-sm">검색어를 입력하세요</p></div><div id=search-loading class="flex hidden items-center justify-center py-8"><div class="mr-3 h-6 w-6 animate-spin rounded-full border-2 border-current border-t-transparent"></div><span class=text-muted-foreground>검색 중...</span></div><div id=search-no-results class="flex hidden flex-col items-center justify-center py-12 text-center"><div class="bg-muted/50 mb-4 flex h-16 w-16 items-center justify-center rounded-full"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/></svg></div><h3 class="text-foreground mb-2 text-lg font-semibold">검색 결과 없음</h3><p class="text-muted-foreground text-sm">다른 검색어로 시도해보세요</p></div><div id=search-results-list class=hidden><div id=search-stats class="text-muted-foreground border-border border-b px-4 py-3 text-sm" data-template="%d개의 결과 찾음"></div><div id=search-items class="divide-border divide-y"></div></div></div><div class="border-border bg-muted/20 border-t px-4 py-3"><div class="text-muted-foreground flex items-center justify-between text-xs"><div class="flex items-center gap-2 md:gap-4"><div class="flex items-center gap-1"><kbd class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs">↑↓</kbd>
<span class="hidden sm:inline">이동</span></div><div class="flex items-center gap-1"><kbd class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs">↵</kbd>
<span class="hidden sm:inline">선택</span></div><div class="flex items-center gap-1"><kbd class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs">ESC</kbd>
<span class="hidden sm:inline">닫기</span></div></div><div class="search-hint-desktop flex items-center gap-1"><kbd class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs">⌘K</kbd>
<span>단축키</span></div></div></div></div></body></html>